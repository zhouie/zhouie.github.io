<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>北岛向南的小屋</title>
  
  <subtitle>那时我们有梦，关于文学，关于爱情，关于穿越世界的旅行</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zhouie.cn/"/>
  <updated>2019-11-25T01:25:36.887Z</updated>
  <id>https://zhouie.cn/</id>
  
  <author>
    <name>zhouie</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【分享】 SS、SSR科学上网小知识</title>
    <link href="https://zhouie.cn/posts/201910111/"/>
    <id>https://zhouie.cn/posts/201910111/</id>
    <published>2019-10-11T22:11:39.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>早前在 <a href="http://mp.weixin.qq.com/s?__biz=MzI4MDE4MTUyOA==&amp;mid=2649469177&amp;idx=1&amp;sn=ce223da0c3b279d5827fd5ef404c33a3&amp;chksm=f3a37e8ec4d4f79841c7604a70d13838fcd5fce04a5af99daa625eab87540eb2e73ed3d433b4&amp;scene=21#wechat_redirect" target="_blank" rel="noopener">🔗科学上网工具，请查收</a> 这里就分享过一些可用的“科学上网”工具，从那之后，隔一段时间就能收到梯子需求之类的邮件，就感觉大家对这种事情特感兴趣。其实我本人平时不太爱去墙外，除了一些工作学习需要…</p><ul><li>Windows端：<a href="https://www.lanzous.com/i6plddi" target="_blank" rel="noopener">https://www.lanzous.com/i6plddi</a></li><li>Android端：<a href="https://www.lanzous.com/i6ple7i" target="_blank" rel="noopener">https://www.lanzous.com/i6ple7i</a></li></ul><blockquote><p>有疑问可留言或邮件 nanzhouieATqq.com 讨论。</p></blockquote><h3 id="WINDOWS设备安装使用SS-SSR"><a href="#WINDOWS设备安装使用SS-SSR" class="headerlink" title="WINDOWS设备安装使用SS/SSR"></a>WINDOWS设备安装使用SS/SSR</h3><blockquote><p>需要安装<code>.NET Framework 4.6.2</code> 和 Microsoft Visual C++ 2015 Redistributable (x86)（一般电脑已经安装，不需要再次安装）。<br>若提示<code>.NET framework</code>过低，则需要下载<code>.NET framework</code>软件<a href="https://www.microsoft.com/zh-CN/download/details.aspx?id=53344" target="_blank" rel="noopener">https://www.microsoft.com/zh-CN/download/details.aspx?id=53344</a>，重新打开运行即可。</p></blockquote><h4 id="第一步，下载用于WINDOWS设备的SHADOWSOCKS-WINDOWS软件"><a href="#第一步，下载用于WINDOWS设备的SHADOWSOCKS-WINDOWS软件" class="headerlink" title="第一步，下载用于WINDOWS设备的SHADOWSOCKS-WINDOWS软件"></a>第一步，下载用于WINDOWS设备的SHADOWSOCKS-WINDOWS软件</h4><table><thead><tr><th>描述</th><th>链接</th></tr></thead><tbody><tr><td>Shadowsocks-4.1.3.1</td><td><a href="https://github.com/shadowsocks" target="_blank" rel="noopener">https://github.com/shadowsocks</a></td></tr><tr><td>Shadowsocks-4.1.3.1-备用</td><td><a href="https://help.ss-ssr.com/download/Shadowsocks-4.1.3.1.zip" target="_blank" rel="noopener">https://help.ss-ssr.com/download/Shadowsocks-4.1.3.1.zip</a></td></tr><tr><td>ssr-win-4.9.0-备用</td><td><a href="https://help.ss-ssr.com/download/ssr-win-4.9.0.zip" target="_blank" rel="noopener">https://help.ss-ssr.com/download/ssr-win-4.9.0.zip</a></td></tr></tbody></table><h4 id="第二步，打开程序文件SHADOWSOCKS-EXE，鼠标右键单击配置节点信息"><a href="#第二步，打开程序文件SHADOWSOCKS-EXE，鼠标右键单击配置节点信息" class="headerlink" title="第二步，打开程序文件SHADOWSOCKS.EXE，鼠标右键单击配置节点信息"></a>第二步，打开程序文件SHADOWSOCKS.EXE，鼠标右键单击配置节点信息</h4><p>下载后解压文件，打开EXE文件，右键单击左下角的飞机图标进行配置</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2019/10/11/ECiH1VQMZyDBvOP.png" alt title>                </div>                <div class="image-caption"></div>            </figure><p>目前主要有三种配置节点信息的方法，可以根据你的习惯和需要选择</p><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>从剪切板导入URL</td><td>每次复制SS链接，点击从剪切板导入URL即可配置服务器</td></tr><tr><td>扫二维码配置</td><td>通过扫描屏幕上的二维码，自动配置，推荐</td></tr><tr><td>手动编辑服务器配置</td><td>添加服务器，并逐一配置相关节点信息</td></tr></tbody></table><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2019/10/11/vFZk7YEaAPMfgKI.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="方法一，从剪切板导入URL"><a href="#方法一，从剪切板导入URL" class="headerlink" title="方法一，从剪切板导入URL"></a>方法一，从剪切板导入URL</h5><ul><li>首先复制SS地址</li><li>然后右键单击右下角的软件，点击“服务器”－“从剪切板导入URL”</li></ul><h5 id="方法二，扫二维码配置（推荐）"><a href="#方法二，扫二维码配置（推荐）" class="headerlink" title="方法二，扫二维码配置（推荐）"></a>方法二，扫二维码配置（推荐）</h5><ul><li>首先网页上或者是聊天窗口打开节点的二维码图片</li><li>然后右键单击右下角的软件，点击“服务器”－“扫描屏幕上的二维码”</li><li>程序自动识别二维码并导入服务器节点信息</li><li>最后启用系统代理即可使用</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://i.loli.net/2019/10/11/xgqUjFE4PVWtQ8M.png" alt title>                </div>                <div class="image-caption"></div>            </figure><h5 id="方法三，手动编辑服务器配置"><a href="#方法三，手动编辑服务器配置" class="headerlink" title="方法三，手动编辑服务器配置"></a>方法三，手动编辑服务器配置</h5><ul><li>右键单击右下角的软件，点击“服务器”－“编辑服务器”</li></ul><h4 id="最后需要更新PAC"><a href="#最后需要更新PAC" class="headerlink" title="最后需要更新PAC"></a>最后需要更新PAC</h4><p>依次操作：PAC -&gt;从GFW List更新PAC （等待更新完毕后）-&gt;使用本地PAC-&gt;启动系统代理。完成后，即可打开游览器访问网站进行测试</p><p> </p><h3 id="Android设备安装使用SS-SSR"><a href="#Android设备安装使用SS-SSR" class="headerlink" title="Android设备安装使用SS/SSR"></a>Android设备安装使用SS/SSR</h3><blockquote><p>注意：此软件可能带广告，下载后删去即可</p></blockquote><h4 id="第一步，下载用于ANDROID设备的SHADOWSOCKS-ANDROID软件"><a href="#第一步，下载用于ANDROID设备的SHADOWSOCKS-ANDROID软件" class="headerlink" title="第一步，下载用于ANDROID设备的SHADOWSOCKS-ANDROID软件"></a>第一步，下载用于ANDROID设备的SHADOWSOCKS-ANDROID软件</h4><table><thead><tr><th>描述</th><th>链接</th></tr></thead><tbody><tr><td>Shadowsocks Android</td><td><a href="https://github.com/shadowsocks/shadowsocks-android/releases/download/v4.6.1/shadowsocks--universal-4.6.1.apk" target="_blank" rel="noopener">https://github.com/shadowsocks/shadowsocks-android/releases/download/v4.6.1/shadowsocks--universal-4.6.1.apk</a></td></tr><tr><td>Google play 商店</td><td><a href="https://play.google.com/store/apps/details?id=com.github.shadowsocks" target="_blank" rel="noopener">https://play.google.com/store/apps/details?id=com.github.shadowsocks</a></td></tr><tr><td>Android 影梭软件</td><td><a href="https://help.ss-ssr.com/download/shadowsocksAndroid.apk" target="_blank" rel="noopener">https://help.ss-ssr.com/download/shadowsocksAndroid.apk</a></td></tr><tr><td>ss-4.6.1-备用</td><td><a href="https://help.ss-ssr.com/download/ss-4.6.1.apk" target="_blank" rel="noopener">https://help.ss-ssr.com/download/ss-4.6.1.apk</a></td></tr><tr><td>ssr-3.4.0.8-备用</td><td><a href="https://help.ss-ssr.com/download/ssr-3.4.0.8.apk" target="_blank" rel="noopener">https://help.ss-ssr.com/download/ssr-3.4.0.8.apk</a></td></tr></tbody></table><h4 id="第二步，打开程序文件SHADOWSOCKS配置节点信息"><a href="#第二步，打开程序文件SHADOWSOCKS配置节点信息" class="headerlink" title="第二步，打开程序文件SHADOWSOCKS配置节点信息"></a>第二步，打开程序文件SHADOWSOCKS配置节点信息</h4><p>有多种配置节点信息的方法，可以根据你的习惯和需要选择，推荐使用“扫二维码配置”方法</p><ul><li>首先网页上打开节点的二维码图片</li><li>然后打开软件右下角的“+”，选择“扫描屏幕上的二维码”</li><li>程序自动识别二维码并导入服务器节点信息</li></ul><h4 id="最后需要设置路由"><a href="#最后需要设置路由" class="headerlink" title="最后需要设置路由"></a>最后需要设置路由</h4><p>仅代理中国大陆无法访问的地址，完成后，即可打开游览器访问网站进行测试。</p><h3 id="关于SS-SSR"><a href="#关于SS-SSR" class="headerlink" title="关于SS/SSR"></a>关于SS/SSR</h3><h4 id="什么是SS"><a href="#什么是SS" class="headerlink" title="什么是SS"></a>什么是SS</h4><p>Shadowsocks是一款FQ代理软件，可翻译为“影梭”，简写为SS。作者是<a href="https://github.com/clowwindy" target="_blank" rel="noopener">https://github.com/clowwindy</a>，他把源码共享在了github上，火了之后被请去喝茶，就没再维护更新了。据说现在是由国外的谁谁谁在维护（<a href="https://shadowsocks.org/en/index.html" target="_blank" rel="noopener">https://shadowsocks.org/en/index.html</a>、<a href="https://github.com/shadowsocks" target="_blank" rel="noopener">https://github.com/shadowsocks</a>）。</p><h4 id="什么是SSR"><a href="#什么是SSR" class="headerlink" title="什么是SSR"></a>什么是SSR</h4><p>ShadowsocksR是在SS作者被喝茶之后，有拨人站出来表示SS容易被防火墙检测到，所以在混淆和协议方面做了改进，更加不容易被检测到，而且兼容SS，改进后的这个项目就叫ShadowsocksR，简称SSR。<br>据说，江湖上关于“SS好还是SSR好”的争论始终存在！</p><h4 id="SS与SSR的原理"><a href="#SS与SSR的原理" class="headerlink" title="SS与SSR的原理"></a>SS与SSR的原理</h4><p>SS和SSR它的原理都是一样的，就是socks5代理。socks代理只是简单的传递数据包，而不必关心是何种协议，所以socks代理比其他应用层代理要快的多。<br>socks5代理是把你的网络数据请求通过一条连接你和代理服务器之间的通道，由服务器转发到目的地，这个过程中你是没有通过一条专用通道的，只是数据包的发出，然后被代理服务器收到，整个过程并没有额外的处理。<br>通俗的说，现在你有一个代理服务器在香港，比如你现在想要访问google，你的电脑发出请求，流量通过socks5连接发到你在香港的服务器上，然后再由你在香港的服务器去访问google，再把访问结果传回你的电脑，这样就实现了FQ。</p><h4 id="SS-SSR与VPN的本质区别"><a href="#SS-SSR与VPN的本质区别" class="headerlink" title="SS/SSR与VPN的本质区别"></a>SS/SSR与VPN的本质区别</h4><p>VPN虚拟专用隧道，在企业网络和高校的网络中应用很广泛，是为了保证通信的安全性、私密性，不是专门为FQ制定的技术；<br>SS/SSR则是为了转发客户端流量，绕过防火墙的检测，从而达到FQ的真实意图，但是没有保证数据传输的安全性（至少没那么安全）。</p><h4 id="SS-SSR的另类称呼"><a href="#SS-SSR的另类称呼" class="headerlink" title="SS/SSR的另类称呼"></a>SS/SSR的另类称呼</h4><p>如同VPN一样，SS/SSR这一关键词在国内搜索会被屏蔽，因此大多数情况下人们会用“酸酸乳”来称呼它。<br>因为Shadowsocks、ShadowsocksR软件图标是纸飞机，故SS/SSR也称为“小飞机✈️”。同样地，上面讲到的“SS/SSR服务器”、“代理节点”、“节点”、“SS/SSR节点”这些概念，常被称为“飞机场”。</p><p>很显然，要想使用SS/SSR工具科学上网，关键要有一个稳定可用的代理节点，即“飞机场”。一般的话是可以找到免费的节点，当然了，这种方式没有那么稳定。</p><p> </p><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><ul><li>阿雷科技分享频道 - Youtube（<a href="http://suo.im/4BIWbF" target="_blank" rel="noopener">http://suo.im/4BIWbF</a>）</li><li>Shadowsocks - A secure socks5 proxy（<a href="https://shadowsocks.org/en/index.html" target="_blank" rel="noopener">https://shadowsocks.org/en/index.html</a>）</li><li>Shadowsocks-Github（<a href="https://github.com/shadowsocks" target="_blank" rel="noopener">https://github.com/shadowsocks</a>）</li><li>Shadowsocks 终极指南（<a href="https://s-s-r.github.io/wiki/" target="_blank" rel="noopener">https://s-s-r.github.io/wiki/</a>）</li><li>SS/ShadowsocksR Server（<a href="https://ss-ssr.com/" target="_blank" rel="noopener">https://ss-ssr.com/</a>）</li><li>Free SS/ShadowsocksR Server（<a href="https://free.ss-ssr.com/index.html" target="_blank" rel="noopener">https://free.ss-ssr.com/index.html</a>）</li><li>Free-SS-SSR Repo（<a href="https://github.com/ThinkDevelop/Free-SS-SSR" target="_blank" rel="noopener">https://github.com/ThinkDevelop/Free-SS-SSR</a>）</li><li>免费SS账号（<a href="https://www.youneed.win/free-ss" target="_blank" rel="noopener">https://www.youneed.win/free-ss</a>）</li><li>免费SSR账号（<a href="https://www.youneed.win/free-ssr" target="_blank" rel="noopener">https://www.youneed.win/free-ssr</a>）</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="分享" scheme="https://zhouie.cn/categories/%E5%88%86%E4%BA%AB/"/>
    
    
      <category term="Tool-share" scheme="https://zhouie.cn/tags/Tool-share/"/>
    
      <category term="VPN" scheme="https://zhouie.cn/tags/VPN/"/>
    
  </entry>
  
  <entry>
    <title>【升级】 联想Y430p更换SSD、增加8G内存条</title>
    <link href="https://zhouie.cn/posts/201909251/"/>
    <id>https://zhouie.cn/posts/201909251/</id>
    <published>2019-09-25T00:58:42.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>偶有卡顿、速率不高，是所有HDD（机械硬盘）用户最常经历的。在现在这个硬件设备读写高速、价格低廉的时候，SSD（固态硬盘）已不是早年间那种昂贵的物件了，市场上可供选择的也很多。</p><p>这是早年间一张固态硬盘与机械硬盘对比图。供参考。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdnimg.cn/20190925000032532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phdmVfZg==,size_16,color_FFFFFF,t_70" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p>这是为了防止我继续说废话的一条分割线。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdnimg.cn/20190924125812380.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phdmVfZg==,size_16,color_FFFFFF,t_70" alt="这就是我的Y430p" title>                </div>                <div class="image-caption">这就是我的Y430p</div>            </figure><br>上面这个是Y430p拆下E壳后拍的一张图片。其中，能和运行内存、硬盘这两个物件扯上关系的位置就在图中所标注的这几个地方了——</p><p>首先是原装光驱位置。之所以说它能和硬盘扯上关系，是因为光驱是可以拆下的，然后用硬盘设备替代它以实现扩容。注意，这个地方的接口是基于SATA2协议，所以这里推荐上机械硬盘（上固态硬盘会损失性能），其实就可以买个光驱位硬盘盒，把你原装主硬盘位的那1T的机械硬盘拆装到这里来。</p><p>其次是原装主硬盘位置。这里推荐拿掉主硬盘位的那1T的机械硬盘，换上一块固态硬盘安装在这里，注意，这个地方的接口是基于SATA3协议。</p><p>然后就是那个空置的mSATA接口位置（图片中最右边）。可以购置一块mSATA接口的固态硬盘安装在这里，因为Y430P内部预留了一个空置的mSATA接口，方便用户升级。在网上看到一些地方说，这个地方的接口是NGFF接口。其实我并不是很懂，暂且这样认为吧——Y430p内部预留了一个空置的mSATA接口，同时兼容NGFF。</p><p>至于mSATA接口与NGFF的区别——</p><blockquote><p>mSATA接口是迷你版本SATA接口，这种类型的固态硬盘尺寸小巧，单面厚度仅为4.85mm，不会占用太多笔记本内部空间。mSATA接口的固态硬盘在速度上并不逊色，理论上mSATA将提供跟SATA接口一样的速度和可靠度。由于体积小巧等优势，已被越来越多的笔记本所使用。</p><hr><p>NGFF接口是Intel为超极本量身定做的新一代固态硬盘接口标准，其常规尺寸仅为42mm x 22mm，单面布置NAND Flash颗粒的厚度为2.75mm，双面颗粒的厚度是3.85mm，对mSATA来说体积进一步减小，非常适合轻薄的超极本产品。速度方面，采用PCI-Express x2传输标准的NGFF接口的固态硬盘，最大读取速度可达到700MB/s，写入为550MB/s，4K随机读写IOPS分别可达到100K及90K，相比mSATA来说，传输速度会更快。</p></blockquote><p>最后就是中间那个内存条的区域。Y430P预留两个内存位，分别最大支持8G。至于你扩展内存是买4G还是8G的，看你的个人意愿吧，都行。另外呢，买这个内存条的时候，是不是一定要和原装内存条保持一样才好呢，实际上我不这么觉得，因为内存条这类产品，只要你关键参数没挑错，哪家的品牌应该也没多大影响吧。</p><blockquote><p>还有一个细节，我想在这里提一下。当时我买的时候，没有拆下E壳。但后来装内存条的时候，看到待装的那个内存条边缘位置有类似这么一些信息——“DDR3L 1400”，而原装已安装好内存条位置那里的信息类似是“DDR3L 1600”，可恨当时忘了拍照！！</p></blockquote><p>所以说，其实联想在设计这个预留位置时，推荐的是“DDR3L 1400”参数的内存条，并不是两个位置的内存条都是一样的参数。</p><hr><p>上面说的都是前期你需要准备去认识和来了解的基础知识，至于买哪个，我才装好没几天，也没啥好推荐的。能用、耐用、稳定就行。多看看一些评价。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdnimg.cn/20190925001958342.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phdmVfZg==,size_16,color_FFFFFF,t_70" alt title>                </div>                <div class="image-caption"></div>            </figure><p>最开始我是打算，不动光驱位置，在预留的mSTATA接口位置增加一块创见256G的SSD（m.2接口），然后将系统迁移到这个固态硬盘上来，还有就是增加一块金士顿8G的骇客神条内存（DDR3L 1600）。</p><p>但是，突然因为后续工作方面的原因，我不可以在工作PC上安装两块以上（含两块）硬盘，所以只能退货重新买了这块三星EVO 500G的SSD（SATA3接口），安装在原装主硬盘位置。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdnimg.cn/20190925002131753.png" alt title>                </div>                <div class="image-caption"></div>            </figure><br>至于怎么装硬盘、内存条，过程就很简单了。值得注意的是，插那个内存条的时候，大家要方法正确，千万别插个一半进去，然后一检查发现没有增加这8G内存条还以为这块内存条是坏的。具体还不懂的话，问问jd客服或者度娘就好了。</p><p>这是我增加内存条、更换SSD之前用鲁大师这个软件检测的数据信息（鲁大师也就这一个用处了）——</p><blockquote><pre><code>电脑型号    联想 Lenovo Y430P 20435 笔记本电脑  (扫描时间：2019年09月20日)</code></pre><p>操作系统    Windows 10 专业版 64位 ( DirectX 12 )</p><pre><code>处理器    英特尔 第四代酷睿 i7-4710MQ @ 2.50GHz 四核</code></pre><p>主板    联想 BIQY0 ( Lynx Point )<br>内存    8 GB ( 镁光 DDR3L 1600MHz )<br>主硬盘    希捷 ST1000LM024 HN-M101MBB ( 1 TB )<br>显卡    Nvidia GeForce GTX 850M ( 2 GB )<br>显示器    友达 AUO143D ( 14 英寸  )<br>光驱    PLDS DVD-RW DU8A5SH DVD刻录机<br>声卡    瑞昱  @ 英特尔 Lynx Point  高保真音频<br>网卡    鈺硕 QCA8171 Gigabit Ethernet / 联想</p></blockquote><p>装完之后，再检测一下——</p><blockquote><p>电脑型号    联想 Lenovo Y430P 20435 笔记本电脑  (扫描时间：2019年09月24日)<br>操作系统    Windows 10 专业版 64位 ( DirectX 12 )</p><p>处理器    英特尔 第四代酷睿 i7-4710MQ @ 2.50GHz 四核<br>主板    联想 BIQY0 ( Lynx Point )<br>内存    16 GB ( 金士顿 DDR3L 1600MHz / 镁光 DDR3L 1600MHz )<br>主硬盘    三星 SSD 860 EVO 500GB ( 500 GB / 固态硬盘 )<br>显卡    Nvidia GeForce GTX 850M ( 2 GB )<br>显示器    友达 AUO143D ( 14 英寸  )<br>光驱    PLDS DVD-RW DU8A5SH DVD刻录机<br>声卡    瑞昱  @ 英特尔 Lynx Point  高保真音频<br>网卡    鈺硕 QCA8171 Gigabit Ethernet / 联想</p></blockquote><p>补充一个SSD 固态硬盘测试工具（AS SSD Benchmark 2.0.6821）的检测结果——<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdnimg.cn/20190925005636449.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phdmVfZg==,size_16,color_FFFFFF,t_70" alt title>                </div>                <div class="image-caption"></div>            </figure></p><p>这里有一个过程，我给忽略掉了。那就是装好新的硬件后，怎么重新在空白的SSD硬盘上安装操作系统。至于内存条，这个很简单，装上之后就会被检测到。</p><p>安装操作系统的过程:<br>随便制作一个U盘系统启动工具（如大白菜啥的），用这里面的GHost软件分配好系统盘以及其他逻辑盘，多看看网上的就行。<br>然后就可以使用某种方式来安装操作系统到系统盘了(因为这个方式太多了，这里不多赘述了)。</p><p>Ummmm，以上就是这次的升级体验了。</p><hr><p>推荐几个与硬件检测相关的PC软件——</p><ul><li>链接：<a href="https://pan.baidu.com/s/19YliUIkq7t76PzfkBL2Tbg" target="_blank" rel="noopener">https://pan.baidu.com/s/19YliUIkq7t76PzfkBL2Tbg</a><br>提取码：wito<br>如链接失效，欢迎邮件nanzhouieATqq.com寻求帮助。</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://img-blog.csdnimg.cn/20190925005121351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2phdmVfZg==,size_16,color_FFFFFF,t_70" alt title>                </div>                <div class="image-caption"></div>            </figure><p>在这个过程中，我有阅读的几篇参考文章——</p><ul><li><a href="https://post.m.smzdm.com/p/a3gz2qpn/" target="_blank" rel="noopener">Y430P拆机：安装固态硬盘+内存+重装系统梳理</a></li><li><a href="https://jingyan.baidu.com/article/046a7b3e8cf80af9c37fa97f.html" target="_blank" rel="noopener">联想y430p固态硬盘安装教程</a></li><li><a href="https://blog.csdn.net/aurorayqz/article/details/54929188" target="_blank" rel="noopener">联想笔记本y430p加固态硬盘/ssd(M.2)</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="升级" scheme="https://zhouie.cn/categories/%E5%8D%87%E7%BA%A7/"/>
    
    
      <category term="联想Y430p" scheme="https://zhouie.cn/tags/%E8%81%94%E6%83%B3Y430p/"/>
    
      <category term="拆机" scheme="https://zhouie.cn/tags/%E6%8B%86%E6%9C%BA/"/>
    
      <category term="SSD/HDD" scheme="https://zhouie.cn/tags/SSD-HDD/"/>
    
      <category term="内存条" scheme="https://zhouie.cn/tags/%E5%86%85%E5%AD%98%E6%9D%A1/"/>
    
  </entry>
  
  <entry>
    <title>【核心网CN】 3GPP系统演进学习相关名词</title>
    <link href="https://zhouie.cn/posts/201908142/"/>
    <id>https://zhouie.cn/posts/201908142/</id>
    <published>2019-08-14T17:25:35.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>今年是2019年，5G服务时代眼看就要在全球铺展开来。这段时间学习了一些通信方面的知识，这里首先梳理下各代移动通信网络中出现的各种特有名词。</p><h3 id="什么是3GPP"><a href="#什么是3GPP" class="headerlink" title="什么是3GPP"></a>什么是3GPP</h3><p>第三代合作伙伴计划3GPP（3rd Generation Partnership Project）是一个成立于1998年12月的标准化机构。该组织囊括了来自世界所有地区的标准化组织，当前其成员包括欧洲的ETSI、日本的ARIB和TTC、中国的CCSA、韩国的TTA、北美洲的ATIS和印度的电信标准开发协会。</p><p>这个组织机构的出现，最初是为了在国际电信联盟的IMT-2000计划范围内制订和实现全球性的（第三代）移动电话系统规范（也就是3G）。因为，在1998年末3GPP组织成立之前，3G的标准化工作一直在各个地区标准化组织之间并行进行。 </p><h3 id="名词翻译与大致发展"><a href="#名词翻译与大致发展" class="headerlink" title="名词翻译与大致发展"></a>名词翻译与大致发展</h3><h4 id="第二代（2G）移动电话系统"><a href="#第二代（2G）移动电话系统" class="headerlink" title="第二代（2G）移动电话系统"></a>第二代（2G）移动电话系统</h4><ul><li>GSM（Global System for Mobile Communications）：全球移动通讯系统。它经常被描述成“2G”。</li><li>GPRS（General Packet Radio Service）：通用分组无线服务。它经常被描述成“2.5G”。</li><li>EDGE（Enhanced Data rates for GSM Evolution）：GSM增强数据率演进。作为2G和2.5G（GPRS）的延伸，有时会称为2.75G。</li><li>GERAN （GSM EDGE Radio Access Network）：GSM／EDGE 无线通讯网络。是GSM/EDGE的无线接入部分（GPRS的空中接口）。</li></ul><h4 id="第三代（3G）移动电话系统"><a href="#第三代（3G）移动电话系统" class="headerlink" title="第三代（3G）移动电话系统"></a>第三代（3G）移动电话系统</h4><ul><li><p>UMTS（Universal Mobile Telecommunications System）：通用移动通讯系统。有时也叫3GSM，强调结合了3G技术而且是GSM标准的后续标准。MTS分组交换系统是由GPRS系统所演进而来，故系统的架构颇为相像。</p></li><li><p>UTRAN（UMTS Terrestrial Radio Access Network）：UMTS的陆地无线接入网（UMTS的空中接口）。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTAzZWVmN2M1MmMwMzgyM2QucG5n" alt="UTRAN 架构" title>                </div>                <div class="image-caption">UTRAN 架构</div>            </figure></li></ul><ul><li><p>HSDPA（High Speed Downlink Packet Access）：高速下行分组接入。又称为3.5G，属于W-CDMA技术的延伸。</p></li><li><p>LTE（Long Term Evolution）：长期演进技术。是电信中用于手机及数据终端的高速无线通讯标准，为高速下行分组接入（HSDPA）过渡到4G的版本，俗称为3.9G。</p></li><li><p>E-UTRAN（Evolved Universal Terrestrial Radio Access Network)：演进的通用陆面无线接入网络。属于3GPP LTE 的空中界面。与 HSPA 不同的是，LTE 的 E-UTRA 系一全新的系统，绝不相容于W-CDMA。它提供了更高的传输速率，低延迟和最佳化数据包的能力，用OFDMA无线接入给下行连接，SC-FDMA给上行连接。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWEwMTA1ZDY3MGQyODVmNzgucG5n" alt="作为LTE和SAE网络一部分的EUTRAN架构" title>                </div>                <div class="image-caption">作为LTE和SAE网络一部分的EUTRAN架构</div>            </figure></li></ul><blockquote><p>注意：这里有一个准确的说法，<strong>国际上来看，长期演进技术LTE实际上不能称为真正的4G</strong>，因为它没有匹配国际电信联盟无线电通信部门要求的4G标准；LTE-A才匹配国际电信联盟无线电通信部门要求的4G标准。<br>但在国内，人们已经普遍将LTE认为是4G的代名词，这也没什么好纠结的，知道这个点就行。当然了，基于这样的认知，长期演进技术（LTE）的提升版本LTE-A在中国大陆称4G+。</p></blockquote><h4 id="第四代（4G）移动电话系统"><a href="#第四代（4G）移动电话系统" class="headerlink" title="第四代（4G）移动电话系统"></a>第四代（4G）移动电话系统</h4><ul><li>LTE-A（LTE-Advanced）：高级长期演进技术，在中国大陆称4G+，是长期演进技术（LTE）的提升版本，也是4G规范的国际高速无线通信标准。</li><li>SAE（System Architecture Evolution）：系统架构演进。是3GPP对于LTE无线通信标准的核心网络架构的升级计划。SAE体系结构的主要组成部分是核心分组网演进（EPC，Evolved Packet Core )，也被称为SAE核心。</li></ul><h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><h4 id="LTE与SAE的关系"><a href="#LTE与SAE的关系" class="headerlink" title="LTE与SAE的关系"></a>LTE与SAE的关系</h4><p>移动数据网络（PS）网络部分最早的资料都冠以SAE名头。SAE 全称是系统架构演进（System Architecture Evolution），是PS网络核心网网络架构向4G演进的工作项目。<br>与SAE对应的概念是LTE。LTE全称是无线接口长期演进（Long Term Evolution，LTE），是无线接口部分向4G演进的工作项目。<br>SAE和LTE都是工作项目（Work Item）的名字，是3GPP为达成某种目标，聚集了一群人，在某个时间开展的一项工作。所以，SAE和LTE是一群人从事的一个工作、一项事业。 而SAE和LTE所研究的对象，分别被称为EPC和E-UTRAN。这两个才构成我们看到的网络。 </p><ul><li>E-UTRAN：演进的UMTS陆地无线接入网（Evolved Universal Terrestrial Radio Access Network）是3GPP 4G空中接口部分。 </li><li>EPC：演进分组核心网（Evolved Packet Core），即 4G核心网。 </li></ul><p>EPC和E-UTRAN共同构成了EPS（演进的分组系统）。EPS代表了整个端到端的4G网络。 由于业界在宣传4G网络时（特别是终端在宣传支持4G时）往往以LTE来表述，造成LTE在今天成了4G整个网络的代名词。 </p><blockquote><p>总结一下，就是：我们将LTE代表4G网络，E-UTRAN代表4G网络无线接入部分，EPC代表4G网络核心网部分。</p></blockquote><h4 id="非3GPP系统举例"><a href="#非3GPP系统举例" class="headerlink" title="非3GPP系统举例"></a>非3GPP系统举例</h4><ul><li>WiMAX（Worldwide Interoperability for Microwave Access）：全球互通微波访问。是一项高速无线数据网络标准，主要用在城域网，由WiMAX论坛提出并于2001年6月成形。在概念上类似WiFi，WiMAX传送速率更快，传送范围距离更大，简单理解为一种“大WiFi”。</li><li>CDMA2000：也是一个3G移动通讯标准，但CDMA2000与另一个3G标准UMTS不兼容。</li><li>WIFI：在中文里又称作“无线热点”，是Wi-Fi联盟制造商的商标做为产品的品牌认证，是一个创建于IEEE 802.11标准的无线局域网技术。</li></ul><h4 id="不足与改进体现在哪"><a href="#不足与改进体现在哪" class="headerlink" title="不足与改进体现在哪"></a>不足与改进体现在哪</h4><p>传统3GPP网络的不足：</p><ul><li>分组域网络业务支撑能力较弱，基本只能支持非实时性业务，语音业务依赖于电路域（CS）进行承载，造成分组域（PS）和电路域需要分网络运营，不利于网络的统一维护和管理，增加了运维成本。</li><li>现有网络由于网络层次较多，数据路由转发效率较低，网络性能需要进一步优化。</li><li>目前业务终端的处理能力及无线接入能力在不断增加，多种无线接入技术融合成为可能，促使网络支持多种无线接入系统。</li></ul><p>LTE/EPC的研究目标是确定3GPP的长期演进计划，探索未来10年的关键技术。按照3GPP标准演进的构想，LTE/EPC的关键特性如下：</p><ul><li>网络架构全面分组化：整个网络全部接口除空口部分外的其他部分<br>已经全部IP化、分组化，电路域不再被定义，只有分组域，语音业务可以由分组域配合IMS(IP Multimedia Subsystem)域等方式提供，以提升网络效率和性能。</li><li><p>网络架构扁平化：网络结构趋于简单，简化了网络部署，同时大大缩短了时延。如：无线接入部分从3G时代的RNC+NodeB演进为一个eNodeB节点。网络部分的用户面只经过SAE-GW一个节点。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTIwYTgwN2ZlNzY1MTQ1MjYucG5n" alt="简单的3G架构" title>                </div>                <div class="image-caption">简单的3G架构</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTY3YTZlZWY1OTE1YzA0NjkucG5n" alt="LTE/EPC融合了GERAN和UTRAN的互操作" title>                </div>                <div class="image-caption">LTE/EPC融合了GERAN和UTRAN的互操作</div>            </figure></li><li><p>支持多接入技术：支持与现有3GPP系统的互通，同时支持非3GPP网络的接入，支持用户在3GPP及非3GPP网络间的漫游和切换。</p></li><li>高速率：峰值速率可以达到下行100Mbit/s，上行50Mbit/s。</li><li>部署快：由于网络的简单化，可以快速部署网络，以适应业务不断丰富化发展的趋势。</li><li>实时业务增强：增加对实时业务的支持，简化业务连接建立的时延。</li></ul><h3 id="再补充一些"><a href="#再补充一些" class="headerlink" title="再补充一些"></a>再补充一些</h3><h4 id="3GPP2"><a href="#3GPP2" class="headerlink" title="3GPP2"></a>3GPP2</h4><p>第三代合作伙伴计划2（3rd Generation Partnership Project 2）创建于1998年12月，成员包括：通信工业协会（北美）、中国通信标准化协会（中国）、电波产业会（日本）和TTA（韩国）。<br>3GPP2声称其致力于使国际电信联盟的IMT-2000计划中的（3G）移动电话系统规范在全球的发展，实际上它是从2G的cdmaOne（IS-95）发展而来3G的CDMA2000（IS-2000）标准体系的标准化机构，它受到拥有多项CDMA关键技术专利的高通公司的较多支持。<br>与之对应的第三代合作伙伴计划3GPP致力于从GSM向W-CDMA（UMTS）过渡，因此两个机构存在一定竞争。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTNhMWRhNGNjNmUzOGY3NWMucG5n" alt="移动通讯标准发展-ing" title>                </div>                <div class="image-caption">移动通讯标准发展-ing</div>            </figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="核心网CN" scheme="https://zhouie.cn/categories/%E6%A0%B8%E5%BF%83%E7%BD%91CN/"/>
    
    
      <category term="3GPP" scheme="https://zhouie.cn/tags/3GPP/"/>
    
      <category term="3GPP2" scheme="https://zhouie.cn/tags/3GPP2/"/>
    
      <category term="GSM/GPRS/EDGE/GERAN" scheme="https://zhouie.cn/tags/GSM-GPRS-EDGE-GERAN/"/>
    
      <category term="UMTS/UTRAN" scheme="https://zhouie.cn/tags/UMTS-UTRAN/"/>
    
      <category term="LTE/E-UTRAN" scheme="https://zhouie.cn/tags/LTE-E-UTRAN/"/>
    
      <category term="LTE-A/SAE" scheme="https://zhouie.cn/tags/LTE-A-SAE/"/>
    
      <category term="非3GPP" scheme="https://zhouie.cn/tags/%E9%9D%9E3GPP/"/>
    
      <category term="CDMA2000" scheme="https://zhouie.cn/tags/CDMA2000/"/>
    
  </entry>
  
  <entry>
    <title>【核心网CN】 IMSI、TMSI、P-TMSI、GUTI、S-TMSI、MSISDN、MSRN、IMEI等这些移动用户标识的辨析</title>
    <link href="https://zhouie.cn/posts/201908141/"/>
    <id>https://zhouie.cn/posts/201908141/</id>
    <published>2019-08-14T17:21:33.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>3G下，接入网同时连接电路域CS（走语音的）和分组域PS（走得是IP，用于手机上网），即核心网分割为CS、PS，打电话信号走CS，数据业务信号走PS，而在LTE/EPC下，取消了CS域。</p><ul><li>电路域使用TMSI和位置区标识LAI来表示用户，TMSI由VLR（拜访位置寄存器，Visitor Location Register）分配；</li><li>分组域使用P-TMSI和路由域标识RAI来表示用户，P-TMSI由SGSN分配。</li></ul><p>其中，临时身份TMSI/P-TMSI只有在用户登记的位置区LA和路由区RA中才有意义。所以，它应该与LAI或RAI一起使用。IMSI和TMSI的关联保存在用户登记的拜访位置寄存器VLR/SGSN中。</p><h3 id="IMSI"><a href="#IMSI" class="headerlink" title="IMSI"></a>IMSI</h3><ul><li><p>International Mobile Subscriber Identification Number，即国际移动用户识别码。</p></li><li><p>国际上为唯一识别一个移动用户所分配的号码。此码在所有位置，包括在漫<br>游区都是有效的。</p></li><li><p>结构组成：IMSI=MCC+MNC+ MSIN，其中：<br>MCC（ Mobile Country Code）指移动国家代码 ，三个数字，如中国为460；<br>MNC（Mobile Network Code）指移动网络代码，两个数字，如中国邮电的MNC为00；<br>MSIN（Mobile Subscriber Identification Number ）指移动用户标识，在某一PLMN内MS唯一的识别码。编码格式为：H1 H2 H3 S XXXXXX（不超过10位），不同运营商有不同的与MSISDN间的对应关系。</p></li><li><p>采取E.212编码格式。</p></li><li><p>典型的IMSI举例：460-00-4777 770001</p></li></ul><h3 id="TMSI"><a href="#TMSI" class="headerlink" title="TMSI"></a>TMSI</h3><ul><li><p>Temporary Mobile Subscriber Identity，即（电路域）用户临时标识符。</p></li><li><p>为了加强系统的保密性而<strong>在 VLR 内分配的临时用户识别</strong>，在某一 VLR 区域内与 IMSI 唯一对应。</p></li><li><p>由4个十进制数表示，使用BCD编码。注意： TMSI不可能设置全32位均为1（这是由于TMSI必须存储在SIM里，SIM用4个十进制全为1来标识没有可用的TMSI)。</p></li><li><p>当MS在位置区LA第一次注册时，就会将一个 TMSI 分配给MS，当MS离开该位置区LA时将释放该 TMSI 。当 MS 每次改变位置区LA时，执行 TMSI 再分配程序。 </p></li></ul><h3 id="P-TMSI"><a href="#P-TMSI" class="headerlink" title="P-TMSI"></a>P-TMSI</h3><ul><li><p>（分组域）用户临时标识符</p></li><li><p>为了加强系统的保密性而<strong>在SGSN内分配的临时用户识别</strong>，在某一SGSN区域内与IMSI唯一对应。</p></li><li><p>P-TMSI由3个十进制数组成。注意： 不会配置P-TMSI全24位都为1（这是由于P-TMSI有效位必须存储在SIM里，SIM用3个十进制数均设置为1，表示没有有效的P-TMSI值）。</p></li></ul><h3 id="GUTI"><a href="#GUTI" class="headerlink" title="GUTI"></a>GUTI</h3><ul><li><p><strong>在 MME 内分配的临时用户识别</strong>。</p></li><li><p>用于EPS系统中在不暴露UE永久性标识的同时为UE提供一个明确的身份标识。在网络与UE进行信令交互时，网络与UE可以使用它建立用户标识。</p></li><li><p>在MME所控制的域内，用户使用M-TMSI进行标识。</p></li><li><p>结构组成：GUTI = GUMMEI+M-TMSI，其中：<br><gummei> = <mcc><mnc><mme identifier><br><mme identifier> = <mme group id><mme code></mme></mme></mme></mme></mnc></mcc></gummei></p></li><li><p>MCC和MNC的格式及长度如前所述，M-TMSI长度为32bit，MME Group ID长度为16bit，MME Code长度为8bit。</p></li></ul><h3 id="S-TMSI"><a href="#S-TMSI" class="headerlink" title="S-TMSI"></a>S-TMSI</h3><ul><li><p>S-TMSI是<strong>GUTI的一种缩短格式</strong>，以保证能够对无线信令进行更有效的处理（如寻呼及服务请求）。S-TMSI由MMEC和M-TMSI组成，<strong>用于对用户进行寻呼</strong>。</p></li><li><p>结构组成：S-TMSI&gt; = MMEC+M-TMSI，其中：M-TMSI长度为32bit，MMEC长度为8bit。</p></li><li><p>M-TMSI由MME分配，在任一MME中不可重复。</p></li></ul><h3 id="MSISDN"><a href="#MSISDN" class="headerlink" title="MSISDN"></a>MSISDN</h3><ul><li><p>Mobile Subscriber International ISDN/PSTN number，即国际移动设备身份码，它是<strong>主叫用户为呼叫移动通信网中用户所需拨号的号码</strong>。</p></li><li><p>结构组成：MSISDN=CC+NDC+SN，也可以表示为：CC+ N1N2N3 + H0H1H2H3 ＋ ABCD，其中：<br>CC：Country Code，国家码（CC），如中国的国家码为86。<br>NDC：National Destination Code，表示国内目的码（N1N2N3 + H0H1H2H3）。<br>SN：Subscriber Number，客户号码（ABCD）。</p></li><li><p>国内目的码（NDC）包括：移动接入码（MAC，Mobile Access Code）N1N2N3 和 HLR识别号H1H2H3H4，移动接入码（MAC）用于识别网络，我们目前采用：139、138……。HLR识别号表示用户归属的HLR，也表示移动业务本地网号。</p></li><li><p>若在以上号码中将国家码CC去除，就成了MS的国内身份号码，也就是我们日常所说的<strong>“手机号码”</strong>。</p></li><li><p>采取E.164编码格式（设备GT码）。</p></li><li><p>存储在HLR（归属位置寄存器，Home Location Register）和VLR中，在MAP接口上传送。</p></li><li><p>典型的MSISDN举例：86 152 7111 6868</p></li></ul><h3 id="MSRN"><a href="#MSRN" class="headerlink" title="MSRN"></a>MSRN</h3><ul><li><p>Mobile Station Roaming Number，即漫游号码。</p></li><li><p>在移动被叫过程中，由所在业务区的MSC/VLR临时分配，用于寻址VMSC.当移动台漫游到另一个移动交换中心(MSC)业务区时，该移动交换中心将分 配给移动台一个临时漫游号码，用于路由选择。</p></li><li><p>当移动台离开该区后，被访位置寄存器(VLR)和原归属位置寄存器(HLR)都将这个临时漫游号码删除，以便再分配给其他移动台使用在HLR中每一个SIM卡有唯一识别码IMSI，每个IMSI对应一个MSISDN，你拨对方号码的时候在MSC中会自动把MSISDN转换成对应的 IMSI再来处理；</p></li><li><p>MSRN是在主叫和被叫在不同的MSC下时，MSC之间建立连接的一个漫游号码，作为身份识别。</p></li><li><p>结构组成：CC + NDC + SN，在此情况下，SN是MSC交换机的地址。</p></li><li><p><strong>MSC是如何通过MSRN寻找到被叫用户并建立通话的呢？</strong> <figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWY0ZGI5ZjczY2U1YTUyMGMucG5n" alt="图源百度百科" title>                </div>                <div class="image-caption">图源百度百科</div>            </figure>当每次呼叫发生时，主叫侧MSC会向被叫归属的HLR（Home Location Register，归属位置寄存器）请求路由信息。HLR知道被叫用户处在哪一个MSC/VLR服务区内。为了向主叫侧的MSC提供一个本次路由的信息，HLR请求被叫用户当前所处的MSC/VLR分配一个MSRN给被叫用户，并将此号码传递给HLR。HLR再将此号码转发给主叫侧MSC。此时主叫侧MSC就能根据MSRN将主叫用户的呼叫接续至被叫用户所在的MSC/VLR了。</p></li></ul><h3 id="IMEI"><a href="#IMEI" class="headerlink" title="IMEI"></a>IMEI</h3><ul><li><p>International Mobile Equipment Identity，即国际移动设备身份码。</p></li><li><p>结构组成：<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTU4MWEwYzIzNWRmOTdjZGEucG5n" alt title>                </div>                <div class="image-caption"></div>            </figure></p></li><li><p>其中：TAC ： Type Approval Code , 型号批准码，由欧洲型号批准中心分配。<br>FAC ： Final Assembly Code , 最后装配码，表示生产厂家或最后装配所在地，由厂家进行编码。<br>SNR ： Serial Number , 这 个数字的独立序号码唯一地识别每个 TAC 和 FAC 的每个移动设备。<br>spare ：备用比特，当手机发送时，此位要置 0 。 </p></li><li><p>典型的IMEI举例：490547 40 376733 5</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="核心网CN" scheme="https://zhouie.cn/categories/%E6%A0%B8%E5%BF%83%E7%BD%91CN/"/>
    
    
      <category term="IMSI" scheme="https://zhouie.cn/tags/IMSI/"/>
    
      <category term="TMSI" scheme="https://zhouie.cn/tags/TMSI/"/>
    
      <category term="P-TMSI" scheme="https://zhouie.cn/tags/P-TMSI/"/>
    
      <category term="GUTI" scheme="https://zhouie.cn/tags/GUTI/"/>
    
      <category term="S-TMSI" scheme="https://zhouie.cn/tags/S-TMSI/"/>
    
      <category term="MSISDN" scheme="https://zhouie.cn/tags/MSISDN/"/>
    
      <category term="MSRN" scheme="https://zhouie.cn/tags/MSRN/"/>
    
      <category term="IMEI" scheme="https://zhouie.cn/tags/IMEI/"/>
    
  </entry>
  
  <entry>
    <title>【维修】 生活终于对我的联想Y430P下手了</title>
    <link href="https://zhouie.cn/posts/201908121/"/>
    <id>https://zhouie.cn/posts/201908121/</id>
    <published>2019-08-12T17:05:38.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><ul><li>如果你是个职业维修人员，请忽略本文！</li><li>如果你使用的是超薄本，请忽略本文！</li><li>如果你的电脑正常，请忽略本文！</li></ul><h3 id="下手前"><a href="#下手前" class="headerlink" title="下手前"></a>下手前</h3><p>最近干了一件“大事”，那就是我给自己的这台联想Y430p电脑<strong>拆了机换了壳（A壳、C壳以及D壳）</strong>，也参照网上的教程<strong>对屏轴有所加固</strong>！</p><p>没有坏的话，傻子才会去动原装的这些组件。先说明一点情况（<strong>病史</strong>）：</p><ul><li>2015年8月份高考结束后，入手的这台电脑；</li><li>2017年寒假的某一天，电脑有不小心从1米左右高度被摔过，导致它的A壳、C壳以及金属散热片有损坏；</li><li>2018年的某一天，电脑D壳以及左侧屏轴出现严重损坏，说白了，就是屏轴顶坏了D壳边缘区域，所以屏幕不牢靠会晃动了，在关开屏幕的时候总是特别留意左侧屏轴，小心翼翼；</li><li>期间，我也有几次拆下E壳看看这能怎么维修，试过胶水、打火机熔合等不可行（不治本）的方法；</li><li>2019年7月末的一天，像以往一样小心打开屏幕，一声轻微的“咳呲”还是被我捕捉到了，下一秒就是电脑不断往复出现系统恢复引导界面，很是吓人。工具也不在身边，只好找了家维修店拆机，过程就不说了，结果就是我们发现问题是因为左侧屏轴顶到了一个硬件单元（系统恢复引导块），于是果断地把这个并没有太大实际作用的硬件单元给拆了。</li><li>“拖延癌晚期”的我终于也意识到了该修一下这台电脑了，不然小问题很可能真的就要成为大问题了。</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWI1ZTM4MmNkYTdhY2ZjOWMucG5n" alt="损坏的A壳、C壳、D壳、金属散热片以及左侧屏轴" title>                </div>                <div class="image-caption">损坏的A壳、C壳、D壳、金属散热片以及左侧屏轴</div>            </figure><p>在开始维修之前，先看一下A、B、C、D、E壳分别指代什么——</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWY1ZTlkMjI2MDg2ZWQ2OWUuanBn" alt="A、B、C、D、E壳" title>                </div>                <div class="image-caption">A、B、C、D、E壳</div>            </figure><p>当然了，肯定也是需要买一些新配件和工具的——</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWYyOWM3ODdiYWYxMThkMGYucG5n" alt="A、C、D壳" title>                </div>                <div class="image-caption">A、C、D壳</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTJjOWZmOGNlZWJjZWNmMDEucG5n" alt="加固屏轴需要的螺丝螺帽等" title>                </div>                <div class="image-caption">加固屏轴需要的螺丝螺帽等</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWVkZWE4ZmZlOGNlYmQzOGYucG5n" alt="加固屏轴需要的手捻钻（含钻头）" title>                </div>                <div class="image-caption">加固屏轴需要的手捻钻（含钻头）</div>            </figure><blockquote><p>注意：</p><ul><li>我给出购物界面截图纯粹为了省事，给大家一个实物参考。比如卖螺丝那家店就不是很推荐大家去，螺帽和螺丝就很不严丝缝合。</li><li>大家买C壳的时候一定要和客服沟通清楚，（一般来说，市面上的C壳配件有<strong>塑料材质</strong>和<strong>金属拉丝材质</strong>两种，后者价格自然会贵些），建议购买原装的（金属拉丝材质），而A、D壳每家店基本上也差不多；</li><li><strong>如果A壳问题不大，不建议更换</strong>（其实像我这种就不需要更换），因为拆换A壳需要拆完E、C、D、B壳之后才能进行，过程麻烦就不说了，重新进行屏幕内部四周的走线是更麻烦的。</li></ul></blockquote><h3 id="下手中"><a href="#下手中" class="headerlink" title="下手中"></a>下手中</h3><p>说了这么多，下面就开始维修了——</p><p>之前没有经验，当然需要先看一下这个 <strong><a href="https://v.youku.com/v_show/id_XNDAxNjQ4NDE0OA==.html?spm=a2h3j.8428770.3416059.1" target="_blank" rel="noopener">联想Y430p的拆机视频</a></strong> 以及 <strong><a href="http://v.youku.com/v_show/id_XMzkwNDc4Mjc5Ng==.html?spm=a2h3j.8428770.3416059.1" target="_blank" rel="noopener">联想Y430p的C壳触摸板拆装视频</a></strong>！</p><blockquote><p>以防视频失效，贴一下百度云链接吧：<br><a href="https://pan.baidu.com/s/1p2P6isnIDNp_QBebX1LT7w" target="_blank" rel="noopener">https://pan.baidu.com/s/1p2P6isnIDNp_QBebX1LT7w</a><br>提取码：<code>6ylw</code></p></blockquote><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTNhYmQxMGU3NDZlYzVhZGYuanBn" alt="还可以参考这个从某宝商家截来的安装教程" title>                </div>                <div class="image-caption">还可以参考这个从某宝商家截来的安装教程</div>            </figure><p>具体来拆机，其实还是蛮顺畅的，关键是胆大心细慢慢来——</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTg4MmUwMDYwMTE0ODgyNmMucG5n" alt="拆下E壳后（维修前）" title>                </div>                <div class="image-caption">拆下E壳后（维修前）</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTdjNzU2MmRlNDI2ZTk1M2IuanBn" alt="拆下E壳、C壳后（维修前）" title>                </div>                <div class="image-caption">拆下E壳、C壳后（维修前）</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTU2YWQ2YTZlN2ExOWEzY2QucG5n" alt="拆下的这些零零件件" title>                </div>                <div class="image-caption">拆下的这些零零件件</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTI4Y2I4ZTVhNjhkNGY4MWEuanBn" alt="被替换的A、C、D壳" title>                </div>                <div class="image-caption">被替换的A、C、D壳</div>            </figure><p>本来也是打算录个视频，因为是新手操作就没这样（花了好久）。</p><p>其实换完A、C、D壳就可以结束了，但这段时间我从网上查阅到不少关于“联想Y430p这款电脑左屏轴出问题”的求助帖子什么的，不难看出——这款笔记本的设计师脑袋有坑，左屏轴的问题不是我碰到的个案，而是它与生俱来的硬伤！</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWNlNDFlNTgxYmM4OGI0ODAucG5n" alt="网上的相似案例图片" title>                </div>                <div class="image-caption">网上的相似案例图片</div>            </figure><p>所以为了给它加固一点，我找到了这样一篇帖子—— <strong><a href="https://tieba.baidu.com/f?kz=4984803365&amp;mo_device=1&amp;ssid=0&amp;from=1086k&amp;uid=0&amp;pu=usm@2,sz@320_1002,ta@iphone_2_9.0_2_12137.1&amp;bd_page_type=1&amp;baiduid=6D95253C7EB4C543F83D1018C14D34A4&amp;tj=www_normal_1_0_10_title&amp;referer=m.baidu.com" target="_blank" rel="noopener">联想430p屏轴手动打孔详尽教程</a></strong>，很感谢！（这就是为什么前面我有购买螺丝、手捻钻这些东西的原因）</p><p>大家在购买螺丝什么的时候，<strong>型号别弄错了（m2.5 x 20螺丝长度正好）</strong>！</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTljOTQxODc1YWE5ZDYzMWUucG5n" alt="手工钻孔姿势" title>                </div>                <div class="image-caption">手工钻孔姿势</div>            </figure><p>总结一下这个过程中需要留意的几个地方：</p><ul><li><strong>安装时候各个插线处要记得插到位</strong>（特别是触摸板排线，大概进去3mm，否则触摸板会不好用）；</li><li>要<strong>理清各个螺丝孔的螺丝型号</strong>是哪个，最好边拆边拍一些图片以防之后插线、上螺丝给忘记了；</li><li>遇到<strong>螺丝滑丝</strong>的情况，不要一直不停地用蛮力去较劲，可以试着换个新的螺丝刀，当然了，很多时候可能就得抛弃这个螺丝孔了；</li><li>打孔上螺丝的时候，要<strong>小心仔细</strong>，别损坏了其他硬件，否则捡了芝麻丢了西瓜可就不好了。</li></ul><h3 id="下手后"><a href="#下手后" class="headerlink" title="下手后"></a>下手后</h3><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTVmMzhlMWU4N2NiOTRlNjAuanBn" alt="A、C、D壳更换后" title>                </div>                <div class="image-caption">A、C、D壳更换后</div>            </figure><p>总的来说，这次拆机、换壳以及加固屏轴是一次特别的体验，没有我想象的那么难，但也不算简单。比如我这次，全部步骤完成后就赶紧去合上E壳上螺丝，可之后发现触摸板不可用😭，只好依次拆下E壳、C壳排查问题（插线处不够紧合），再次组装之后又发现耳机孔没用，只好再依次拆下E壳、C壳排查问题（同样是插线处不够紧合）……类似这种小毛病往往复复。</p><p>所以呢，<strong>建议大家在合盖、全上螺丝之前先开机做个测试</strong>，看哪儿有没有什么问题，提前解决。</p><h3 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h3><ul><li><a href="https://v.youku.com/v_show/id_XNDAxNjQ4NDE0OA==.html?spm=a2h3j.8428770.3416059.1" target="_blank" rel="noopener">联想Y430p的拆机视频</a></li><li><a href="http://v.youku.com/v_show/id_XMzkwNDc4Mjc5Ng==.html?spm=a2h3j.8428770.3416059.1" target="_blank" rel="noopener">联想Y430p的C壳触摸板拆装视频</a></li><li><a href="https://tieba.baidu.com/f?kz=4984803365&amp;mo_device=1&amp;ssid=0&amp;from=1086k&amp;uid=0&amp;pu=usm@2,sz@320_1002,ta@iphone_2_9.0_2_12137.1&amp;bd_page_type=1&amp;baiduid=6D95253C7EB4C543F83D1018C14D34A4&amp;tj=www_normal_1_0_10_title&amp;referer=m.baidu.com" target="_blank" rel="noopener">联想430p屏轴手动打孔详尽教程</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="维修" scheme="https://zhouie.cn/categories/%E7%BB%B4%E4%BF%AE/"/>
    
    
      <category term="联想Y430p" scheme="https://zhouie.cn/tags/%E8%81%94%E6%83%B3Y430p/"/>
    
      <category term="拆机" scheme="https://zhouie.cn/tags/%E6%8B%86%E6%9C%BA/"/>
    
      <category term="换壳" scheme="https://zhouie.cn/tags/%E6%8D%A2%E5%A3%B3/"/>
    
      <category term="加固屏轴" scheme="https://zhouie.cn/tags/%E5%8A%A0%E5%9B%BA%E5%B1%8F%E8%BD%B4/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 从二层、三层的概念展开这段时间学习的数通知识</title>
    <link href="https://zhouie.cn/posts/201907271/"/>
    <id>https://zhouie.cn/posts/201907271/</id>
    <published>2019-07-27T13:45:38.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="话题引入"><a href="#话题引入" class="headerlink" title="话题引入"></a>话题引入</h3><p>在数通学习中，不可避免的会看到“二层交换机与三层交换机”、“二层转发与三层转发”这些名词，那么这里说的“二层”、“三层”究竟意味着什么呢？</p><p>我们知道，TCP/IP网络模型共有五层，其中第二层是数据链路层，第三层是网络层，简单来看，网络层负责封装 <strong>源IP地址</strong>以及 <strong>目的IP地址</strong>，而数据链路层负责封装 <strong>源MAC地址</strong>以及 <strong>目的MAC地址</strong>。（IP地址：标识一台网络设备；MAC地址：标识一台物理设备）</p><p>很显然，从应用层往下依次封装报文，在网络层和数据链路层分别获取 <strong>源IP地址</strong> 和  <strong>源MAC地址</strong>是很容易的，那么<strong>目的IP地址</strong> 和 <strong>目的MAC地址</strong>呢？目的IP地址很容易得到（这里面涉及到DNS服务器的作用），而目的MAC地址，则需要 <strong>ARP地址解析协议</strong>的帮助。</p><blockquote><p>地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。主机发送信息时将包含目标IP地址的ARP请求广播到网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询<strong>ARP缓存</strong>以节约资源。（摘自百度百科）</p></blockquote><p>在讲二层、三层之前，我们得先理解一下<strong>局域网LAN</strong>、<strong>广域网WAN</strong>、<strong>VLAN虚拟局域网</strong>这些概念。</p><blockquote><p>局域网（Local Area Network，LAN）是指在某一区域内由多台计算机互联成的计算机组。广域网（Wide Area Network，WAN），一般又称外网、公网。是连接不同地区局域网或城域网计算机通信的远程网。（同样摘自百度百科，emm真香！）</p></blockquote><p>也许你会在心里弱弱地想，为啥咱要弄这个局域网的概念？那么不妨逆向思维一下，在没有局域网这个概念的世界里，也就是全网任意两个网络设备都是直接互通的（Emmm…光想想就很可怕..），有一个广州的靓仔小Z想要去访问<code>www.huawei.com</code>，如果华为的服务器部署在北京，你的应用层数据经过传输层、网络层（也假设有台DNS服务器恰好成功解析了域名）封装后，在前往数据链路层封装时，会发送ARP广播消息向“全网”寻求位于北京的那台华为服务器的MAC地址。请注意，这里是广播，还只是靓仔小Z一个人的行为，在中国这么多网民、这么多网络设备，同一时刻会出现那么多上网行为，就算网络传输速率再快，同时出现如此数量的广播行为，COOL！200%会出现广播风暴！！！</p><p>从上面这段假（fei）想（hua）可以看出，局域网的其中一个作用便是分割出多个广播域，换句话来理解，<strong>一个局域网就是一个广播域</strong>，这样能将广播域控制在一定范围内，不然的话，数据完全处理不过来。另一方面，我们的网络世界毕竟还是互联的，那么众多局域网之间借助什么介质实现互相通信呢？答案是——<strong>路由器</strong>！众所周知，<strong>路由器有一个“知名”功能——隔离广播</strong>，也就是划分出若干个局域网（广播域），相反地，<strong>通过路由器连接起多个局域网就得到了广域网</strong>。</p><p>思考一下：既然路由器隔离了广播，那么我又怎么和其他局域网通信呢？这里就涉及到网关（虚拟路由冗余协议VRRP、双向转发检测BFD）、IP路由表（静态路由、OSPF动态路由）、MAC地址表（地址解析协议ARP、泛洪、环路与生成树协议STP）等等这些新概念了，这些在后面具体都会讲到。</p><p>上面提到路由器，自然就不可避免地提到一个学习中常出现的设备——<strong>交换机</strong>，经常会在脑海中有这样的疑问——<strong>路由器和交换机的区别与联系在哪？</strong></p><blockquote><p>上面这个问题很重要，所以！我准备加<strong>粗了！</strong><br><strong>路由器是用于三层转发的（即工作于网络层），主要同IP地址、路由信息打交道，它可以隔离广播，提供路由表实现网络层数据报文的转发。而交换机是用于二层转发的（即工作于数据链路层），它主要同MAC地址打交道，提供MAC地址表实现数据链路层数据帧的转发。</strong><br>可能有人会问，这两者有联系吗？当然有了，这两者都有着数据转发功能，这是最基本的功能，也很好理解。但两者转发机制又有所不同，对路由器而言，如果在路由表中没有查到对应表项，路由器会自动丢弃该报文。对交换机而言，如果MAC表中也没有查到对应表项，交换机会触发<strong>泛洪</strong>（注意，此泛洪非彼犯浑，具体也放后面讲），从而将数据帧发送出去。总之，交换机总是能将数据转发出去！</p></blockquote><h3 id="实例分析一波"><a href="#实例分析一波" class="headerlink" title="实例分析一波"></a>实例分析一波</h3><blockquote><p>在分析实例之前，给出二层转发、三层转发的解释（如果下面这段话你不理解，可以接着看完下面的内容再回过头来想）：</p><p>没错！二层L2就是指数据链路层，三层L3就是指网络层！可以这样理解：<strong>在A与B数据通信的中间传送路径上经过的各个物理设备都没有“经过”网络层（这里的“经过”可以理解为数据帧没有被拆包），就可以称为L2转发，否则，也就意味着数据需要经过网络层，这就称为L3转发！</strong><br>有一些很明显的特征，若通信的数据传送路径上有经过路由器，则可认定为L3转发，若只经过交换机转发，则认定为L2转发。L2转发只会依靠MAC地址表，L3转发主要依靠IP路由表，当然了也会涉及到MAC地址。<br>再换种表述方法，若通信的数据传送过程只在同一LAN内进行，则可认定为L2转发，若传送过程在LAN间进行，则可认定为L3转发。</p></blockquote><p>先贴一张“老实本分”的网络拓扑结构图！</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTY3ZDdjNDA5OWZiNDQwODAucG5n" alt="一张像模像样的网络拓扑结构图" title>                </div>                <div class="image-caption">一张像模像样的网络拓扑结构图</div>            </figure><p>图中已经标明了主机以及各个设备物理端口的IP地址、网络掩码SM的配置信息。可以看出：</p><ul><li>（主机PC3、PC4、交换机SW1、SW2、SW3以及路由器R1的Eth 0/0/0物理端口）处于同一LAN1；</li><li>（主机PC1以及路由器R1的GE 0/0/0物理端口）处于同一LAN2；</li><li>（路由器R1的Eth 0/0/1物理端口以及路由器R2的Eth 0/0/0物理端口）处于同一LAN3；</li><li>（主机PC2以及路由器R2的Eth 0/0/1物理端口）这些处于同一LAN4。</li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWQzNWVlN2NmYjZkOGU1NWUucG5n" alt="为了你能看得具象些，我尽力了" title>                </div>                <div class="image-caption">为了你能看得具象些，我尽力了</div>            </figure><p>很显然，处于同一LAN内的任意两台设备都能ping通（这主要因为我们在规划网络时，遵循这样的原则——同一LAN内的网络设备的IP地址必须处于同一网段。具体为什么要这样后面会提到）。</p><h4 id="实例一"><a href="#实例一" class="headerlink" title="实例一"></a>实例一</h4><p><strong>结合上面的拓扑图来分析一下“PC3 上发一条微信给PC4”这个业务流程</strong>：</p><p>PC3上的微信数据信息经过传输层TCP头部、网络层IP头部封装后，准备封装源MAC地址以及目的MAC地址（也就是数据链路层头部），源MAC很容易获得，而目的MAC地址的话，PC3会首先在自己本机的ARP缓存（目的IP地址、目的MAC地址）这样的映射表文件中查找是否有能匹配上目的IP地址的表项，若有，直接拿来用即可；若没有，则需要由PC3发送一个ARP请求帧（广播）到同一LAN内的所有主机。</p><blockquote><p><strong>注意：这个ARP请求帧中包括源主机PC3的IP地址、源主机PC3的MAC地址、目的主机PC4的IP地址，而“目的主机的MAC地址部分”用“0XFF FF FF FF”表示，从而实现广播功能。</strong></p></blockquote><p>从上面这个拓扑图可以看出，PC3发送的ARP请求帧（广播消息）会经过SW2，而SW2在收到ARP请求帧（广播消息）后，首先会在自己的MAC地址表中记录下（PC3的MAC地址，SW2的GE0/0/1）这样一条表项，然后再分析ARP请求帧（广播消息）具体往GE0/0/2还是GE0/0/3转发。</p><blockquote><p>这里要给出一个新的概念——<strong>生成树协议STP</strong>，STP的目的是为了避免出现环路，试想一下，从SW2发出的广播可能会选择GE0/0/2发往SW1，而SW1发出的广播也可能会选择到GE0/0/2发往SW3，更糟糕的是，SW3发出的广播也可能会选择到GE0/0/3从而又回到了SW2，这样就形成了一个环路，而交换机并不知道，这严重消耗了带宽资源，甚至会产生广播风暴，导致交换机死机。<br>对于所有的环路问题，最直接、最容易想到的一种环路避免方法就是“破环”，在这里具体就是手动随机关闭交换机的某个端口，让环路不得存在！很显然，对于结构复杂的现网，这样手动随机关闭的方法是不现实的，所以，我们这才有了生成树协议STP，<strong>STP协议是在逻辑上断开网络的环路，防止广播风暴的产生，而一旦正在用的线路出现故障，逻辑上被断开的路线又被连通，继续传输数据。</strong><br>其实这个协议，我们是可以在空闲状态下，SW2的GE0/0/2端口抓包分析看到，STP协议是一直在处于不间断运行状态的。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWI5YTQ2MTUzN2YzY2E4OTEucG5n?x-oss-process=image/format,png" alt="在SW2的GE0/0/2抓包分析" title>                </div>                <div class="image-caption">在SW2的GE0/0/2抓包分析</div>            </figure></p></blockquote><p>我们假设STP协议机制选择了在逻辑上断开SW2的GE0/0/2端口（环路便不存在了），那么SW2只能向SW3发送ARP请求帧（广播消息），SW3收到ARP请求帧（广播消息）后，也会在自己的MAC地址表中记录下（PC3的MAC地址，SW3的GE0/0/3）这样一条表项，然后就会将ARP请求帧（广播消息）分别向SW1和PC4方向转发，当主机PC4接收到ARP请求，并且检查到这个ARP请求帧中所包含的目的IP地址与自己的IP地址匹配上了，它首先会将主机PC3的IP地址和MAC地址映射添加到它自己本地的ARP缓存中，然后再将包含PC4主机MAC地址的ARP回复消息直接发送回主机PC3（<strong>注意，此时不再是广播回复，而是单播</strong>）。而送往SW1方向的ARP请求会首先经过SW1（当然SW1也会记录下（PC3的MAC地址，SW1的GE0/0/2）到它的MAC地址表中），最终会到达路由器R1的Eth0/0/0端口，而路由器是会隔离广播消息的，所以无法传输过去，当然也不会给出任何回复消息。</p><p>那么PC4返回的ARP回复消息是怎么回送给PC3呢，具体回送过程如何？</p><p>PC4返回的ARP回复消息中包含PC4的IP地址、PC4的MAC地址、PC3的IP地址、PC3的MAC地址。当这条消息发送到SW3时，会在SW3的MAC地址表中添加一条（PC4的MAC地址，SW3的GE0/0/2）表项，同时，根据消息帧中的目的MAC地址（即上句话中的PC3的MAC地址）查询SW3的MAC地址表，匹配到之前记录下的一条表项（PC3的MAC地址，SW3的GE0/0/3），故此，这条ARP回复消息会从SW3的GE0/0/3端口转发，到达SW2后同理，首先在SW2的MAC地址表中添加一条（PC4的MAC地址，SW2的GE0/0/3）表项，再根据消息帧中的目的MAC地址（同样也是PC3的MAC地址）查询SW2的MAC地址表，匹配到之前记录下的一条表项（PC3的MAC地址，SW3的GE0/0/1），故此，这条ARP回复消息从SW2的GE0/0/1端口转发，这样就将ARP回复消息送到了主机PC3。</p><p>当主机PC3收到从主机PC4发来的ARP回复消息时，首先会用（主机PC4的IP地址，主机PC4的MAC地址）映射关系更新它自己本地的ARP缓存，至此，也就算完成了上面的ARP请求。其次，主机PC4既然拿到了PC3的MAC地址，那么我们回过头再看前面的数据封装步骤，这时就可以进行数据链路层的头部封装了。</p><blockquote><p>更新一下经过上面ARP请求后，各个交换机的MAC地址表状况，如果你看懂了上面的ARP过程，那么这些表项如何添加进来应当就不难理解了！<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTk1YWIyNGI4YzU0ODM2YWYucG5n" alt="各个交换机的MAC地址表以及各主机ARP缓存表情况" title>                </div>                <div class="image-caption">各个交换机的MAC地址表以及各主机ARP缓存表情况</div>            </figure></p></blockquote><p>数据链路层封装的头部主要包含：目的MAC地址即PC4的MAC地址、源MAC地址即PC3的MAC地址，（数据链路层封装的数据信息称为帧），再然后，数据帧经过物理层转换为比特流形式通过物理层设备传输，具体在我们这个实例中，就是从PC3到SW2的数据比特流的传输，到了SW2后，这些比特流又会反过来转换为数据帧的形式，这样交换机SW2就能从中读出目的MAC地址，（其实，交换机真正感兴趣的、能处理的也就只有这个目的MAC地址，这点必须要理解清楚！！！），SW2会根据这个目的MAC地址即PC4的MAC地址在自己的MAC地址表中查找是否有对应项，很显然，能找到表项匹配上（可以参照着看上面的MAC地址表图），即依次经过SW2、SW3转发（依靠MAC地址表），能实现PC3与PC4间的数据通信过程。</p><blockquote><p>从网上找了一下ARP报文格式，我们可以结合这个部分再回顾一下前面的ARP请求帧：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTk1NTA0YTlmMjFjYWZmOWUucG5n" alt="ARP报文格式" title>                </div>                <div class="image-caption">ARP报文格式</div>            </figure><br>首先，可以看到ARP报文是由14位的以太网首部和28位的以太网ARP请求/应答字段构成的。按顺序来看，首先看以太网首部：</p><ul><li>第一部分，以太网目的地址，也就是目的MAC地址，这是一个广播地址，所以就是用0XFF-FF-FF-FF-FF-FF表示目标是网络上所有的主机。</li><li>第二部分，以太网源地址，也就是源MAC地址，这是请求端(发送端)的MAC地址。</li><li>第三部分，帧类型，表明这个以太网帧的类型，其中0x0806代表这是ARP协议帧，即后面的数据是属于ARP包的。</li></ul><p>再看以太网ARP请求/应答字段：</p><ul><li>第一部分，硬件类型，其中1代表是以太网。</li><li>第二部分，协议类型，表明上层协议的类型，其中0x0800表示上层协议是IP协议</li><li>第三部分，硬件地址长度，这很显然是6个字节</li><li>第四部分，协议地址长度，其中IP协议的长度是4个字节</li><li>第五部分，操作类型，在报文中占2个字节，其中1表示ARP请求，2表示ARP应答，3表示RARP请求，4表示RARP应答。这前五个部分就是ARP首部。</li><li>第六部分，发送者硬件地址，即发送方(源)MAC地址。</li><li>第七部分，发送者IP地址，即发送方(源)IP地址。</li><li>第八部分，目标硬件地址，即目的MAC地址。</li><li>第九部分，目标IP地址，即目的IP地址。</li></ul></blockquote><h4 id="实例二"><a href="#实例二" class="headerlink" title="实例二"></a>实例二</h4><p><strong>结合上面的拓扑图来分析一下“PC3 上发一条微信给PC2”这个业务流程</strong>：</p><p>在分析这个业务流程之前，应当有这样的认识，主机PC3、PC2的IP地址不在同一LAN，那么数据信息应当首先转发到网关（通过MAC地址），这属于L2转发，跨过网关后就进入了L3转发（通过IP路由转发）。具体看下面：</p><p>传输数据之前，PC3能判断出自己与PC2不在同一LAN内，那么PC3发出的微信消息依次经过传输层、网络层、数据链路层会经过类似如下封装（草图）：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTk4NjA1MDVhN2U4NWZkYmEucG5n" alt="TCP/IP协议栈的封装过程" title>                </div>                <div class="image-caption">TCP/IP协议栈的封装过程</div>            </figure><blockquote><p>从上面这个图也可以看出，TCP/IP协议数据整体封装方式如下：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTIzN2IxM2RlOWFmMmUwOGMucG5n?x-oss-process=image/format,png" alt="TCP/IP协议数据整体封装方式" title>                </div>                <div class="image-caption">TCP/IP协议数据整体封装方式</div>            </figure><br>其中，<strong>应用层</strong>（第一层）提供应用程序网络协议端口号，区分不同的应用进程，例如HTTP（80）、HTTPS（443）、Telnet（23）、FTP（21）、SMTP（25）、DNS（53）、TFTP（69）、SNMP（161）等等；</p><p><strong>传输层</strong>（第二层）位于应用层和网络层之间，存在一个复用和分用的功能（应用层所有的应用进程都可以通过传输层再传到网络层，这就是<strong>复用</strong>。传输层从网络层收到发送给各应用进程的数据后，必须分别交付给由端口号指明的各应用进程，这就是<strong>分用</strong>），也就是说传输层协议（TCP或UDP）用端口号来标识和区分各种上层应用程序；<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWM5ODU5NzhiZWE0ZDFmOGIucG5n?x-oss-process=image/format,png" alt="TCP/UDP报文格式" title>                </div>                <div class="image-caption">TCP/UDP报文格式</div>            </figure></p><p><strong>网络层</strong>位于数据链路层和传输层中间，接收传输层的数据报文，分段为合适的大小，封装上IP报文头部，交给数据链路层。网络层为了保证数据包的成功转发，主要涉及了这些协议：IP（IPv4/IPv6）协议、ARP协议（工作于网络层与数据链路层之间）、RARP、ICMP、IGMP等。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTI0MmFjMzI5ZTgxYTVlNzAucG5n" alt="IP报文格式" title>                </div>                <div class="image-caption">IP报文格式</div>            </figure></p><p><strong>数据链路层</strong>主要功能就是保证将源端主机网络层的数据包准确无误地传送到目的主机的网络层。数据链路层的帧使用物理层提供的比特流传输服务来到达目的主机数据链路层。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWM1Yzk5Mjk1NTM4ZDIwNDQucG5n" alt="数据链路层对网络层数据(IP数据报文)长度的限制——MTU" title>                </div>                <div class="image-caption">数据链路层对网络层数据(IP数据报文)长度的限制——MTU</div>            </figure></p><p><strong>物理层</strong>的功能是在终端设备间传输比特流，目前常用的数据信号传输介质主要有同轴电缆（coaxical cable）、双绞线（twisted pair）、光纤（fibre）、无线电波（wireless radio）等，常见的网络设备有：中继器、集线器等。传输数据的方式能满足点到点，一点到多点，串行或并行，半双工或者全双工，同步或异步传输的需要。</p><p>上面这些内容其实只是“九牛一毛”，详细的各层封装处理还有很多细节值得深抠，我这里也就不做这些拓展了，以后有时间一点一点来。</p></blockquote><p>回到我们这个实例，PC3想要发送的微信消息会在传输层封装上包含源端口号（一般由操作系统给应用进程自动分配一个）以及目的端口号（根据你想要的的应用服务来生成，比如你想要的获取HTTP服务，那么就是80）的传输层头部，然后在网络层封装上包含源主机PC3的IP地址（这个很容易得到）以及目的主机PC2的IP地址（DNS解析）的网络层头部，再然后，应当进行数据链路层的封装了，PC3通过目的IP地址发现这个目的主机PC2与我不在同一LAN内，那么PC3会首先在自己本地的ARP缓存映射表中找到就会发出一个ARP请求<strong>网关</strong>的MAC地址（过程类似于PC3向全网广播说：“我的IP是<code>192.168.1.1/24</code>，我的MAC地址是<code>XX XX XX XX XX XX</code>，我想知道IP地址为<code>192.168.1.3/24</code>的网关的MAC地址是多少？”，而只有这条广播消息帧到达路由器R1的Eth0/0/0接口才能匹配上，它就会回复：“我的IP地址是<code>192.168.1.3/24</code>，我的MAC地址是<code>XX XX XX XX XX XX</code>”，具体ARP过程这里就不再赘述了）。</p><blockquote><p>这里提到了<strong>网关GateWay</strong>这个概念，对于网关，我们需要知道这几点：<br><strong>1.  网关这个概念是相对于主机而言的；</strong><br><strong>2. 主机想要访问不属于本LAN内的网络设备时，必然会选择从网关出去；</strong><br><strong>3. 最常见的网关设备便是路由器；</strong><br><strong>4. 不难发现，主机IP地址及其网关IP地址应该处于同一LAN内（即同一网段内）；</strong><br><strong>5. 在谈及网关时，我们常常会碰到虚拟路由冗余协议VRRP和双向转发检测协议BFD（具体可以通过看我在这里介绍的——<a href="https://www.jianshu.com/p/a06a103465b6" target="_blank" rel="noopener">VRRP虚拟路由冗余协议的配置</a>来帮助理解这两者）！</strong></p></blockquote><p>当PC3收到了包含网关MAC地址（即路由器R1的MAC地址）的ARP回复消息时，首先会将（R1的MAC地址，R1的Eth0/0/0端口IP地址）这条映射关系添加到自己本地的ARP缓存表中，然后就可以在数据链路层对之前从网络层送来的IP数据报文进行封装成帧，主要包含<strong>源主机PC3的MAC地址以及路由器R1的MAC地址（这就是这个数据帧的目的MAC地址）</strong>。</p><p>到了这一步，数据帧就会转换成比特流形式（高低电频表示二进制）通过物理层传输介质到达SW2，SW2接收到数据流又会转换成数据帧，从中读出目的MAC地址（即R1的MAC地址）并在自己的MAC地址表查找能匹配上的表项，选出从哪个端口转发，按照我们前面的描述，这个比特流向应当是“SW2-&gt;SW3-&gt;SW1-&gt;R1”。</p><p>到达R1后，R1会首先将（PC3的MAC地址，PC3的IP地址）这样一条表项添加进R1自己的ARP缓存中去，然后，R1会发现这个数据帧头部包含的目的MAC地址与自己的MAC地址是一致的，那么R1就会“解一层包”（因为单从这一层来看，R1就是这个数据帧的目的地），但解开后，很快R1就会发现IP数据报文首部中的目的IP地址为<code>192.168.2.3/24</code>（很容易得出目的网络地址为<code>192.168.2.0/24</code>），这显然不是发给自己的。故有随后的转发判断规则与流程如下：</p><ul><li>① 若该目的网络地址<code>192.168.2.0/24</code>就是与路由器R1<strong>直接相连</strong>的某个网络地址（路由表中为Direct类型），则不需要经过其他路由器，直接把这个IP数据报文封装成帧（这里封装的数据链路层头部包括源MAC地址即R1的MAC地址，目的MAC地址即目的主机的MAC地址，同样的，<strong>路由器中也是有一个ARP高速缓存表</strong>，所以如果路由器所保存的ARP缓存中如果没有目的IP地址对应的表项，那么也会使用ARP），交付给目的主机，否则，执行② ；</li><li>② 若R1的路由表中有某个特定表项的目的IP地址与该目的主机PC2的IP地址<code>192.168.2.3/24</code>一致，则把数据报转发给路由器表中所指明的下一跳路由器，否则，执行③ ；</li><li>③ 若R1的路由表中有到达目的网络地址<code>192.168.2.0/24</code>的路由，则把数据报传送给路由表中所指明的下一跳路由，否则，执行④；</li><li>④ 若R1的路由表中有一个默认路由（缺省路由，即目的地址为<code>0.0.0.0</code>），则把数据传送给路由表所指明的默认下一跳，否则，执行⑤；</li><li>⑤ 报告路由器R1转发出错，数据无法转发出去，丢弃处理。</li></ul><p>具体在我们这个实例中，显然路由器R1会符合②或③（或④）这两种情况之一，但其实不论哪种情况，都会向下一跳路由器R2转发，转发之前，路由器R1应当将这个IP数据报文头部中的源IP地址改为路由器R1的Eth 0/0/1端口的IP地址，目的IP地址依然是PC2的IP地址，重新封装成帧（这里封装的数据链路层头部包括源MAC地址即R1的MAC地址，目的MAC地址即R2的MAC地址，同样的，<strong>路由器中也是有一个ARP高速缓存表</strong>，所以如果路由器所保存的ARP缓存中如果没有对应的表项，那么也会使用ARP以获取想要知道的MAC地址。比如这里，R1就会在LAN3这个局域网内产生一个ARP广播消息去拿到R2的MAC地址的）。</p><blockquote><p>上面这段话还有两个前面一直在提的细节没有描述：</p><ol><li>为什么我们在IP数据报文封装成帧和路由转发之前要将IP数据报文头部中的源IP地址修改成路由器R1的Eth 0/0/1端口的IP地址？这是因为，为了让R2在接收到我这个IP数据报文时，能够更新它的ARP缓存，即添加（R1的MAC地址，R1的Eth0/0/1端口IP地址）这样的一条表项。</li><li>R2收到ARP广播请求消息后，会首先在自己的ARP缓存中添加（R1的MAC地址，R1的Eth0/0/1端口IP地址）这样的一条表项，而R1在收到R2回复的ARP回复消息后，也会首先在本地ARP缓存中添加（R2的MAC地址，R2的Eth0/0/0端口IP地址）这样的一条表项，这点是ARP协议的重要部分，别给轻易忘了。</li></ol></blockquote><p>上面的步骤已经让比特流流向路由器R2了，R2同样在将比特流转换为数据帧后，发现这个帧头部中的目的MAC地址和自己的MAC地址是一致的，也会拆一层包，那么看到的便是IP数据报文了，这时，R2会首先在自己的ARP缓存中添加（R1的MAC地址，R1的Eth0/0/1端口IP地址）这样的一条表项，而且，路由器R2会发现IP数据报文中所指明的目的IP地址符合①这种情况，也就是同R2直接相连（路由表中为Direct类型），那么直接把这个IP数据报文封装成帧（同理，在封装成帧和路由转发之前要将IP数据报文头部中的源IP地址修改成路由器R2的Eth 0/0/1端口的IP地址<code>192.168.2.1/24</code>，目的IP地址依然是PC2的IP地址），在这里封装的数据链路层头部包括源MAC地址即R2的MAC地址，目的MAC地址即目的主机PC2的MAC地址（同样可以通过ARP得到），这样封装成帧后经物理层转换为比特流从而抵达目的主机PC2！</p><p>PC2在将比特流转换为数据帧后，发现这个帧头部中的目的MAC地址和自己的MAC地址是一致的，会拆一层包，那么看到的便是IP数据报文了，这里同样会首先将（R2的MAC地址，R2的Eth 0/0/1端口的IP地址）添加到自己的ARP缓存中，然后又发现这个IP数据报文首部中的目的IP地址和自己的IP地址也是一致的，会再拆一层包，那么看到的便是了TCP数据段了，这个时候它会从TCP数据段的头部中识别出目的端口号是啥，去掉这些头部信息后，从而交付给由端口号指明的上层各应用进程。</p><p>当然了，PC2也是需要给PC3回复消息的，在前面这些步骤描述中，其实一些配置信息包括路由器R1、R2和主机PC2的ARP缓存映射表，交换机SW1、SW2、SW3的MAC地址表也随之建立完善了起来，也就是说PC2给PC3回复消息的过程会免去这些ARP请求步骤（但对用户来说，这是透明的，因为用户是感受不到也完全看不到ARP请求过程的）。</p><h4 id="实例小结"><a href="#实例小结" class="headerlink" title="实例小结"></a>实例小结</h4><p>下面，我们就这两个例子总结一下知识点以及还需要注意的地方：</p><ul><li><p>ARP是解决<strong>同一局域网上</strong>的主机或路由器的IP地址和MAC地址的映射问题，对于主机而言，它是不知道这种地址解析过程的，只要主机或路由器要和<strong>本网络上</strong>的另一个已知IP地址的主机或路由器通信，ARP协议就会自动把这个IP地址解析为数据链路层封装是所需要的MAC地址；</p></li><li><p>通常，主机和路由器所拥有的ARP缓存是有<strong>生存期</strong>的，这是很有必要的，设想有一种情况，主机A和B通信，A的ARP缓存中保存有B的硬件地址。但B的网络适配器突然坏了，B立即更换了一块，因此B的MAC地址就改变了，假定A还要和B继续通信，A在其ARP缓存中查找到B原先的MAC地址，并使用该MAC地址向B发送数据帧，但B原先的MAC地址以及失效了，因此A无法找到主机B。但是过了一段不长的生成时间，A的ARP缓存中已经删除了B原先的MAC地址，于是A重新广播发送ARP请求消息，又找到了B；</p></li><li><p>ARP广播消息帧中的“目的MAC地址部分”是<strong>0XFF FF FF FF FF FF</strong>，所以交换机对于这样的目的MAC地址，可不必去MAC地址表中查询（当然也不可能有表项能匹配上），而是统一会向其他端口广播发出；</p></li><li><p>我们在理解“封装”时，需要知道，有时也可能在数据尾部加上某些报文信息，这种也可称为封装，比如在数据链路层封装成帧时，就会在头部、尾部都会加上一些报文信息；</p></li><li><p>“封装”的另一个重要认知：以数据链路层封装为例，如果网络层传来的IP数据报文比较长（超出上限），那么是无法套在一个TCP头部之后的，这个时候需要需要对数据分片处理， ，  然后在组装成多个帧（而不是一个）。其他各层也有类似特点。</p></li><li><p>路由器很明显的一个特性是，同一路由器各个端口所在的网段是不可以冲突的，也就是必须互相位于不同网段。从最上面那张网络拓扑图也可以看出，在规划网络时，我们始终遵循这样的原则——同一LAN内的网络设备的IP地址必须处于同一网段。这也符合路由器隔离广播域、划分出各个LAN的特性。</p></li><li><p>实例二涉及到“路由表”这个概念，我们需要知道，路由分为静态路由（手动配置添加路由）、动态路由（主要有四种RIP、OSPF、IS-IS、BG）。具体路由表配置可以参看我的这篇文章——<a href="https://www.jianshu.com/p/2b7caabf1619" target="_blank" rel="noopener">静态路由表的配置（含负载分担、路由备份）</a> 以及 <a href="https://www.jianshu.com/p/7fbaa718fe0e" target="_blank" rel="noopener">多区域OSPF动态路由协议的配置</a>。</p></li><li><p>关于L2转发、L3转发，我们上面所描述的实例一便属于L2转发，而实例二属于L3转发。可以借助下面这个图来帮助理解（其中1-5依次表示TCP/IP协议五层模型）：</p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWJlYjhiMmNhOGFiOTMzZjMucG5n" alt="L2转发、L3转发" title>                </div>                <div class="image-caption">L2转发、L3转发</div>            </figure><h3 id="补充内容"><a href="#补充内容" class="headerlink" title="补充内容"></a>补充内容</h3><h4 id="局域网-amp-以太网"><a href="#局域网-amp-以太网" class="headerlink" title="局域网&amp;以太网"></a>局域网&amp;以太网</h4><p>局域网是在20世纪70年代末发展起来的，局域网技术在计算机网络中占有非常重要的地位。其主要特点是：<strong>网络为一个单位所拥有，且地址范围和站点数目均有限。</strong>局域网刚出现的时候，局域网比广域网具有较高的数据率、较低的时延和较低的误码率。但随着<strong>光纤技术</strong>在广域网中普遍使用，现在广域网也具有较高的数据率和较低的误码率。</p><p>必须指出，<strong>局域网工作层次跨越了数据链路层和物理层</strong>。局域网可使用多种传输媒体，其中双绞线已成为局域网中的主流传输媒体，当数据率很高时，往往需要使用光纤作为传输媒体。</p><p>按拓扑结构划分，局域网可以分为星形网（集线器Hub的大量应用）、环形网（与令牌机制相关）、总线网（以传统的以太网最为出名）。局域网经过四十多年的发展，尤其是在快速以太网（Fast Ethernet，100Mbit/s）和吉比特以太网（Gigabit Ethernet，1Gbit/s）、10吉比特以太网（10 Gbit/s）相继进入市场后，以太网已经在局域网市场占据绝对优势。<strong>可以这样说，现在的以太网几乎成了局域网的同义词。</strong>（由于以太网的传输速率已演进到每秒吉比特甚至100Gbit/s，因此<strong>通常用“传统以太网”来表示最早流行的10Mbit/s速率的以太网</strong>）</p><blockquote><p>以太网的发展与两个标准</p><p>最开始的以太网是一种基带总线局域网（数据率为2.94Mbit/s），于1975年由美国施乐公司研制成功。1980年，DEC公司、英特尔公司和施乐公司联合提出了10Mbit/s以太网规约的第一个版本DIX V1。1982年修改为第二版规约（实际上也是最后的版本），即DIX Ethernet V2，成为世界上第一个局域网产品的规约。<br>在此基础上，IEEE 802 委员会的802.3工作组与1983年制定了第一个IEEE的以太网标准 IEEE 802.3，数据率为10Mbit/s。但实际上，以太网的两个标准 <strong>DIX Ethernet V2 和 IEEE 802.3标准</strong>只有很小的差别，因此很多人也会把802.3局域网称为“以太网”（严格来讲，“以太网”应当指符合DIX Ethernet V2标准的局域网）。</p><p>出于有关厂商在商业上的竞争，IEEE 委员会未能形成一个统一的、“最佳的”局域网标准，而是被迫制定了几个不同的局域网标准，如802.4令牌总线网、802.5令牌环网等。</p><p>为了使数据链路层更好地适应不同的局域网标准，IEEE 802委员会就把局域网的数据链路层拆成两个子层，即逻辑链路控制子层LLC（Logical Link Control）和媒体接入控制子层MAC（Medium Access Control）。 与接入到传输媒体有关的内容都放到MAC子层，而LLC子层则与传输媒体无关，不管采用何种传输媒体和MAC子层的局域网对LLC子层来说都是透明的。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTVmODQ2NTI1ZGJkOTYyMGQucG5n" alt title>                </div>                <div class="image-caption"></div>            </figure><br>但需要注意的是，局域网市场的竞争在20世纪90年代逐渐明朗。以太网在局域网市场已经取得了垄断地位，并且几乎成为了局域网的代名词。TCP/IP体系中经常使用的局域网只剩下DIX Ethernet V2 而不是 802.3标准中的局域网，因此，IEEE 802委员会制定的逻辑链路控制子层LLC的作用也就消失了。现在的很多厂商生产的适配器上就仅安装有MAC协议而没有LLC协议。（回顾我们上面的两个分析实例，就没有考虑LLC子层）</p></blockquote><h4 id="网络适配器"><a href="#网络适配器" class="headerlink" title="网络适配器"></a>网络适配器</h4><p>从一般概念上理解，计算机同外部局域网的连接是通过适配器进行的，而最开始适配器是在主机箱内插入的一块网络接口卡（简称“网卡”）。但现在的计算机大都将这种适配器嵌入计算机主板，不再单独使用单独的网卡，所以，<strong>“网络适配器”的说法会比“网卡”说法更精确</strong>。</p><p>适配器和局域网之间的通信是通过电缆或双绞线以串行传输方式进行的，而适配器和计算机之间的通信则是通过计算机主板上的I/O总线以并行传输方式进行的。因此，适配器<strong>一个重要功能就是要进行数据串行传输和并行传输的转换</strong>。</p><p>网络上的数据率和计算机总线上的数据率并不相同，因此是适配器中必须装有<strong>对数据进行缓存的存储器模块</strong>。</p><p>在主板插上适配器后，还必须把管理该适配器的设备驱动程序安装在计算机的操作系统中，这个驱动程序以后就会告诉适配器，应当从存储器的什么位置把多长的数据块发送到局域网，或者应当在存储器的什么位置上吧局域网发过来的数据块存储下来。</p><p>计算机的<strong>硬件地址固化在了网络适配器的ROM中</strong>，故硬件地址的概念等同于物理地址、MAC地址。这和IP地址这种逻辑上的概念不同，所以<strong>IP地址则会保存在计算机的存储器中</strong>。</p><p>根据上面的内容表述，总结：<strong>适配器所实现的功能包含了数据链路层和物理层，适配器上装有处理器模块和存储器模块（包括RAM和ROM）。</strong></p><blockquote><p>（摘自《计算机网络》谢希仁版）<br> <strong>适配器接收和发送各种帧时不使用计算机的CPU。</strong>这时CPU可以处理其他任务。<br>当适配器收到有差错的帧时，就把这个帧丢弃而不必通知计算机。<br>当适配器收到正确的帧时，它就使用<strong>中断</strong>来通知该计算机并交付协议栈中的网络层。<br>当计算机要发送IP数据报时，就由协议栈把IP数据报向下交给适配器，组装成帧后发送到局域网。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWVmNDQ3NTRhZGE1NmU5MDYucG5n" alt="计算机通过适配器和局域网进行通信" title>                </div>                <div class="image-caption">计算机通过适配器和局域网进行通信</div>            </figure></p></blockquote><h4 id="三层交换机"><a href="#三层交换机" class="headerlink" title="三层交换机"></a>三层交换机</h4><p>三层交换机就是指<strong>具有部分路由器功能的交换机。</strong></p><blockquote><p>（再次摘自百度百科）出于安全和管理方便的考虑，主要是为了减小广播风暴的危害，必须把大型局域网按功能或地域等因素划成一个个小的局域网，这就使<strong>VLAN技术在网络中得以大量应用，而各个不同VLAN间的通信都要经过路由器来完成转发</strong>，随着网间互访的不断增加。<strong>单纯使用路由器来实现网间访问，不但由于端口数量有限，而且路由速度较慢，从而限制了网络的规模和访问速度。</strong>基于这种情况<strong>三层交换机</strong>便应运而生，三层交换机是为IP设计的，接口类型简单，拥有很强二层包处理能力，非常适用于大型局域网内的数据路由与交换，<strong>它既可以工作在协议第三层替代或部分完成传统路由器的功能，同时又具有几乎第二层交换的速度</strong>，且价格相对便宜些。</p><p>三层交换机出现<strong>最重要的目的是加快大型局域网内部的数据交换</strong>，所具备的路由功能也多是围绕这一目的而展开的，所以它的路由功能没有同一档次的专业路由器强。毕竟在安全、协议支持等方面还有许多欠缺，<strong>并不能完全取代路由器工作。</strong></p></blockquote><p>在实际应用过程中，典型的做法是：<strong>处于同一个局域网中的各个子网的互联以及局域网中VLAN间的路由，用三层交换机来代替路由器，而只有局域网与公网互联之间要实现跨地域的网络访问时，才通过专业路由器。</strong></p><h4 id="VLAN"><a href="#VLAN" class="headerlink" title="VLAN"></a>VLAN</h4><p>虚拟局域网VLAN，英文全称为Virtual Local Area Network，很显然，“虚拟”意味着不存在物理实体的，因此在理解VLAN的时候，需要我们有一定的逻辑思维。我们前面一直有提到——一个局域网LAN就是一个广播域，这种观点在VLAN出现后就应当有所改变了，VLAN技术就是将一个物理的局域网LAN<strong>在逻辑上</strong>划分成多个广播域，<strong>每一个广播域就是一个VLAN</strong>。可以根据交换机的端口，或每个主机的MAC地址，或每个主机的网络层地址或协议类型(如果支持多协议)等来进行划分。</p><p>上面这段解释透露了这样一个信息——<strong>虚拟局域网只是局域网提供给用户的一种“技术服务”，而并不是一种什么“新型局域网”。</strong></p><blockquote><p>（摘自《计算机网络》谢希仁版）有这样一个网络拓扑如下图，设有10台主机分配在三个楼层中，构成三个局域网（由此可知这里使用的以太网交换机是指带路由功能的三层交换机），即：LAN1；（A1，A2，B1，C1），LAN2：（A3，B2，C2），LAN3：（A4，B3，C3）。但这10个主机划分为三个工作组，也就是说划分为三个虚拟局域网。即：VLAN1：（A1，A2，A3，A4），VLAN2：（B1，B2，B3），VLAN3：（C1，C2，C3）。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTljNjkzNDM2OWIyNjcwMWIucG5n" alt="三个虚拟局域网VLAN1、VLAN2、VLAN3的构成" title>                </div>                <div class="image-caption">三个虚拟局域网VLAN1、VLAN2、VLAN3的构成</div>            </figure><br>从图中可以看出，每个VLAN的主机可以在同一局域网LAN中，也可以处在不同的局域网LAN中，也可以不在同一楼层中。这说明<strong>同一个VLAN内的各个工作点没有限制在同一个物理地址范围，也没有限制在同一物理的LAN网段。</strong><br>利用以太网交换机（带路由功能的三层交换机）可以很方便地将这10台主机划分为三个虚拟局域网：VLAN1、VLAN2、VLAN3。在虚拟局域网上的每一个工作点都可以收到同一虚拟局域网上的其他成员所发出的广播。例如，主机B1~B3同属于虚拟局域网VLAN2，那么A1、A2和C1都不会收到B1发出的广播消息，虽然他们与B1连接在同一个以太网交换机上。这样，虚拟局域网限制了接收广播信息的主机数，使得网络不会因传播过多的广播消息而引起性能恶化（<strong>广播风暴</strong>）。</p></blockquote><p>从上面这个例子可以看出，由于虚拟局域网是用户和网络资源的逻辑组合，因此可以按照需要将有关设备和资源非常方便地重新组合。例如，某个单位拥有财物、开发和办公三个部门，出于安全和管理方面的考虑，希望每个部门的计算机可以无障碍通信，部门之间的通信则需要进行控制。采用VLAN技术就可以容易地实现这种用户需求。</p><blockquote><p>可能你有发现上面那张拓扑图中有这样一行小字“<strong>使用802.1Q帧格式</strong>”，这是IEEE为支持虚拟局域网，对标准以太网的帧格式进行了拓展。由于这部分拓展给以太网帧的首部增加了4个字节，因此以太网的最大帧长从原来的1518字节（1500字节的数据加上18字节的“首部”封装）变成了1522字节。<br> <figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTk0NTBiNDFiZTM5ZmM2ZGIucG5n" alt="插入VLAN标记TAG的802.1Q帧格式" title>                </div>                <div class="image-caption">插入VLAN标记TAG的802.1Q帧格式</div>            </figure></p></blockquote><p>在大型局域网中，VLAN技术给网络管理员和网络用户都带来了许多好处。归纳起来主要有以下几点：</p><ul><li>减少移动和改变的代价，即所说的<strong>动态管理网络</strong>，也就是当一个用户从一个位置移动到另一个位置时，他的网络属性不需要重新配置，而是动态地完成，这种动态管理网络给网络管理者和使用者都带来了极大的好处。一个用户，无论他到哪里，他都能不作任何修改地接入网络。当然，并不是所有的VLAN定义方法都能做到这一点。<br><strong>* 虚拟工作组（Grouping）</strong>。使用VLAN的最终目标就是建立虚拟工作组，例如，在企业网中，同一个部门好像在同一个LAN上一样，很容易互相访问、交流信息，同时，所有的广播包也都限制在该虚拟LAN上，而不影响其他VLAN的人。一个人如果从一个办公地点换到另外一个办公地点，而他仍然在该部门，那么，该用户的配置无须改变。同时，如果一个人虽然办公地点没有变，但他更换了部门，那么，只需网络管理员更改一下该用户的配置即可。这个功能的目标就是建立一个动态的组织环境。</li><li>VLAN的应用解决了许多大型二层交换网络产生的问题：限制广播包，提高带宽的利用率，<strong>有效地解决了广播风暴带来的性能下降问题</strong>。一个VLAN形成一个小的广播域，同一个VLAN成员都在由所属VLAN确定的广播域内。那么，当一个数据包没有路由时，交换机只会将此数据包发送到所有属于该VLAN的其他端口，而不是所有的交换机的端V1，这样，就将数据包限制在了一个VLAN内，从而在一定程度上可以节省带宽。</li><li><strong>增强通信的安全性</strong>。一个VLAN的数据包不会发送到另一个VLAN，这样，其他VLAN用户的网络上收不到任何该VLAN的数据包，这样就确保了该VLAN的信息不会被其他VLAN的人窃听，从而实现了信息的保密。</li><li>由于VLAN是从逻辑上对网络进行划分，<strong>组网方案灵活，配置管理简单，从而降低了管理维护的成本</strong>。</li></ul><blockquote><p>（再次摘自百度百科）大约有80%的通信流量发生在VLAN内，20%的通信流量要跨越不同的VLAN。目前，解决VLAN之间的通信一般采用两种路由策略，即集中式路由和分布式路由。</p><ol><li>集中式路由<br>集中式路由策略是指所有VLAN都通过一个中心路由器实现互联。对于同一交换机（一般指二层交换机）上的两个端口，如果它们属于两个不同的VLAN，尽管它们在同一交换机上，在数据交换时也要通过中心路由器来选择路由。<br>这种方式的优点是简单明了，逻辑清晰。缺点是由于路由器的转发速度受限，会加大网络时延，容易发生拥塞现象。因此，这就要求中心路由器提供很高的处理能力和容错特性。</li><li>分布式路由<br>分布式路由策略是将路由选择功能适当地分布在带有路由功能的交换机上（指三层交换机），同一交换机上的不同VLAN可以直接实现互通，这种路由方式的优点是具有极高的路由速度和良好的可伸缩性。</li></ol></blockquote><h4 id="没讨论到的地方"><a href="#没讨论到的地方" class="headerlink" title="没讨论到的地方"></a>没讨论到的地方</h4><ul><li><p>物理层知识</p><ul><li>曼切斯特编码</li><li>信道复用技术（频分复用、时分复用、波分复用、码分复用CDMA）</li></ul></li><li><p>数据链路层知识</p><ul><li>CRC（循环冗余检验）检错技术</li><li>PPP协议（点对点协议）</li><li>CSMA/CD协议（载波监听多点接入/碰撞检测协议）</li></ul></li><li><p>网络层知识</p><ul><li>路由动态协议（RIP、OSPF、IS-IS、BGP）</li><li>虚拟专用网VPN</li><li>网络地址转换协议NAT</li></ul></li><li><p>传输层知识</p><ul><li>TCP/UDP各自工作特点</li></ul></li><li><p>应用层知识</p><ul><li>域名系统DNS</li><li>文件传送协议FTP</li><li>简单邮件传送协议SMTP</li></ul></li><li><p>网络安全知识</p><ul><li>防火墙策略</li></ul></li></ul><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://download.csdn.net/download/jave_f/11431480" target="_blank" rel="noopener">《计算机网络》谢希仁.  pdf版</a></li><li><a href="https://www.cnblogs.com/xieyunc/p/9784041.html" target="_blank" rel="noopener">基于VLAN的二层、三层转发原理</a></li><li><a href="https://www.jianshu.com/p/a06a103465b6" target="_blank" rel="noopener">VRRP虚拟路由冗余协议的配置</a></li><li><a href="https://www.jianshu.com/p/2b7caabf1619" target="_blank" rel="noopener">静态路由表的配置（含负载分担、路由备份）</a></li><li><a href="https://www.jianshu.com/p/7fbaa718fe0e" target="_blank" rel="noopener">多区域OSPF动态路由协议的配置</a></li><li><a href="https://www.jianshu.com/p/34fb66b9491b" target="_blank" rel="noopener">某些数通基本知识梳理</a></li><li><a href="https://www.jianshu.com/p/d553b6aa76d7" target="_blank" rel="noopener">IP编址分类和子网划分</a></li><li><a href="https://www.jianshu.com/p/c5fac1705c77" target="_blank" rel="noopener">OSI七层（或TCP/IP五层）网络模型</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="二层(三层)转发" scheme="https://zhouie.cn/tags/%E4%BA%8C%E5%B1%82-%E4%B8%89%E5%B1%82-%E8%BD%AC%E5%8F%91/"/>
    
      <category term="路由表" scheme="https://zhouie.cn/tags/%E8%B7%AF%E7%94%B1%E8%A1%A8/"/>
    
      <category term="MAC地址表" scheme="https://zhouie.cn/tags/MAC%E5%9C%B0%E5%9D%80%E8%A1%A8/"/>
    
      <category term="ARP缓存" scheme="https://zhouie.cn/tags/ARP%E7%BC%93%E5%AD%98/"/>
    
      <category term="VLAN" scheme="https://zhouie.cn/tags/VLAN/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 多区域OSPF动态路由协议的配置</title>
    <link href="https://zhouie.cn/posts/201907261/"/>
    <id>https://zhouie.cn/posts/201907261/</id>
    <published>2019-07-26T12:01:55.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="OSPF协议简介"><a href="#OSPF协议简介" class="headerlink" title="OSPF协议简介"></a>OSPF协议简介</h3><p>开放式最短路径优先OSPF（Open Shortest Path First）是IETF组织开发的一个<strong>基于链路状态</strong>的内部网关协议（Interior Gateway Protocol）。OSPF分为OSPFv2和OSPFv3两个版本,其中OSPFv2用在IPv4网络，OSPFv3用在IPv6网络。</p><p>主要要了解OSPF的三张表：</p><ul><li><p><strong>邻居表（Peer table）</strong><br>OSPF是一种可靠的路由协议，要求在路由器之间传递链路状态通告之前，需先建立OSPF邻居关系，hello报文用于发现直连链路上的其他OSPF路由器，再经过一系列的OSPF消息交互最终建立起全毗邻的邻居关系，OSPF路由器的邻居信息显示在邻居表中。</p></li><li><p><strong>链路状态数据库（Link-state database，简称LSDB）</strong><br>OSPF用LSA（link state Advertisement，链路状态通告）来描述网络拓扑信息，然后OSPF路由器用LSDB来存储网络的这些LSA。OSPF将自己产生的以及邻居通告的LSA搜集并存储在LSDB中。掌握LSDB的查看以及对LSA的深入分析才能够深入理解OSPF。</p></li><li><p><strong>OSPF路由表（Routing table）</strong><br>基于LSDB进行SPF（Dijkstra算法）计算，而得出的OSPF路由表。</p></li></ul><h3 id="拓扑图（含IP规划）"><a href="#拓扑图（含IP规划）" class="headerlink" title="拓扑图（含IP规划）"></a>拓扑图（含IP规划）</h3><ul><li><p>配置任务<br>按照拓扑图要求配置IP地址，配置多区域OSPF动态路由协议，最终实现PC1和PC2的互相通信。</p></li><li><p>配置工具<br>华为网络设备仿真平台<strong>eNSP</strong></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTk3ZjAxODkwNWIyNmJkYmYucG5n" alt="配置多区域OSPF动态路由协议" title>                </div>                <div class="image-caption">配置多区域OSPF动态路由协议</div>            </figure><h3 id="配置步骤（含完整指令）"><a href="#配置步骤（含完整指令）" class="headerlink" title="配置步骤（含完整指令）"></a>配置步骤（含完整指令）</h3><p>首先，配置主机PC1、PC2的IP信息很简单（留意网关就好），比如PC1就这样：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWM1YjIxZDdkM2QwYWNhMzkucG5n" alt="配置主机PC1" title>                </div>                <div class="image-caption">配置主机PC1</div>            </figure></p><p>然后，需要配置的是R1、R2、R3、R4的各个端口所分配的IP地址，以R1为例，需要配置的有Eth0/0/0（10.1.1.2/30）、Eth0/0/1（10.1.4.1/30）、G0/0/0（10.1.3.1/30）这三个端口。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment"># R1</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.1</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:13:20-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:13:24-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:13:47-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:13:54-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:14:12-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:14:14-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment"># R1</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.2</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:16:05-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:16:13-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:16:39-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:16:43-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.3</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:16:59-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:17:03-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R3</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:18:56-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:19:03-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:19:22-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:19:23-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:19:40-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:19:43-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R4</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.5</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:21:02-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:21:03-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.4</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:21:25-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:21:33-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:21:50-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span><span class="string">:21:53-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><p>接下来，需要开始配置OSPF协议了，大致步骤如下：</p><ul><li><p>创建OSPF进程，并指定OSPF进程号及Router-ID</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ospf [ process-<span class="built_in">id</span> | router-<span class="built_in">id</span> router-<span class="built_in">id</span> ]</span><br></pre></td></tr></table></figure></li><li><p>进入特定area的配置视图</p><figure class="highlight rsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">area</span> <span class="built_in">area</span>-id</span><br></pre></td></tr></table></figure></li><li><p>在特定area的配置视图内，在特定接口激活OSPF</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">network</span> <span class="built_in">ip</span>-<span class="keyword">address </span>wildcard-mask（通配符掩码）</span><br></pre></td></tr></table></figure></li></ul><p>下面就按照上面这个配置步骤一步一步来：</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># R3</span><br><span class="line">[Huawei]ospf <span class="number">1</span> router-id <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">25</span>:<span class="number">13</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">4</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">1</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">25</span>:<span class="number">33</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">5</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]network <span class="number">10.1</span><span class="number">.1</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">28</span>:<span class="number">34</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">6</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]network <span class="number">10.1</span><span class="number">.2</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">28</span>:<span class="number">54</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">7</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]network <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">29</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">8</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]q</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># R1</span><br><span class="line">[Huawei]ospf <span class="number">1</span> router-id <span class="number">2.2</span><span class="number">.2</span><span class="number">.2</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">35</span>:<span class="number">25</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">4</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">0</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">35</span>:<span class="number">55</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">5</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">10.1</span><span class="number">.3</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">15</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">6</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]q</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">1</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">35</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">7</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]network <span class="number">10.1</span><span class="number">.1</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">55</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">8</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">57</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">0</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>, NeighborEvent=HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">57</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">1</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>, NeighborEvent=<span class="number">2</span>WayReceived, NeighborPreviousState=Init, NeighborCurrentState=<span class="number">2</span>Way)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">57</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">2</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>, NeighborEvent=AdjOk?, NeighborPreviousState=<span class="number">2</span>Way, NeighborCurrentState=ExStart)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">57</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">3</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>, NeighborEvent=NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Exchange)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">58</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">4</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>, NeighborEvent=ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Loading)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">36</span>:<span class="number">58</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">5</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>, NeighborEvent=LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]q</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">2</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">37</span>:<span class="number">25</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">9</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]network <span class="number">10.1</span><span class="number">.4</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">37</span>:<span class="number">45</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">10</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># R2</span><br><span class="line">[Huawei]ospf <span class="number">1</span> router-id <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">42</span>:<span class="number">44</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">4</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">0</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">04</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">5</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]network <span class="number">10.1</span><span class="number">.3</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">0</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span>, NeighborEvent=HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">1</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span>, NeighborEvent=<span class="number">2</span>WayReceived, NeighborPreviousState=Init, NeighborCurrentState=<span class="number">2</span>Way)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">2</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span>, NeighborEvent=AdjOk?, NeighborPreviousState=<span class="number">2</span>Way, NeighborCurrentState=ExStart)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">6</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">3</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span>, NeighborEvent=NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Exch</span><br><span class="line">ange)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">4</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span>, NeighborEvent=ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Loadin</span><br><span class="line">g)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">5</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span>, NeighborEvent=LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.0</span>]q</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">1</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">34</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">7</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]network <span class="number">10.1</span><span class="number">.2</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">51</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">6</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>, NeighborEvent=HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">51</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">7</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>, NeighborEvent=<span class="number">2</span>WayReceived, NeighborPreviousState=Init, NeighborCurrentState=<span class="number">2</span>Way)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">51</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">8</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>, NeighborEvent=AdjOk?, NeighborPreviousState=<span class="number">2</span>Way, NeighborCurrentState=ExStart)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">51</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">9</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>, NeighborEvent=NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Exch</span><br><span class="line">ange)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">51</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">10</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>, NeighborEvent=ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Loading)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">51</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">11</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>, NeighborEvent=LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">43</span>:<span class="number">54</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">8</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.1</span>]q</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">2</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">44</span>:<span class="number">04</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">9</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]network <span class="number">10.1</span><span class="number">.5</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">44</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">10</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># R4</span><br><span class="line">[Huawei]ospf <span class="number">1</span> router-id <span class="number">4.4</span><span class="number">.4</span><span class="number">.4</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">14</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">4</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>]area <span class="number">2</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">24</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">5</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]network <span class="number">10.1</span><span class="number">.5</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">44</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">6</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">47</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">0</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span>, NeighborEvent=HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">47</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">1</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span>, NeighborEvent=<span class="number">2</span>WayReceived, NeighborPreviousState=Init, NeighborCurrentState=<span class="number">2</span>Way)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">47</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">2</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span>, NeighborEvent=AdjOk?, NeighborPreviousState=<span class="number">2</span>Way, NeighborCurrentState=ExStart)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">47</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">3</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span>, NeighborEvent=NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Exchange)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">47</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">4</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span>, NeighborEvent=ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Loading)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">48</span>:<span class="number">47</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">5</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span>, NeighborEvent=LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]network <span class="number">10.1</span><span class="number">.4</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.3</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">04</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">7</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">07</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">6</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span>, NeighborEvent=HelloReceived, NeighborPreviousState=Down, NeighborCurrentState=Init)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">07</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">7</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span>, NeighborEvent=<span class="number">2</span>WayReceived, NeighborPreviousState=Init, NeighborCurrentState=<span class="number">2</span>Way)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">07</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">8</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span>, NeighborEvent=AdjOk?, NeighborPreviousState=<span class="number">2</span>Way, NeighborCurrentState=ExStart)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">07</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">9</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span>, NeighborEvent=NegotiationDone, NeighborPreviousState=ExStart, NeighborCurrentState=Exchange)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">07</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">10</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span>, NeighborEvent=ExchangeDone, NeighborPreviousState=Exchange, NeighborCurrentState=Loading)</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">07</span><span class="number">-08</span>:<span class="number">00</span> Huawei %%<span class="number">01</span>OSPF/<span class="number">4</span>/NBR_CHANGE_E(l)[<span class="number">11</span>]:Neighbor changes event: neighbor status changed. (ProcessId=<span class="number">1</span>, NeighborAddress=<span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span>, NeighborEvent=LoadingDone, NeighborPreviousState=Loading, NeighborCurrentState=Full)</span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]network <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.255</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">20</span>:<span class="number">49</span>:<span class="number">34</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">8</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei-ospf<span class="number">-1</span>-area<span class="number">-0.0</span><span class="number">.0</span><span class="number">.2</span>]</span><br></pre></td></tr></table></figure><p>至此，上面这些步骤算是配置完成了多区域OSPF动态路由协议！</p><h3 id="结果验证"><a href="#结果验证" class="headerlink" title="结果验证"></a>结果验证</h3><ul><li><p>ping验证（PC1 上 ping PC2）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;<span class="built_in">ping</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Ping</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: <span class="number">32</span> data bytes, Press Ctrl_C to <span class="built_in">break</span></span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">1</span> ttl=<span class="number">125</span> <span class="built_in">time</span>=<span class="number">125</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">2</span> ttl=<span class="number">125</span> <span class="built_in">time</span>=<span class="number">172</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">3</span> ttl=<span class="number">125</span> <span class="built_in">time</span>=<span class="number">172</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">4</span> ttl=<span class="number">125</span> <span class="built_in">time</span>=<span class="number">140</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">5</span> ttl=<span class="number">125</span> <span class="built_in">time</span>=<span class="number">110</span> ms</span><br><span class="line"></span><br><span class="line">--- <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span> <span class="built_in">ping</span> statistics ---</span><br><span class="line">  <span class="number">5</span> packet(s) transmitted</span><br><span class="line">  <span class="number">5</span> packet(s) received</span><br><span class="line">  <span class="number">0</span>.<span class="number">00</span>% packet loss</span><br><span class="line">  round-trip min/avg/max = <span class="number">110</span>/<span class="number">143</span>/<span class="number">172</span> ms</span><br></pre></td></tr></table></figure></li><li><p>tracert验证</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;tracert <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">traceroute to <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>, <span class="number">8</span> hops max</span><br><span class="line">(ICMP), press Ctrl+C to stop</span><br><span class="line"> <span class="number">1</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">2</span>   <span class="number">31</span> ms  <span class="number">31</span> ms  <span class="number">32</span> ms</span><br><span class="line"> <span class="number">2</span>  <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span>   <span class="number">62</span> ms  <span class="number">63</span> ms  <span class="number">62</span> ms</span><br><span class="line"> <span class="number">3</span>  <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">2</span>   <span class="number">78</span> ms  <span class="number">94</span> ms  <span class="number">94</span> ms</span><br><span class="line"> <span class="number">4</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>   <span class="number">125</span> ms  <span class="number">109</span> ms  <span class="number">125</span> ms</span><br></pre></td></tr></table></figure></li><li><p>查看路由表情况（以R2为例）<br>很明显，OSPF动态协议配置成功了，动态增加了两条协议类型为<strong>OSPF</strong>的路由表项！</p></li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]display ip routing-table</span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Routing Tables: Public</span><br><span class="line">         Destinations : <span class="number">12</span>       Routes : <span class="number">12</span></span><br><span class="line"></span><br><span class="line">Destination/Mask    Proto   Pre  Cost      Flags NextHop         Interface</span><br><span class="line"></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span>/<span class="number">30</span>  OSPF    <span class="number">10</span>   <span class="number">2</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span>        Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span>        Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">2</span>        GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">2</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span>/<span class="number">30</span>  OSPF    <span class="number">10</span>   <span class="number">2</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">2</span>        Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">1</span>        Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">1</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">      <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>/<span class="number">8</span>   Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       InLoopBack0</span><br><span class="line">      <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       InLoopBack0</span><br><span class="line">    <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">0</span>/<span class="number">24</span>  OSPF    <span class="number">10</span>   <span class="number">2</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span>        Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">    <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">0</span>/<span class="number">24</span>  OSPF    <span class="number">10</span>   <span class="number">2</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">2</span>        Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br></pre></td></tr></table></figure><p>这里的话，补充一下几条OSPF中常用的查看和验证指令：</p><ul><li>查看OSPF协议相关运行参数——<code>display ospf brief</code></li><li>查看OSPF邻居表——<code>display ospf peer</code></li><li>查看LSDB表 ——<code>display ospf lsdb</code></li><li>查看OSPF路由——<code>display ospf routing</code></li></ul><p>比如<code>display ospf peer</code>，我们可以看看路由器R2：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]display ospf peer</span><br><span class="line"></span><br><span class="line">     OSPF Process <span class="number">1</span> with Router ID <span class="number">3</span>.<span class="number">3</span>.<span class="number">3</span>.<span class="number">3</span></span><br><span class="line">         Neighbors</span><br><span class="line"></span><br><span class="line"> Area <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span> interface <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">2</span>(GigabitEthernet0/<span class="number">0</span>/<span class="number">0</span>)'s neighbors</span><br><span class="line"> Router ID: <span class="number">2</span>.<span class="number">2</span>.<span class="number">2</span>.<span class="number">2</span>          Address: <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span></span><br><span class="line"><span class="function">   State: <span class="title">Full</span>  <span class="title">Mode:Nbr</span> <span class="title">is</span>  <span class="title">Slave</span>  <span class="title">Priority</span>: 1</span></span><br><span class="line"><span class="function">   <span class="title">DR</span>: 10.1.3.2  <span class="title">BDR</span>: 10.1.3.1  <span class="title">MTU</span>: 0</span></span><br><span class="line"><span class="function">   <span class="title">Dead</span> <span class="title">timer</span> <span class="title">due</span> <span class="title">in</span> 32  <span class="title">sec</span></span></span><br><span class="line"><span class="function">   <span class="title">Retrans</span> <span class="title">timer</span> <span class="title">interval</span>: 5</span></span><br><span class="line"><span class="function">   <span class="title">Neighbor</span> <span class="title">is</span> <span class="title">up</span> <span class="title">for</span> 01:31:04</span></span><br><span class="line"><span class="function">   <span class="title">Authentication</span> <span class="title">Sequence</span>: [ 0 ]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">         <span class="title">Neighbors</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> <span class="title">Area</span> 0.0.0.1 <span class="title">interface</span> 10.1.2.2(<span class="title">Ethernet0</span>/0/0)'<span class="title">s</span> <span class="title">neighbors</span></span></span><br><span class="line"><span class="function"> <span class="title">Router</span> <span class="title">ID</span>: 1.1.1.1          <span class="title">Address</span>: 10.1.2.1</span></span><br><span class="line"><span class="function">   <span class="title">State</span>: <span class="title">Full</span>  <span class="title">Mode:Nbr</span> <span class="title">is</span>  <span class="title">Slave</span>  <span class="title">Priority</span>: 1</span></span><br><span class="line"><span class="function">   <span class="title">DR</span>: 10.1.2.1  <span class="title">BDR</span>: 10.1.2.2  <span class="title">MTU</span>: 0</span></span><br><span class="line"><span class="function">   <span class="title">Dead</span> <span class="title">timer</span> <span class="title">due</span> <span class="title">in</span> 40  <span class="title">sec</span></span></span><br><span class="line"><span class="function">   <span class="title">Retrans</span> <span class="title">timer</span> <span class="title">interval</span>: 5</span></span><br><span class="line"><span class="function">   <span class="title">Neighbor</span> <span class="title">is</span> <span class="title">up</span> <span class="title">for</span> 01:31:09</span></span><br><span class="line"><span class="function">   <span class="title">Authentication</span> <span class="title">Sequence</span>: [ 0 ]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">         <span class="title">Neighbors</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"> <span class="title">Area</span> 0.0.0.2 <span class="title">interface</span> 10.1.5.1(<span class="title">Ethernet0</span>/0/1)'<span class="title">s</span> <span class="title">neighbors</span></span></span><br><span class="line"><span class="function"> <span class="title">Router</span> <span class="title">ID</span>: 4.4.4.4          <span class="title">Address</span>: 10.1.5.2</span></span><br><span class="line"><span class="function">   <span class="title">State</span>: <span class="title">Full</span>  <span class="title">Mode:Nbr</span> <span class="title">is</span>  <span class="title">Master</span>  <span class="title">Priority</span>: 1</span></span><br><span class="line"><span class="function">   <span class="title">DR</span>: 10.1.5.2  <span class="title">BDR</span>: 10.1.5.1  <span class="title">MTU</span>: 0</span></span><br><span class="line"><span class="function">   <span class="title">Dead</span> <span class="title">timer</span> <span class="title">due</span> <span class="title">in</span> 39  <span class="title">sec</span></span></span><br><span class="line"><span class="function">   <span class="title">Retrans</span> <span class="title">timer</span> <span class="title">interval</span>: 5</span></span><br><span class="line"><span class="function">   <span class="title">Neighbor</span> <span class="title">is</span> <span class="title">up</span> <span class="title">for</span> 01:31:09</span></span><br><span class="line"><span class="function">   <span class="title">Authentication</span> <span class="title">Sequence</span>: [ 0 ]</span></span><br></pre></td></tr></table></figure><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://www.cnblogs.com/yinzhengjie/p/6711282.html" target="_blank" rel="noopener">OSPF基础介绍</a></li><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fjave_f%2F11431480" target="_blank" rel="noopener">《计算机网络》谢希仁. pdf版</a></li><li><a href="https://www.jianshu.com/p/2b7caabf1619" target="_blank" rel="noopener">静态路由表的配置（含负载分担、路由备份）</a></li><li><a href="https://www.jianshu.com/p/34fb66b9491b" target="_blank" rel="noopener">某些数通基本知识梳理</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="OSPF" scheme="https://zhouie.cn/tags/OSPF/"/>
    
      <category term="动态路由协议" scheme="https://zhouie.cn/tags/%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 静态路由表的配置（含负载分担、路由备份）</title>
    <link href="https://zhouie.cn/posts/201907261/"/>
    <id>https://zhouie.cn/posts/201907261/</id>
    <published>2019-07-26T11:33:42.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="拓扑图（含IP规划）"><a href="#拓扑图（含IP规划）" class="headerlink" title="拓扑图（含IP规划）"></a>拓扑图（含IP规划）</h3><ul><li><p>配置任务<br>按照拓扑图要求配置IP地址，手动添加构建路由表，并在路由器R1和R2间实现静态路由的<strong>负载分担（到相同目的地址的下一跳不同，但优先级相同；到目的地的流量将均匀分布）</strong>，在路由器R2和R3间实现静态路由的<strong>主备路由备份（到相同目的地址的下一跳和优先级都不同，优先级高的为主，低的为备）</strong>，最终实现PC1和PC2的互相通信。</p></li><li><p>配置工具<br>华为网络设备仿真平台<strong>eNSP</strong></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTMyODQwZTJmNzdhZjQxZjIucG5n" alt="静态路由表的配置" title>                </div>                <div class="image-caption">静态路由表的配置</div>            </figure><h3 id="配置步骤（含完整指令）"><a href="#配置步骤（含完整指令）" class="headerlink" title="配置步骤（含完整指令）"></a>配置步骤（含完整指令）</h3><p>首先，配置主机PC1、PC2的IP信息很简单（留意网关就好），比如PC1就这样：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWY4Y2RjMGEzOGRlN2U5YjQucG5n" alt="配置主机PC1" title>                </div>                <div class="image-caption">配置主机PC1</div>            </figure></p><p>然后，需要配置的是R1、R2、R3、R4的各个端口所分配的IP地址，以R1为例，需要配置的有Eth0/0/0（192.168.1.2/24）、Eth0/0/1（10.1.1.1/30）、G0/0/0（10.1.2.1/30）这三个端口。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R1</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">Eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">17</span><span class="string">:11:56-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">17</span><span class="string">:12:02-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">Eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">17</span><span class="string">:14:34-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">17</span><span class="string">:14:42-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">17</span><span class="string">:21:12-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">17</span><span class="string">:21:13-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]display</span> <span class="string">ip</span> <span class="string">routing-table</span>  <span class="comment"># 查询一下当前的路由表中有哪些表项</span></span><br><span class="line"><span class="attr">Route Flags:</span> <span class="string">R</span> <span class="bullet">-</span> <span class="string">relay,</span> <span class="string">D</span> <span class="bullet">-</span> <span class="string">download</span> <span class="string">to</span> <span class="string">fib</span></span><br><span class="line"><span class="string">------------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">Routing Tables:</span> <span class="string">Public</span></span><br><span class="line">         <span class="attr">Destinations : 8        Routes :</span> <span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="string">Destination/Mask</span>    <span class="string">Proto</span>   <span class="string">Pre</span>  <span class="string">Cost</span>      <span class="string">Flags</span> <span class="string">NextHop</span>         <span class="string">Interface</span></span><br><span class="line"></span><br><span class="line">       <span class="number">10.1</span><span class="number">.1</span><span class="number">.0</span><span class="string">/30</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>        <span class="string">Ethernet0/0/1</span></span><br><span class="line">       <span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span><span class="string">/32</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>       <span class="string">Ethernet0/0/1</span></span><br><span class="line">       <span class="number">10.1</span><span class="number">.2</span><span class="number">.0</span><span class="string">/30</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>        <span class="string">GigabitEthernet</span></span><br><span class="line"><span class="number">0</span><span class="string">/0/0</span></span><br><span class="line">       <span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span><span class="string">/32</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>       <span class="string">GigabitEthernet</span></span><br><span class="line"><span class="number">0</span><span class="string">/0/0</span></span><br><span class="line">      <span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/8</span>   <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>       <span class="string">InLoopBack0</span></span><br><span class="line">      <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">/32</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>       <span class="string">InLoopBack0</span></span><br><span class="line">    <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span><span class="string">/24</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span>     <span class="string">Ethernet0/0/0</span></span><br><span class="line">    <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span><span class="string">/32</span>  <span class="string">Direct</span>  <span class="number">0</span>    <span class="number">0</span>           <span class="string">D</span>   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>       <span class="string">Ethernet0/0/0</span></span><br></pre></td></tr></table></figure><p>类似地方法不断操作，可以完成R1、R1、R2、R3、R4的各个端口IP地址的配置。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R2</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.1</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:28:03-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:28:05-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.2</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:28:32-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:28:35-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:28:52-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:28:55-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">g0/0/1</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:29:09-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[3]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:29:15-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">4</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/1]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R3</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.3</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:31:29-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:31:35-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.4</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:31:59-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:32:05-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">g0/0/0</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.5</span><span class="number">.1</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:32:27-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[2]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">GigabitEthernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:32:35-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-GigabitEthernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R4</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">Eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">10.1</span><span class="number">.5</span><span class="number">.2</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:33:47-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:33:55-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]q</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">Eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:34:13-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span><span class="string">:34:15-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]q</span></span><br><span class="line"><span class="string">[Huawei]</span></span><br></pre></td></tr></table></figure><p>接下来，需要在各个路由器上添加路由表信息，配置任务只需要我们“打通”PC1和PC2之间的数据通信，那么这里的会我偷个懒，用至少的配置步骤添加路由，过程如下：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys  #R1</span><br><span class="line">Enter<span class="built_in"> system </span>view, return<span class="built_in"> user </span>view with Ctrl+Z.</span><br><span class="line">[Huawei]ip route-static 192.168.2.1 24 10.1.2.2  #添加两条静态路由 负载分担</span><br><span class="line">Info: The destination<span class="built_in"> address </span><span class="keyword">and</span> mask of the configured static<span class="built_in"> route </span>mismatched</span><br><span class="line">, <span class="keyword">and</span> the static<span class="built_in"> route </span>192.168.2.0/24 was generated.</span><br><span class="line">Jul 25 2019 18:41:35-08:00 Huawei DS/4/DATASYNC_CFGCHANGE:OID 1.3.6.1.4.1.2011.5.25.191.3.1 configurations have been changed. The current change number is 4, the change loop count is 0, <span class="keyword">and</span> the maximum number of records is 4095.</span><br><span class="line">[Huawei]ip route-static 192.168.2.1 24 10.1.1.2  #添加两条静态路由 负载分担</span><br><span class="line">Info: The destination<span class="built_in"> address </span><span class="keyword">and</span> mask of the configured static<span class="built_in"> route </span>mismatched</span><br><span class="line">, <span class="keyword">and</span> the static<span class="built_in"> route </span>192.168.2.0/24 was generated.</span><br><span class="line">Jul 25 2019 18:42:25-08:00 Huawei DS/4/DATASYNC_CFGCHANGE:OID 1.3.6.1.4.1.2011.5.25.191.3.1 configurations have been changed. The current change number is 5, the change loop count is 0, <span class="keyword">and</span> the maximum number of records is 4095.</span><br><span class="line">[Huawei]</span><br></pre></td></tr></table></figure></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys  #R2</span><br><span class="line">Enter system view, <span class="keyword">return</span> user view with Ctrl+Z.</span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.2</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.3</span><span class="number">.2</span> preference <span class="number">100</span>  #添加主/备静态路由 备</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">47</span>:<span class="number">26</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">5</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.2</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.4</span><span class="number">.2</span> preference <span class="number">60</span>  #添加主/备静态路由 主</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">51</span>:<span class="number">26</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">6</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.1</span><span class="number">.1</span>   #添加两条静态路由 负载分担</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">53</span>:<span class="number">16</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">7</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.2</span><span class="number">.1</span>   #添加两条静态路由 负载分担</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">53</span>:<span class="number">36</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">8</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys  #R3</span><br><span class="line">Enter system view, <span class="keyword">return</span> user view with Ctrl+Z.</span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.2</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.5</span><span class="number">.2</span>  #添加一条静态路由</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">57</span>:<span class="number">46</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">4</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.3</span><span class="number">.1</span> preference <span class="number">100</span>  #添加主/备静态路由 备</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">58</span>:<span class="number">26</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">5</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]ip route-static <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span> <span class="number">24</span> <span class="number">10.1</span><span class="number">.4</span><span class="number">.1</span> preference <span class="number">60</span>  #添加主/备静态路由 主</span><br><span class="line">Info: The destination address <span class="keyword">and</span> mask of the configured static route mismatched</span><br><span class="line">, <span class="keyword">and</span> the static route <span class="number">192.168</span><span class="number">.1</span><span class="number">.0</span>/<span class="number">24</span> was generated.</span><br><span class="line">Jul <span class="number">25</span> <span class="number">2019</span> <span class="number">18</span>:<span class="number">58</span>:<span class="number">56</span><span class="number">-08</span>:<span class="number">00</span> Huawei DS/<span class="number">4</span>/DATASYNC_CFGCHANGE:OID <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> configurations have been changed. The current change number <span class="keyword">is</span> <span class="number">6</span>, the change loop count <span class="keyword">is</span> <span class="number">0</span>, <span class="keyword">and</span> the maximum number of records <span class="keyword">is</span> <span class="number">4095.</span></span><br><span class="line">[Huawei]</span><br></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;sys  #R4</span><br><span class="line">Enter<span class="built_in"> system </span>view, return<span class="built_in"> user </span>view with Ctrl+Z.</span><br><span class="line">[Huawei]ip route-static 192.168.1.1 24 10.1.5.1    #添加一条静态路由</span><br><span class="line">Info: The destination<span class="built_in"> address </span><span class="keyword">and</span> mask of the configured static<span class="built_in"> route </span>mismatched</span><br><span class="line">, <span class="keyword">and</span> the static<span class="built_in"> route </span>192.168.1.0/24 was generated.</span><br><span class="line">[Huawei]</span><br><span class="line">Jul 25 2019 19:01:36-08:00 Huawei DS/4/DATASYNC_CFGCHANGE:OID 1.3.6.1.4.1.2011.5.25.191.3.1 configurations have been changed. The current change number is 3, the change loop count is 0, <span class="keyword">and</span> the maximum number of records is 4095.</span><br><span class="line">[Huawei]</span><br></pre></td></tr></table></figure><p>经过上面的路由配置，我们的主机PC1和PC2应当可以就互相通信了！</p><h3 id="结果验证"><a href="#结果验证" class="headerlink" title="结果验证"></a>结果验证</h3><ul><li><p>ping验证（PC1 上 ping PC2）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;<span class="built_in">ping</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Ping</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: <span class="number">32</span> data bytes, Press Ctrl_C to <span class="built_in">break</span></span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">1</span> ttl=<span class="number">124</span> <span class="built_in">time</span>=<span class="number">219</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">2</span> ttl=<span class="number">124</span> <span class="built_in">time</span>=<span class="number">156</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">3</span> ttl=<span class="number">124</span> <span class="built_in">time</span>=<span class="number">187</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">4</span> ttl=<span class="number">124</span> <span class="built_in">time</span>=<span class="number">187</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">5</span> ttl=<span class="number">124</span> <span class="built_in">time</span>=<span class="number">187</span> ms</span><br><span class="line"></span><br><span class="line">--- <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span> <span class="built_in">ping</span> statistics ---</span><br><span class="line">  <span class="number">5</span> packet(s) transmitted</span><br><span class="line">  <span class="number">5</span> packet(s) received</span><br><span class="line">  <span class="number">0</span>.<span class="number">00</span>% packet loss</span><br><span class="line">  round-trip min/avg/max = <span class="number">156</span>/<span class="number">187</span>/<span class="number">219</span> ms</span><br></pre></td></tr></table></figure></li><li><p>tracert验证<br>很显然，这同我们所期望的路由转发路径是一致的！主要看R2-R3这一段转发，我们配置了主备路由备份，转发路径必须沿着R2的GE0/0/1（10.1.4.1/30） -&gt; R3的Eth0/0/1（10.1.4.2/30） 转发！</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;tracert <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">traceroute to <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>, <span class="number">8</span> hops max</span><br><span class="line">(ICMP), press Ctrl+C to stop</span><br><span class="line"> <span class="number">1</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">2</span>   <span class="number">15</span> ms  <span class="number">31</span> ms  <span class="number">32</span> ms</span><br><span class="line"> <span class="number">2</span>  <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span>   <span class="number">93</span> ms  <span class="number">79</span> ms  <span class="number">62</span> ms</span><br><span class="line"> <span class="number">3</span>  <span class="number">10</span>.<span class="number">1</span>.<span class="number">4</span>.<span class="number">2</span>   <span class="number">94</span> ms  <span class="number">94</span> ms  <span class="number">125</span> ms</span><br><span class="line"> <span class="number">4</span>  <span class="number">10</span>.<span class="number">1</span>.<span class="number">5</span>.<span class="number">2</span>   <span class="number">140</span> ms  <span class="number">125</span> ms  <span class="number">125</span> ms</span><br><span class="line"> <span class="number">5</span>    *<span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>   <span class="number">156</span> ms  <span class="number">188</span> ms</span><br></pre></td></tr></table></figure></li><li><p>查看路由表情况</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[Huawei]display ip routing-table</span><br><span class="line">Route Flags: R - relay, D - download to fib</span><br><span class="line">------------------------------------------------------------------------------</span><br><span class="line">Routing Tables: Public</span><br><span class="line">         Destinations : <span class="number">12</span>       Routes : <span class="number">13</span></span><br><span class="line"></span><br><span class="line">Destination/Mask    Proto   Pre  Cost      Flags NextHop         Interface</span><br><span class="line"></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">1</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">1</span>.<span class="number">2</span>        Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">1</span>.<span class="number">2</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span>        Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span>        GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">3</span>.<span class="number">1</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">4</span>.<span class="number">0</span>/<span class="number">30</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">10</span>.<span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span>        GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">       <span class="number">10</span>.<span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">      <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>/<span class="number">8</span>   Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       InLoopBack0</span><br><span class="line">      <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">32</span>  Direct  <span class="number">0</span>    <span class="number">0</span>           D   <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>       InLoopBack0</span><br><span class="line">    <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">0</span>/<span class="number">24</span>  Static  <span class="number">60</span>   <span class="number">0</span>          <span class="built_in">RD</span>   <span class="number">10</span>.<span class="number">1</span>.<span class="number">1</span>.<span class="number">1</span>        Ethernet0/<span class="number">0</span>/<span class="number">0</span></span><br><span class="line">                    Static  <span class="number">60</span>   <span class="number">0</span>          <span class="built_in">RD</span>   <span class="number">10</span>.<span class="number">1</span>.<span class="number">2</span>.<span class="number">1</span>        Ethernet0/<span class="number">0</span>/<span class="number">1</span></span><br><span class="line">    <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">0</span>/<span class="number">24</span>  Static  <span class="number">60</span>   <span class="number">0</span>          <span class="built_in">RD</span>   <span class="number">10</span>.<span class="number">1</span>.<span class="number">4</span>.<span class="number">2</span>        GigabitEthernet</span><br><span class="line"><span class="number">0</span>/<span class="number">0</span>/<span class="number">1</span></span><br></pre></td></tr></table></figure></li></ul><p>这里其实有一个问题，我们在路由器R2上给目的地址<code>192.168.1.1/24</code>即主机PC1定义了两条静态路由负载分担，这在上面的路由表中有体现出来，没什么问题。但同时我们也有在给目的地址<code>192.168.2.1/24</code>即主机PC2定义了两条主/备静态路由（优先级不同），不过在路由表中没有这样的两条记录。</p><p>其实，这很好理解，对于这种主/备路由备份模式，由于我们给“主用路由表项”定义的优先级始终最高，所以它应当是处于<strong>Active</strong>状态的，根本轮不到那条“备用路由表项”，因此它的状态应当是<strong>Inactive</strong>的！</p><p>那么，既然<code>display ip routing-table</code>这条命令无法查看到那条Inactive状态的路由表项，我们就得另想办法，这里介绍这样几条指令——<code>display ip routing-table protocol static</code>，<code>display ip routing-table verbose</code>以及<code>display current-configuration</code>!</p><ul><li><code>display ip routing-table protocol static</code>这条指令表示查看协议类型为static的所有路由表项（包括Inactive状态的），类似的，查看协议类型为ospf的所有路由表项，就是用<code>display ip routing-table protocol ospf</code>。</li><li><code>display ip routing-table verbose</code>这条指令可以查看路由表的详细信息（也就是包括所有路由表项）。</li><li><code>display current-configuration</code>显示当前配置信息。</li></ul><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fjave_f%2F11431480" target="_blank" rel="noopener">《计算机网络》谢希仁. pdf版</a></li><li><a href="https://www.jianshu.com/p/7fbaa718fe0e" target="_blank" rel="noopener">多区域OSPF动态路由协议的配置</a></li><li><a href="https://www.jianshu.com/p/34fb66b9491b" target="_blank" rel="noopener">某些数通基本知识梳理</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="负载分担" scheme="https://zhouie.cn/tags/%E8%B4%9F%E8%BD%BD%E5%88%86%E6%8B%85/"/>
    
      <category term="主备路由备份" scheme="https://zhouie.cn/tags/%E4%B8%BB%E5%A4%87%E8%B7%AF%E7%94%B1%E5%A4%87%E4%BB%BD/"/>
    
      <category term="静态路由" scheme="https://zhouie.cn/tags/%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 VRRP虚拟路由冗余协议的配置</title>
    <link href="https://zhouie.cn/posts/201907251/"/>
    <id>https://zhouie.cn/posts/201907251/</id>
    <published>2019-07-25T01:15:15.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="VRRP协议简述"><a href="#VRRP协议简述" class="headerlink" title="VRRP协议简述"></a>VRRP协议简述</h3><p>VRRP（虚拟路由冗余协议）：<strong>通过把几台路由设备联合组成一台虚拟路由设备，将虚拟路由设备的IP地址作为用户的默认网关地址实现与外部的通讯。</strong>当网关设备发生故障时，VRRP协议能够<strong>快速选举新的网关设备</strong>承担数据流量，保障网络的可靠通信。</p><p>Master路由器的选举：首先比较每台路由器的优先级，优先级大的成为Master路由器，优先级相同的话，就比较接口IP地址，IP地址大的成为Master路由器。<strong>Master路由器会周期性的发送Advertisement报文（组播），如果Backup路由器在规定的间隔时间内没收到Master路由器发来的Advertisement报文，则认为Master路由器“挂掉”了，那么就会进行新一轮的选举。</strong></p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTY0YmIxYzhmMjc5MTg5YmEucG5n" alt="VRRP的三种状态：Initialize、Master和Backup" title>                </div>                <div class="image-caption">VRRP的三种状态：Initialize、Master和Backup</div>            </figure><blockquote><p> VRRP有三种状态：Initialize , Master, Backup</p><ul><li><strong>Initialize 状态</strong>：<br>系统刚启动VRRP的状态；在此状态，不处理VRRP报文。</li><li><strong>Master状态</strong>：<br>当路由器处于Master状态时，路由器会处理：<br> 1、每隔1s发送VRRP组播报文，来报告自己的状态。<br> 2、响应对虚拟IP地址的ARP请求，并且响应的是虚拟MAC地址，而不是接口的真实MAC地址。<br> 3、转发目的MAC是虚拟MAC的IP报文。<br> 4、如果是虚拟IP拥有者，接受目的IP地址是虚拟IP地址的报文，否则丢弃。<br> 5、当接受到优先级大的VRRP报文时，变成backup；接口shutdown后，变为initialize状态。</li><li><strong>Backup状态</strong>：<br>当路由器处于backup状态时，路由器将：<br>  1、监听Master发送的VRRP报文，如果在3个周期内不能接受到，变为master，并发送免费ARP（为什么）。<br>  2、不响应对虚拟IP地址的ARP请求。<br>  3、丢弃目的MAC为虚拟MAC的IP报文。<br>  4、丢弃目的IP为虚拟IP地址的报文。</li></ul></blockquote><h3 id="拓扑图（含IP规划）"><a href="#拓扑图（含IP规划）" class="headerlink" title="拓扑图（含IP规划）"></a>拓扑图（含IP规划）</h3><ul><li><p>配置任务<br>按照拓扑图要求配置IP地址，配置VRRP虚拟路由冗余协议（将R1的eth0/0/0、R2的eth0/0/0加入到vrrid  1中并设置好优先级选择R1作为主用路由器、将R1的eth0/0/1、R2的eth0/0/1加入到vrrid 2中并设置好优先级选择R2作为主用路由器），并最终实现PC1和PC3的互相通信，且PC1-&gt;PC3所使用的网关设备是R1，PC3-&gt;PC1所使用的网关设备是R2。</p></li><li><p>配置工具<br>华为网络设备仿真平台<strong>eNSP</strong></p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTc3ZGYwMDNkZmVmYTkyNzAucG5n" alt="VRRP虚拟路由冗余协议的配置" title>                </div>                <div class="image-caption">VRRP虚拟路由冗余协议的配置</div>            </figure><h3 id="配置步骤（含完整指令）"><a href="#配置步骤（含完整指令）" class="headerlink" title="配置步骤（含完整指令）"></a>配置步骤（含完整指令）</h3><p>首先，配置主机PC1、PC2、PC3的IP信息很简单（注意，我们这里准备配置VRRP协议，所以这个网关地址就填那个“虚拟”的IP地址），比如PC1就这样：<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://upload-images.jianshu.io/upload_images/9934558-13c54d899c2e6fd7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="配置主机PC1" title>                </div>                <div class="image-caption">配置主机PC1</div>            </figure></p><p>然后，需要配置的是R1、R2的各个端口所分配的IP地址，以R1为例，需要配置的有Eth0/0/0（192.168.1.2/24）、Eth0/0/1（192.168.2.2/24）端口。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R1</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:47:40-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:47:42-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.2</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:50:59-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:51:02-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;Huawei&gt;sys</span>  <span class="comment">#R2</span></span><br><span class="line"><span class="string">Enter</span> <span class="string">system</span> <span class="string">view,</span> <span class="string">return</span> <span class="string">user</span> <span class="string">view</span> <span class="string">with</span> <span class="string">Ctrl+Z.</span></span><br><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.3</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:51:50-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[0]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/0</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:51:52-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">1</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]ip</span> <span class="string">address</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.3</span> <span class="number">24</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:52:05-08:00</span> <span class="string">Huawei</span> <span class="string">%%01IFNET/4/LINK_STATE(l)[1]:The</span> <span class="string">line</span> <span class="string">protocol</span> <span class="string">IP</span> <span class="string">on</span> <span class="string">the</span> <span class="string">interface</span> <span class="string">Ethernet0/0/1</span> <span class="string">has</span> <span class="string">entered</span> <span class="string">the</span> <span class="string">UP</span> <span class="string">state.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">15</span><span class="string">:52:12-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">2</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br></pre></td></tr></table></figure><p>再然后，就具体在路由器上配置vrrp协议：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span>   <span class="comment">#R1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]vrrp</span> <span class="string">vrid</span> <span class="number">1</span> <span class="string">virtual-ip</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:19:10-08:00</span> <span class="string">Huawei</span> <span class="string">%%01VRRP/4/STATEWARNINGEXTEND(l)[4]:Virtual</span> <span class="string">Router</span> <span class="string">state</span> <span class="string">BACKUP</span> <span class="string">changed</span> <span class="string">to</span> <span class="string">MASTER,</span> <span class="string">because</span> <span class="string">of</span> <span class="string">protocol</span> <span class="string">timer</span> <span class="string">expired.</span> <span class="string">(Interface=Ethernet0/0/0,</span> <span class="string">VrId=1,</span> <span class="string">InetType=IPv4)</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:19:13-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">10</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]vrrp</span> <span class="string">vrid</span> <span class="number">1</span> <span class="string">priority</span> <span class="number">120</span>  <span class="comment">#设置优先级（默认优先级为100，所以120这个就会在选举中成为主用路由）</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:19:33-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">11</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]vrrp</span> <span class="string">vrid</span> <span class="number">1</span> <span class="string">preempt-mode</span> <span class="string">?</span></span><br><span class="line">  <span class="string">disable</span>  <span class="string">Cancel</span> <span class="string">current</span> <span class="string">configuration</span></span><br><span class="line">  <span class="string">timer</span>    <span class="string">Specify</span> <span class="string">timer</span></span><br><span class="line"></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]vrrp</span> <span class="string">vrid</span> <span class="number">1</span> <span class="string">preempt-mode</span> <span class="string">timer</span> <span class="string">delay</span> <span class="number">20</span>    <span class="comment">#设置抢占等待时间</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:20:23-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">12</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]vrrp</span> <span class="string">vrid</span> <span class="number">1</span> <span class="string">track</span> <span class="string">interface</span> <span class="string">eth0/0/1</span> <span class="string">reduced</span> <span class="number">30</span>  <span class="comment"># 监控上层端口状态调整优先级</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:20:53-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">13</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]vrrp</span> <span class="string">vrid</span> <span class="number">2</span> <span class="string">virtual-ip</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.254</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:24:13-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">14</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:24:15-08:00</span> <span class="string">Huawei</span> <span class="string">%%01VRRP/4/STATEWARNINGEXTEND(l)[5]:Virtual</span> <span class="string">Router</span> <span class="string">state</span> <span class="string">BACKUP</span> <span class="string">changed</span> <span class="string">to</span> <span class="string">MASTER,</span> <span class="string">because</span> <span class="string">of</span> <span class="string">protocol</span> <span class="string">timer</span> <span class="string">expired.</span> <span class="string">(Interface=Ethernet0/0/1,</span> <span class="string">VrId=2,</span> <span class="string">InetType=IPv4)</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br></pre></td></tr></table></figure><blockquote><p>针对这条指令<code>vrrp vrid 1 preempt-mode timer delay 20   #设置抢占等待时间</code></p><p>举个例子，R1的Eth0/0/0地址192.168.1.2/24 和 R2的Eth0/0/0地址192.168.1.3/24作为下层PC1的待选择网关，根据我们上面的拓扑图设置，R1的Eth0/0/0地址192.168.1.2/24会被选举为Master状态，也就是说下层PC1、PC2的网关地址会是192.168.1.2/24。<br>假设我们的R1因为故障宕机了，那么下层的PC1、PC2的网关地址岂不是会出错？当然了，VRRP自然不会容忍这种情况，即VRRP机制会让处于Master状态的R1不断地向所有处于Backup状态的R2间隔性发生VRRP组播报文，这样在R1宕机或是出现其他故障问题后，R2就会发现在一段时间内它都无法收到R1的VRRP组播报文，这样它就会认为R1已经“离开”了，然后发起新一轮的“选举”。<br>那么，这里的<strong>抢占等待时间</strong>，也就是说，R1在20s内没有发送VRRP组播报文（即R2在20s内没有收到VRRP组播报文），才会发起新的“选举”。（默认这个延迟等待时间是0s）<br>试想一下，我们这里为什么不推荐直接采用默认配置（0s）呢？</p></blockquote><blockquote><p>再来谈谈这条指令<code>vrrp vrid 1 track interface eth0/0/1 reduced 30  # 监控上层端口状态调整优先级</code>!<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWFhOWFlNmE4MDllZjc4ZjQucG5n" alt="分析这种情况" title>                </div>                <div class="image-caption">分析这种情况</div>            </figure><br>上面图中很明显地，标明VRRP协议所“选举”出来的Master状态的R1的上层链路出现故障，这时候，R1的Eth0/0/0端口的IP地址就不能再担当下层PC1、PC2的网关IP地址了，这在本拓扑图中很明显吧。VRRP协议有这样的规定——我可以监控R1的所有（或特定的某个）上层端口（可以理解为“非网关”端口），每当我探查到其中一个出现链路故障，我就给这个参与“选举”的R1降低优先级。<br>试想一下，我们为什么不对出现上层链路不通的路由器直接做“剥夺选举资格”的操作？</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">[Huawei]int</span> <span class="string">eth0/0/0</span>   <span class="comment">#R2</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]vrrp</span> <span class="string">vrid</span> <span class="number">1</span> <span class="string">virtual-ip</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.254</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:27:53-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">3</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/0]int</span> <span class="string">eth0/0/1</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]vrrp</span> <span class="string">vrid</span> <span class="number">2</span> <span class="string">virtual-ip</span> <span class="number">192.168</span><span class="number">.2</span><span class="number">.254</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:28:33-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">4</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]vrrp</span> <span class="string">vrid</span> <span class="number">2</span> <span class="string">priority</span> <span class="number">120</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:28:45-08:00</span> <span class="string">Huawei</span> <span class="string">%%01VRRP/4/STATEWARNINGEXTEND(l)[0]:Virtual</span> <span class="string">Router</span> <span class="string">state</span> <span class="string">BACKUP</span> <span class="string">changed</span> <span class="string">to</span> <span class="string">MASTER,</span> <span class="string">because</span> <span class="string">of</span> <span class="string">priority</span> <span class="string">calculation.</span> <span class="string">(Interface=Ethernet0/0/1,</span> <span class="string">VrId=2,</span> <span class="string">InetType=IPv4)</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:28:53-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">5</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]vrrp</span> <span class="string">vrid</span> <span class="number">2</span> <span class="string">preempt-mode</span> <span class="string">timer</span> <span class="string">delay</span> <span class="number">20</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:29:13-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">6</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]vrrp</span> <span class="string">vrid</span> <span class="number">2</span> <span class="string">track</span> <span class="string">interface</span> <span class="string">eth0/0/0</span> <span class="string">reduced</span> <span class="number">30</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br><span class="line"><span class="string">Jul</span> <span class="number">26</span> <span class="number">2019</span> <span class="number">16</span><span class="string">:29:43-08:00</span> <span class="string">Huawei</span> <span class="string">DS/4/DATASYNC_CFGCHANGE:OID</span> <span class="number">1.3</span><span class="number">.6</span><span class="number">.1</span><span class="number">.4</span><span class="number">.1</span><span class="number">.2011</span><span class="number">.5</span><span class="number">.25</span><span class="number">.191</span><span class="number">.3</span><span class="number">.1</span> <span class="string">configurations</span> <span class="string">have</span> <span class="string">been</span> <span class="string">changed.</span> <span class="string">The</span> <span class="string">current</span> <span class="string">change</span> <span class="string">number</span> <span class="string">is</span> <span class="number">7</span><span class="string">,</span> <span class="string">the</span> <span class="string">change</span> <span class="string">loop</span> <span class="string">count</span> <span class="string">is</span> <span class="number">0</span><span class="string">,</span> <span class="string">and</span> <span class="string">the</span> <span class="string">maximum</span> <span class="string">number</span> <span class="string">of</span> <span class="string">records</span> <span class="string">is</span> <span class="number">4095</span><span class="string">.</span></span><br><span class="line"><span class="string">[Huawei-Ethernet0/0/1]</span></span><br></pre></td></tr></table></figure><h3 id="结果验证"><a href="#结果验证" class="headerlink" title="结果验证"></a>结果验证</h3><ul><li>ping验证（PC1上ping PC3）</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;<span class="built_in">ping</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Ping</span> <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: <span class="number">32</span> data bytes, Press Ctrl_C to <span class="built_in">break</span></span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">1</span> ttl=<span class="number">127</span> <span class="built_in">time</span>=<span class="number">187</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">2</span> ttl=<span class="number">127</span> <span class="built_in">time</span>=<span class="number">78</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">3</span> ttl=<span class="number">127</span> <span class="built_in">time</span>=<span class="number">94</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">4</span> ttl=<span class="number">127</span> <span class="built_in">time</span>=<span class="number">78</span> ms</span><br><span class="line">From <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>: bytes=<span class="number">32</span> seq=<span class="number">5</span> ttl=<span class="number">127</span> <span class="built_in">time</span>=<span class="number">94</span> ms</span><br><span class="line"></span><br><span class="line">--- <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span> <span class="built_in">ping</span> statistics ---</span><br><span class="line">  <span class="number">5</span> packet(s) transmitted</span><br><span class="line">  <span class="number">5</span> packet(s) received</span><br><span class="line">  <span class="number">0</span>.<span class="number">00</span>% packet loss</span><br><span class="line">  round-trip min/avg/max = <span class="number">78</span>/<span class="number">106</span>/<span class="number">187</span> ms</span><br></pre></td></tr></table></figure><ul><li>tracert验证</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;tracert <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>  #PC1-&gt;PC3的路由追踪</span><br><span class="line">-</span><br><span class="line">YI7</span><br><span class="line">';]=`</span><br><span class="line">traceroute to <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>, <span class="number">8</span> hops max</span><br><span class="line">(ICMP), press Ctrl+C to stop</span><br><span class="line"> <span class="number">1</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">2</span>   <span class="number">78</span> ms  <span class="number">47</span> ms  <span class="number">46</span> ms</span><br><span class="line"></span><br><span class="line"> <span class="number">2</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">1</span>   <span class="number">94</span> ms  <span class="number">78</span> ms  <span class="number">94</span> ms</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PC&gt;tracert <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">4</span>   #PC3-&gt;PC1的路由追踪</span><br><span class="line"></span><br><span class="line">traceroute to <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">4</span>, <span class="number">8</span> hops max</span><br><span class="line">(ICMP), press Ctrl+C to stop</span><br><span class="line"> <span class="number">1</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">2</span>.<span class="number">3</span>   <span class="number">78</span> ms  <span class="number">47</span> ms  <span class="number">47</span> ms</span><br><span class="line"> <span class="number">2</span>  <span class="number">192</span>.<span class="number">168</span>.<span class="number">1</span>.<span class="number">4</span>   <span class="number">78</span> ms  <span class="number">94</span> ms  <span class="number">93</span> ms</span><br></pre></td></tr></table></figure><h3 id="VRRP与BFD"><a href="#VRRP与BFD" class="headerlink" title="VRRP与BFD"></a>VRRP与BFD</h3><p>当R1或R1到R2间链路出现故障时，VRRP报文“重新选举”需要一定的协商周期。为了实现链路故障时快速切换，在链路中部署了BFD链路检测机制，实现当主用接口或者链路出现故障时，Backup状态设备迅速切换为Master状态，承担网络流量，以减少故障对业务传输的影响。</p><blockquote><p>BFD：(Bidirectional Forwarding Detection，双向转发检测)协议提供一种轻负载、快速检测两台邻接路由器/交换机之间转发路径连通状态的方法，它是一个简单的“Hello”协议，在很多方面，它与那些著名的路由协议的邻居检测部分相似。之所以被称为双向，是因为BFD协议通过三次握手机制，能提供链路来回两个方向的连通性检测。</p></blockquote><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fjave_f%2F11431480" target="_blank" rel="noopener">《计算机网络》谢希仁. pdf版</a></li><li><a href="http://www.kokojia.com/article/28421.html" target="_blank" rel="noopener">简述BFD原理与配置</a></li><li><a href="https://blog.51cto.com/12184141/2418056" target="_blank" rel="noopener">VRRP与BFD联动</a></li><li><a href="https://blog.51cto.com/12184141/2417416" target="_blank" rel="noopener">华为VRRP综合配置</a></li><li><a href="https://blog.51cto.com/12184141/2409343" target="_blank" rel="noopener">华为BFD可靠性配置</a></li><li><a href="https://www.jianshu.com/p/34fb66b9491b" target="_blank" rel="noopener">某些数通基本知识梳理</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="VRRP" scheme="https://zhouie.cn/tags/VRRP/"/>
    
      <category term="BFD" scheme="https://zhouie.cn/tags/BFD/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 IP编址分类和子网划分</title>
    <link href="https://zhouie.cn/posts/201907221/"/>
    <id>https://zhouie.cn/posts/201907221/</id>
    <published>2019-07-22T10:25:35.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h3><p>IP地址唯一标示一台网络设备</p><blockquote><p>IP地址：<code>192.168.1.11</code><br>-&gt; 经二进制转化：<code>1 1 0 0 0 0 0 0 . 1 0 1 0 1 0 0 0.0 0 0 0 0 0 0 1.0 0 0 0 1 0 1 1</code></p></blockquote><h4 id="IP地址组成"><a href="#IP地址组成" class="headerlink" title="IP地址组成"></a>IP地址组成</h4><ul><li><p>网络部分（后来会从主机部分划出几位子网部分，也算网络部分）<br>IP地址的网络部分称为网络地址，网络地址用于唯一地标识一个网段，或者若干网段的聚合，同一网段中的网络设备有同样的网络地址。</p></li><li><p>主机部分<br>IP地址的主机部分称为主机地址，主机地址用于唯一的标识同一网段内的网络设备。</p></li></ul><h4 id="IP地址分类"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>IP地址分类</h4><p>常见的IP地址分为IPv4与IPv6两大类，我们这里只讨论32位的IPv4地址。</p><p>为了和已存在的IP地址空间及IP数据报兼容，对IP地址的定义在1981年的RFC 791进行了修改。修改后的IP地址共有三种网络地址长度不同的单播地址（即A、B、C类地址）。如下所示：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWNlZDdjOGE4Y2Y0Y2VmZjAucG5n" alt="把IP地址分为A、B、C、D、E五类" title>                </div>                <div class="image-caption">把IP地址分为A、B、C、D、E五类</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWUwZjI2YWNiYjc3NDhkNDMucG5n" alt="每个类别所用的地址范围" title>                </div>                <div class="image-caption">每个类别所用的地址范围</div>            </figure><blockquote><p>注意一点：我们这里计算可用的主机地址时，总是2^N - 2，其中，N是主机地址的位数，减2是因为第一个（即主机地址全0）和最后一个地址（即主机地址全1）都是无效的。因此，对于用8位来表示主机地址的C类地址来说，最多可用的主机数就是2^N - 2 = 254。（后面也有详讲）</p></blockquote><p>其中，D类地址通常作为组播地址。E类地址保留用于科学研究。我们经常用到的是A、B、C三类地址。</p><h4 id="私有IP地址"><a href="#私有IP地址" class="headerlink" title="私有IP地址"></a>私有IP地址</h4><p>私有IP地址可以理解为本地局域网上的IP，私有IP地址范围：</p><ul><li>A: <code>10.0.0.0</code>~<code>10.255.255.255</code> 即<code>10.0.0.0/8</code></li><li>B: <code>172.16.0.0</code>~<code>172.31.255.255</code>即<code>172.16.0.0/12</code></li><li>C: <code>192.168.0.0</code>~<code>192.168.255.255</code> 即<code>192.168.0.0/16</code></li></ul><p>这些地址是不会被Internet分配的，它们在Internet上也不会被路由，虽然它们不能直接和Internet网连接，但通过NAT（Network Address Translation，网络地址转换）技术手段把私有IP地址转换为Internet可识别的公有IP地址，仍旧可以和 Internet通讯。</p><blockquote><p>注意：现在进行IP地址规划时，我们通常在公司内部网络使用私有IP地址。比如，有些不需要与 Internet通讯的设备，如打印机、可管理集线器等可以使用这些地址，以节省IP地址资源。</p></blockquote><h4 id="特殊IP地址"><a href="#特殊IP地址" class="headerlink" title="特殊IP地址"></a>特殊IP地址</h4><p>IP地址用于唯一的标识一台网络设备，但并不是每一个IP地址都是可用的，一些特殊的IP地址被用于各种各样的其他用途，不能用于标识网络设备。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTBmNWQ0NWUzNWRhMzUxNWMucG5n" alt="特殊IP地址" title>                </div>                <div class="image-caption">特殊IP地址</div>            </figure><ul><li><p>主机部分全为“0”<br>对于主机部分全为“0”的IP地址，称为网络地址，网络地址用来标识一个网段。例如，A类地址<code>1.0.0.0</code>，私有地址<code>10.0.0.0</code>, <code>192.168.1.0</code>等。</p></li><li><p>主机部分全为“1”<br>对于主机部分全为“1”的IP地址，称为网段广播地址，广播地址用于标识一个网络的所有主机。例如，<code>10.255.255.255</code>, <code>192.168.1.255</code>等，路由器可以在<code>10.0.0.0</code>或者<code>192.168.1.0</code>等网段转发广播包。广播地址用于向本网段的所有节点发送数据包。</p></li><li><p>网络部分为127<br>对于网络部分为127的IP地址，例如<code>127.0.0.1</code>往往用于<strong>环回测试</strong>目的（环回测试是决定设备是否正常运行或是确定网络中失效节点的方式）。</p></li><li><p>全“0”的IP地址<br>全“0”的IP地址<code>0.0.0.0</code>代表所有的主机，华为Quidway系列路由器用0.0.0.0地址指定默认路由。</p></li><li><p>全“1”的IP地址<br>全“1”的IP地址<code>255.255.255.255</code>，也是广播地址（为受限广播地址”limited broadcast” destination address），但<code>255.255.255.255</code>代表所有主机，用来将一个分组以广播方式发送给本网络中的所有主机，路由器则阻挡该分组通过，将其广播功能限制在本网内部。</p></li></ul><p>从上面可以看出，每一个网段都会有一些IP地址不能用作主机IP地址。</p><p>【例1】B类网段<code>172.16.0.0</code>, 有16个主机位,因此有2^16 个IP地址，去掉一个网络地址<code>172.16.0.0</code>，一个广播地址<code>172.16.255.255</code>不能用作标识主机，那么共有2^16 -2个可用地址。</p><p>【例2】C类网段<code>192.168.1.0</code>，有8个主机位，共有2^8=256个IP地址，去掉一个网络地址<code>192.168.1.0</code>，一个广播地址<code>192.168.1.255</code>，共有254个可用主机地址。</p><p>现在，我们可以这样计算每一个网段可用主机地址：假定这个网段的主机部分位数为n，那么可用的主机地址个数为2^n-2个。</p><p>###子网掩码SM</p><h4 id="使用目的"><a href="#使用目的" class="headerlink" title="使用目的"></a>使用目的</h4><p>网络设备使用子网掩码（subnet masking）决定IP地址中哪部分为网络部分，哪部分为主机部分。</p><p>子网掩码的好处就是：<strong>不管网络有没有划分子网，只要把子网掩码和IP地址进行逐位的“与”运算（AND）即得出网络地址来。这样在路由器处理到来的分组时就可以采用同样的方法。</strong></p><p>子网掩码使用与IP地址一样的格式。子网掩码的网络部分和子网部分全都是1，主机部分全都是0。缺省状态下，如果没有进行子网划分：</p><ul><li>A类网络的子网掩码为<code>255.0.0.0</code></li><li>B类网络的子网掩码为<code>255.255.0.0</code></li><li>C类网络子网掩码为<code>255.255.255.0</code></li></ul><h4 id="变长子网掩码VLSM"><a href="#变长子网掩码VLSM" class="headerlink" title="变长子网掩码VLSM"></a>变长子网掩码VLSM</h4><p>引入子网划分的概念（<strong>子网的划分就是一个将主机部分的若干位分配到网络部分的过程</strong>）后，IPv4地址被分为三部分：<code>网络部分</code>（network）、<code>子网部分</code>（subnetwork，现在常被认为是网络部分的一部分——尽管它本来是“rest”部分的一部分）和<code>主机（host）部分</code>。</p><blockquote><p>注意：这里提到的“rest”部分就是指在没有引入子网划分时，自然状态下A、B、C、D、E类地址中的主机部分，这很好理解，毕竟子网划分来自于主机部分。</p></blockquote><p>例如，对于一个给定的A类网络：<code>10.0.0.0</code>，子网掩码：<code>255.255.0.0</code>可以将其划分为256个子网（从<code>10.0.0.0</code>到<code>10.255.0.0</code>）——第一个八位位组表示网络地址，第二个表示子网号，而最后两个表示主机部分。</p><h4 id="无类别域间路由CIDR"><a href="#无类别域间路由CIDR" class="headerlink" title="无类别域间路由CIDR"></a>无类别域间路由CIDR</h4><p>无类别域间路由是 <strong>基于可变长子网掩码（VLSM）</strong>来进行任意长度的前缀的分配的，CIDR包括：</p><ol><li>指定任意长度的前缀的可变长子网掩码技术。遵从CIDR规则的地址有一个后缀说明前缀的位数，例如：<code>192.168.0.0/16</code>。这使得对日益缺乏的IPv4地址的使用更加有效。</li><li>将多个连续的前缀聚合成超网，以及在互联网中，只要有可能，就显示为一个聚合的网络，因此在总体上可以减少路由表的表项数目。聚合使得互联网的路由表不用分为多级，并通过VLSM逆转“划分子网”的过程。</li><li>根据机构的实际需要和短期预期需要而不是分类网络中所限定的过大或过小的地址块来管理IP地址的分配的过程。</li></ol><h5 id="无类别域间路由表示法"><a href="#无类别域间路由表示法" class="headerlink" title="无类别域间路由表示法"></a>无类别域间路由表示法</h5><p>无类别域间路由（Classless Inter-Domain Routing）表示方法给出的是<code>一个地址</code>加上<code>一个斜杠</code>以及<code>网络掩码的二进制表示法中“1”的位数</code>（即网络号中和网络掩码相关的是哪些位）。</p><p>例如，<code>192.168 .1 .7/28</code>表示的是一个前28位被用作网络号的IP地址（和<code>255.255.255.240</code>所表示子网掩码的意思一样），具体来看：</p><ul><li>IP地址：<code>192.168 .1 .7</code>（11000000   10101000   00000001   00000111）</li><li><p>子网掩码：<code>255.255.255 .240</code>（11111111    11111111     11111111      11110000）</p><p>其中，子网掩码比特数：8 + 8 + 8+ 4 = 28，这个指的是子网掩码中连续1的个数。因此，便有子网掩码的一种表示方法：<code>192.168.1.7/28</code>！</p></li></ul><h5 id="前缀路由聚合"><a href="#前缀路由聚合" class="headerlink" title="前缀路由聚合"></a>前缀路由聚合</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWY4NDU2MjZhNDhkYTlmMDQucG5n" alt="无类别域间路由（CIDR）" title>                </div>                <div class="image-caption">无类别域间路由（CIDR）</div>            </figure><p>CIDR的另一个好处就是可以进行前缀路由聚合。如上图所示，一个ISP被分配了一些C类网络，<code>198.168.0.0</code>~<code>198.168.255.0</code>。这个ISP准备把这些C类网络分配给各个用户群，目前已经分配了三个C类网段给用户。如果没有实施CIDR技术，ISP的路由器的路由表中会有三条下连网段的路由条目，并且会把它通告给Internet上的路由器。</p><p>通过实施CIDR技术，我们可以在ISP的路由器上把这三条网段<code>198.168.1.0</code>，<code>198.168.2.0</code>，<code>198.168.3.0</code>汇聚成一条路由<code>198.168.0.0/16</code>。这样ISP路由器只向Internet通告<code>198.168.0.0/16</code>这一条路由，大大减少了路由表的数目。这有效地减少了要对外显示的网络数，防止了路由表爆炸，也遏制了互联网进一步扩大。</p><blockquote><p>注意，<strong>使用CIDR技术汇聚的网络地址的比特位必须是一致的</strong>，如上例所示。如果上图所示的ISP连接了一个<code>172.178.1.0</code>网段，这些网段路由将无法汇聚，无法实现CIDR技术。</p></blockquote><h3 id="了解IPv6"><a href="#了解IPv6" class="headerlink" title="了解IPv6"></a>了解IPv6</h3><p>过去通常把A类地址保留给政府机构，B类地址分配给中等规模的公司，C类地址分配给小单位。然而，随着互联网络飞速发展，再加上IP地址的浪费，IP地址已经非常紧张。</p><p>因此，相应的科研组织已研究出128位的IPv6，其IP地址数量最高可达3.402823669 × 10^38个，届时每个人家居中的每件电器，每件对象，甚至地球上每一粒沙子都可以拥有自己的IP地址。</p><p>IPv6地址为128位长，但通常写作8组，每组四个十六进制数的形式。例如：<code>2001:0db8:85a3:08d3:1319:8a2e:0370:7344</code>是一个合法的IPv6地址。</p><p>如果四个数字都是0，可以被省略。例如：<code>2001:0db8:85a3:0000:1319:8a2e:0370:7344</code>等价于<code>2001:0db8:85a3::1319:8a2e:0370:7344</code>。</p><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fjave_f%2F11431480" target="_blank" rel="noopener">《计算机网络》谢希仁. pdf版</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="IP编址" scheme="https://zhouie.cn/tags/IP%E7%BC%96%E5%9D%80/"/>
    
      <category term="CIDR" scheme="https://zhouie.cn/tags/CIDR/"/>
    
      <category term="VLSM" scheme="https://zhouie.cn/tags/VLSM/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 某些基本知识梳理</title>
    <link href="https://zhouie.cn/posts/201907211/"/>
    <id>https://zhouie.cn/posts/201907211/</id>
    <published>2019-07-21T08:45:30.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="路由环路"><a href="#路由环路" class="headerlink" title="路由环路"></a>路由环路</h3><p><strong>路由环路</strong>，就是数据包不断在这个网络传输，始终到达不了目的地，导致掉线或者网络瘫痪。</p><p>这里引用百度百科中的一个示例来理解路由环路产生的原因。</p><blockquote><p>如图所示，在网络11.4.0.0发生故障之前，所有的路由器都具有正确一致的路由表，网络是收敛的。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LThkZjY3MWU4ZWIxMjdiNTYucG5n" alt="图源百度百科" title>                </div>                <div class="image-caption">图源百度百科</div>            </figure><br>在本例中，路径开销用跳数来计算，所以，每条链路的开销是1。路由器C与网络<code>11.4.0.0</code>直连，跳数为0。路由器B经过路由器C 到达网络<code>11.4.0.0</code>，跳数为1。路由器A 经过路由器B到达网络<code>11.4.0.0</code>，跳数为2。<br>如果网络<code>11.4.0.0</code> 故障，就可能会在路由器之间产生路由环路，下面是产生路由环路的步骤：</p><ol><li>当网络<code>11.4.0.0</code> 发生故障，路由器C 最先收到故障信息，路由器C 把网络<code>11.4.0.0</code> 设为不可达，并等待更新周期到来通告这一路由变化给相邻路由器。如果，路由器B的路由更新周期在路由器C之前到来，那么路由器C就会从路由器B那里学习到去往<code>11.4.0.0</code>的新路由（实际上，这一路由已经是错误路由了）。这样路由器C的路由表中就记录了一条错误路由（经过路由器B，可去往网络<code>11.4.0.0</code>，跳数增加到2 ）。</li><li>路由器C 学习了一条错误信息后，它会把这样的路由信息再次通告给路由器B，根据通告原则，路由器B也会更新这样一条错误路由信息，认为可以通过路由器C去往网络<code>11.4.0.0</code>，跳数增加到 3 。</li><li>这样，路由器 B 认为 可以通过路由器C 去往网络<code>11.4.0.0</code>，路由器C 认为 可以通过路由器B 去往网络<code>11.4.0.0</code>，就形成了环路。（以上示例摘自百度百科）</li></ol></blockquote><p>概括来讲，<strong>解决路由环路问题的方法</strong>主要分为六种：</p><ol><li>定义最大值；</li><li>水平分割技术；</li><li>路由中毒；</li><li>反向路由中毒；</li><li>控制更新时间；</li><li>触发更新</li></ol><blockquote><p>参考阅读：</p><ol><li><a href="https://jingyan.baidu.com/article/8cdccae931fd10315413cd08.html" target="_blank" rel="noopener">如何避免多路径网络中的路由环路?</a></li><li><a href="https://baike.baidu.com/item/%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF/8975272?fr=aladdin#3" target="_blank" rel="noopener">解决路由环路问题的六种方法</a></li></ol></blockquote><h3 id="直通网线和交叉网线"><a href="#直通网线和交叉网线" class="headerlink" title="直通网线和交叉网线"></a>直通网线和交叉网线</h3><p>在学校的网络实验中也有自己动手制作<strong>直通网线</strong>，这里也算是回顾一下：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWMyY2FjNGZhMjc3YTY3YTQucG5n" alt="当时制作过程中的几个步骤" title>                </div>                <div class="image-caption">当时制作过程中的几个步骤</div>            </figure><p><strong>直通线</strong>是指一根双绞线的<strong>两端水晶头（最常见的就是RJ45水晶头）压线的标准一致</strong>，这样做出来的线叫直通线。也就是一根网线的一头是用T568A标准压的，那另一头也用T568A标准来压，或者两头都用T568B标准来做，这叫直通线。<strong>交叉线</strong>就是一根双绞线的<strong>两端水晶头压线的标准不同</strong>，一头用T568A标准做，一头用T568B标准来做，那这根线就叫交叉线。（即两个水晶头的连线交叉连接，A水晶头的1，2对应B水晶头的3，6;而A水晶头的3，6对应B水晶头的1，2。）</p><p>上面提到了两种水晶头压线的国际标准——T568A标准、T568B标准（<strong>其中，T568B为平常所使用的线序</strong>）！</p><ul><li>T568A：从左到右依次为<strong>1-绿白、2-绿、3-橙白、4-蓝、5-蓝白、6-橙、7-棕白、8-棕</strong>。</li><li>T568B：从左到右依次为<strong>1-橙白、2-橙、3-绿白、4-蓝、5-蓝白、6-绿、7-棕白、8-棕</strong>。</li></ul><p>既然直通线与交叉线的两端水晶头压线不同，那么用途自然也有区别：</p><ul><li>直通线主要用于<strong>交换机（或者集线器Hub）UPLINK口</strong>来连接<strong>另一台交换机（或者集线器Hub）的普通端口</strong>，或者<strong>交换机普通端口</strong>连接<strong>计算机(终端)网卡</strong>。</li><li>交叉线主要用于<strong>交换机（或者集线器Hub）普通端口</strong>连接到<strong>交换机（或者集线器Hub）普通端口</strong>，或者<strong>计算机(终端)网卡</strong>连接<strong>计算机(终端)网卡</strong>。</li></ul><h3 id="某些网络测试工具"><a href="#某些网络测试工具" class="headerlink" title="某些网络测试工具"></a>某些网络测试工具</h3><h4 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h4><p>ping 程序通常用来检测网络的连通性和延时</p><ul><li>命令格式：<ul><li>ping IP地址或主机名 [-t] [-a] [-n count] [-l size]</li></ul></li><li>参数含义：<ul><li>-t不停地向目标主机发送数据；</li><li>-a 以IP地址格式来显示目标主机的网络地址 ；</li><li>-n count 指定要ping 多少次，具体次数由count来指定 ；</li><li>-l size 指定发送到目标主机的数据包的大小。</li></ul></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTBkNjk1MDY5ZDA2OGVlNmUucG5n" alt="ping示例" title>                </div>                <div class="image-caption">ping示例</div>            </figure><h4 id="tracert"><a href="#tracert" class="headerlink" title="tracert"></a>tracert</h4><ul><li>tracert用来跟踪报文到达目的地所经过的路由器，也是常见的网络诊断工具之一（基于ICMP协议），UNIX下与之对应的是traceroute（基于UDP协议）。</li><li>通常的网络诊断顺序是首先使用ping程序来检测网络的连通性，如果不通，则使用Trace程序来跟踪报文在那台路由器上丢失，然后再进行下一步的处理。</li><li>处理机制:</li></ul><p>tracert通过发送端口大于30000的UDP报文达到目的地，目的地的应用程序不能识别该端口，会返回ICMP的错误消息“port unreachable”给源；tracert同时使用IP header的TTL值，通过设置TTL值从1到最大值逐渐增加，UDP报文每经过一台设备，TTL值加一，并返回ICMP的消息，同时在返回的ICMP消息中记录设备接口地址，并打印处理。</p><p>tracert在每个TTL都发送三个UDP /ICMP报文，并记录每个报文返回的ICMP的时间值，如果在5秒内不能收到返回的ICMP报文，该时间值记录为“*”号。</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTA3NTY2YmQ0MTM5YzFiMDQucG5n" alt="tracert示例" title>                </div>                <div class="image-caption">tracert示例</div>            </figure><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fjave_f%2F11431480" target="_blank" rel="noopener">《计算机网络》谢希仁. pdf版</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="路由环路" scheme="https://zhouie.cn/tags/%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF/"/>
    
      <category term="直通网线和交叉网线" scheme="https://zhouie.cn/tags/%E7%9B%B4%E9%80%9A%E7%BD%91%E7%BA%BF%E5%92%8C%E4%BA%A4%E5%8F%89%E7%BD%91%E7%BA%BF/"/>
    
      <category term="网络测试工具" scheme="https://zhouie.cn/tags/%E7%BD%91%E7%BB%9C%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>【数通】 OSI七层（或TCPIP五层）网络模型</title>
    <link href="https://zhouie.cn/posts/201907201/"/>
    <id>https://zhouie.cn/posts/201907201/</id>
    <published>2019-07-20T10:13:29.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="OSI模型"><a href="#OSI模型" class="headerlink" title="OSI模型"></a>OSI模型</h3><p><strong>OSI模型</strong>，即开放式系统互联通信参考模型（Open System Interconnection Reference Model），是一种由国际标准化组织提出的概念模型，一个试图使各种计算机在世界范围内互连为网络的标准框架。</p><blockquote><p>注意：OSI参考模型并没有提供一个可以实现的方法，而是描述了一些概念，用来协调进程间通信标准的制定。它定义了开放系统的层次结构、层次之间的相互关系以及各层所包括的可能的任务，作为一个框架来协调和组织各层所提供的服务。即OSI参考模型并不是一个标准，而是一个在制定标准时所使用的概念性框架。（摘自维基百科）</p></blockquote><p>这里大概了解一下OSI各层的功能与协议：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWExZjJlMTc1MWJiZTMyYjkucG5n" alt="图源网络" title>                </div>                <div class="image-caption">图源网络</div>            </figure><ul><li><p>应用层<br>网络服务与最终用户的一个接口。<br>协议有：HTTP FTP TFTP SMTP SNMP DNS TELNET HTTPS POP3 DHCP</p></li><li><p>表示层<br>数据的表示、安全、压缩。（在五层模型里面已经合并到了应用层）<br>格式有，JPEG、ASCll、DECOIC、加密格式等</p></li><li><p>会话层<br>建立、管理、终止会话。（在五层模型里面已经合并到了应用层）<br>对应主机进程，指本地主机与远程主机正在进行的会话</p></li><li><p>传输层<br>定义传输数据的协议端口号，以及流控和差错校验。<br>协议有：TCP UDP，数据包一旦离开网卡即进入网络传输层</p></li><li><p>网络层<br>进行逻辑地址寻址，实现不同网络之间的路径选择。<br>协议有：ICMP IGMP IP（IPV4 IPV6） ARP RARP</p></li><li><p>数据链路层<br>建立逻辑连接、进行硬件地址寻址、差错校验等功能。（由底层网络定义协议）<br>将比特组合成字节进而组合成帧，用MAC地址访问介质，错误发现但不能纠正。</p></li><li><p>物理层<br>建立、维护、断开物理连接。（由底层网络定义协议）<br>常用设备有（各种物理设备）集线器、中继器、调制解调器、网线、双绞线、同轴电缆。这些都是物理层的传输介质。</p></li></ul><h3 id="TCP-IP五层网络模型"><a href="#TCP-IP五层网络模型" class="headerlink" title="TCP/IP五层网络模型"></a>TCP/IP五层网络模型</h3><p>通常人们认为OSI模型的最上面三层（应用层、表示层和会话层）在TCP/IP组中是一个应用层。TCP/IP五层协议和OSI的七层协议对比关系如下：</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LWI0MDRiMjY5ZThkNmZjNTgucG5n" alt="图源网络" title>                </div>                <div class="image-caption">图源网络</div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy85OTM0NTU4LTE3YTAxNGJhMzRhYTIyMzAucG5n" alt="图源网络" title>                </div>                <div class="image-caption">图源网络</div>            </figure><blockquote><p>提醒一下，可能大家有时候会发现有这样的说法——TCP/IP协议簇分为四层。我也查阅了国内外一些文献上的叫法求证，用我个人的话来理解，之所以说<strong>TCP/IP协议簇将网络分为四层，依次是应用层、传输层、网际层、网络接口层</strong>，这是基于这样的原则来考虑的——<strong>“不关注底层物理介质，主要关注终端之间的逻辑数据流转发”</strong>。<br>换一种简单的理解，我们可以直接将将四层模型中的<strong>网络接口层</strong>理解为“TCP/IP五层模型中的<strong>数据链路层和物理层</strong>”。</p></blockquote><h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><ul><li><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fjave_f%2F11431480" target="_blank" rel="noopener">《计算机网络》谢希仁. pdf版</a></li><li><a href="https://www.cnblogs.com/qishui/p/5428938.html" target="_blank" rel="noopener">OSI七层模型与TCP/IP五层模型</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="数通" scheme="https://zhouie.cn/categories/%E6%95%B0%E9%80%9A/"/>
    
    
      <category term="OSI七层" scheme="https://zhouie.cn/tags/OSI%E4%B8%83%E5%B1%82/"/>
    
      <category term="TCP/IP五层" scheme="https://zhouie.cn/tags/TCP-IP%E4%BA%94%E5%B1%82/"/>
    
  </entry>
  
  <entry>
    <title>【Oracle数据库】 Oracle Linux上部署Oracle 11g服务并实现SSH远程登录管理</title>
    <link href="https://zhouie.cn/posts/201903241/"/>
    <id>https://zhouie.cn/posts/201903241/</id>
    <published>2019-03-24T00:03:09.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>贴上与这次安装相关文件、安装包的链接：</p><ul><li>实体机（客户端）<br>链接：<a href="https://pan.baidu.com/s/13lpEv04jb1AL41yFRkU6kQ" target="_blank" rel="noopener">https://pan.baidu.com/s/13lpEv04jb1AL41yFRkU6kQ</a><br>提取码：<code>dqa0</code></li><li>虚拟机（服务器端）<br>链接：<a href="https://pan.baidu.com/s/1AYuwHc2ECMawgc8sEf-H7Q" target="_blank" rel="noopener">https://pan.baidu.com/s/1AYuwHc2ECMawgc8sEf-H7Q</a><br>提取码：<code>jel2</code></li></ul><blockquote><p>如遇链接失效，Mail To <code>nanzhouieATqq.com</code>!</p></blockquote><h3 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h3><ol><li>安装 <code>virtualbox</code> 虚拟机（我更喜欢的是<code>VMware</code>）；</li><li>在虚拟机上安装<code>Oracle Linux</code>；</li><li>在<code>Oracle Linux</code>上安装<code>Oracle 11g</code>；</li><li>配置虚拟机的网络，数据库服务器的监听，<code>TNS</code>，使得可以远程访问数据库服务器。</li><li>采用远程登录方式，使用<code>ssh</code>登录数据库服务器，进行数据库实例管理。</li><li>采用远程访问方式，使用 <code>i*sqlplus</code>或者第三方管理软件登录服务器，进行数据库实例管理。</li><li>建立<code>HR</code>的模式（建议使用官方脚本）。</li></ol><h3 id="实验前期准备"><a href="#实验前期准备" class="headerlink" title="实验前期准备"></a>实验前期准备</h3><h4 id="软件目录"><a href="#软件目录" class="headerlink" title="软件目录"></a>软件目录</h4><table><thead><tr><th style="text-align:center">名称</th><th style="text-align:center">版本号</th></tr></thead><tbody><tr><td style="text-align:center">Vmware虚拟机</td><td style="text-align:center">15.0.0-full-10134415-64bit</td></tr><tr><td style="text-align:center">linux_11gR2_database_1of2</td><td style="text-align:center">11.2.0.1.0 - 64bit</td></tr><tr><td style="text-align:center">Putty.exe</td><td style="text-align:center">Release 0.70-64bit</td></tr><tr><td style="text-align:center">Toad for oracle</td><td style="text-align:center">12.8.0.49 -32bit</td></tr><tr><td style="text-align:center">Oracle_11gR2_client</td><td style="text-align:center">11g Release2 (11.2)-32bit</td></tr><tr><td style="text-align:center">Oracle Linux文件(DOC-1002902.ova)</td><td style="text-align:center">Oracle Linux x64</td></tr></tbody></table><h4 id="准备配置文件、脚本文件"><a href="#准备配置文件、脚本文件" class="headerlink" title="准备配置文件、脚本文件"></a>准备配置文件、脚本文件</h4><ul><li>在Oracle服务器端建立<code>HR(Human Resource)</code>模式所需的脚本执行文件；</li><li>Oracle客户端配置<code>TNS</code>服务所需要的<code>tnsname.ora</code>、<code>listener.ora</code>文件。</li></ul><blockquote><p>ps：以上这些安装、配置、脚本文件在上面我分享的百度云链接文件中都能找到。</p></blockquote><h3 id="实验方案（具体步骤）"><a href="#实验方案（具体步骤）" class="headerlink" title="实验方案（具体步骤）"></a>实验方案（具体步骤）</h3><h4 id="在虚拟机上安装Oracle-Linux"><a href="#在虚拟机上安装Oracle-Linux" class="headerlink" title="在虚拟机上安装Oracle Linux"></a>在虚拟机上安装Oracle Linux</h4><ol><li>在虚拟机中导入老师提供的 <code>DOC-1002902.ova</code>文件，由于实验室32位PC机的原因，导入过程总是以失败结束；因此改选<code>64位PC机(配载VM虚拟机)</code>来操作。</li></ol><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-1dc8a0a2960422f5?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-4b75778372c442ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><ol start="2"><li>在VM虚拟机成功安装<code>Oracle linux</code>（我的账户登录密码 <del>oracle</del> ），可以去设置语言、时区、用户名及密码等。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-acced08f8525796b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ol><h4 id="在Linux上安装Oracle-11g-R2-服务器端"><a href="#在Linux上安装Oracle-11g-R2-服务器端" class="headerlink" title="在Linux上安装Oracle 11g R2(服务器端)"></a>在Linux上安装Oracle 11g R2(服务器端)</h4><h5 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h5><h6 id="硬件环境监测"><a href="#硬件环境监测" class="headerlink" title="硬件环境监测"></a>硬件环境监测</h6><table><thead><tr><th style="text-align:center">Content</th><th style="text-align:center">Instruction</th></tr></thead><tbody><tr><td style="text-align:center">检查物理内存</td><td style="text-align:center"><code>grep MemTotal /proc/meminfo</code></td></tr><tr><td style="text-align:center">查看交换分区</td><td style="text-align:center"><code>grep SwapTotal /proc/meminfo</code></td></tr><tr><td style="text-align:center">查看当前内存使用情况</td><td style="text-align:center"><code>free</code></td></tr></tbody></table><blockquote><p>PS：这一类指令可以有很多，但其实只要在之前导入虚拟机文件过程没有什么异常，不是很有必要去了解这些硬件环境信息，那么这一步可以跳过。</p></blockquote><h6 id="检查各种补丁包、函数依赖包"><a href="#检查各种补丁包、函数依赖包" class="headerlink" title="检查各种补丁包、函数依赖包"></a>检查各种补丁包、函数依赖包</h6><ul><li><p>方法：通过上网查找到需要的函数依赖包有以下这些：</p>  <figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">binutils<span class="number">-2.17</span><span class="number">.50</span><span class="number">.0</span><span class="number">.6</span></span><br><span class="line">compat-libstdc++<span class="number">-33</span><span class="number">-3.2</span><span class="number">.3</span></span><br><span class="line">compat-libstdc++<span class="number">-33</span><span class="number">-3.2</span><span class="number">.3</span> (<span class="number">32</span> bit)</span><br><span class="line">elfutils-libelf<span class="number">-0.125</span></span><br><span class="line">elfutils-libelf-devel<span class="number">-0.125</span></span><br><span class="line">gcc<span class="number">-4.1</span><span class="number">.2</span></span><br><span class="line">gcc-c++<span class="number">-4.1</span><span class="number">.2</span></span><br><span class="line">glibc<span class="number">-2.5</span><span class="number">-24</span></span><br><span class="line">glibc<span class="number">-2.5</span><span class="number">-24</span> (<span class="number">32</span> bit)</span><br><span class="line">glibc-common<span class="number">-2.5</span></span><br><span class="line">glibc-devel<span class="number">-2.5</span></span><br><span class="line">glibc-devel<span class="number">-2.5</span> (<span class="number">32</span> bit)</span><br><span class="line">glibc-headers<span class="number">-2.5</span></span><br><span class="line">ksh<span class="number">-20060214</span></span><br><span class="line">libaio<span class="number">-0.3</span><span class="number">.106</span></span><br><span class="line">libaio<span class="number">-0.3</span><span class="number">.106</span> (<span class="number">32</span> bit)</span><br><span class="line">libaio-devel<span class="number">-0.3</span><span class="number">.106</span></span><br><span class="line">libaio-devel<span class="number">-0.3</span><span class="number">.106</span> (<span class="number">32</span> bit)</span><br><span class="line">libgcc<span class="number">-4.1</span><span class="number">.2</span></span><br><span class="line">libgcc<span class="number">-4.1</span><span class="number">.2</span> (<span class="number">32</span> bit)</span><br><span class="line">libstdc++<span class="number">-4.1</span><span class="number">.2</span></span><br><span class="line">libstdc++<span class="number">-4.1</span><span class="number">.2</span> (<span class="number">32</span> bit)</span><br><span class="line">libstdc++-devel <span class="number">4.1</span><span class="number">.2</span></span><br><span class="line">make<span class="number">-3.81</span></span><br><span class="line">sysstat<span class="number">-7.0</span><span class="number">.2</span></span><br></pre></td></tr></table></figure></li><li><p>通过类似重复以下的操作，借助root用户终端 <code>yum search/install</code> 命令将这些未安装的依赖包全部安装到服务端。</p></li></ul><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-8fb3715030425bd8?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-2bb2d34a1a21ff84?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image" title>                </div>                <div class="image-caption">image</div>            </figure><ul><li>然后，再使用<code>yum</code>快速安装oracle预装环境——<code>yum install oracle-rdbms-server-11gR2-preinstall</code></li></ul><h6 id="修改用户环境配置等参数文件"><a href="#修改用户环境配置等参数文件" class="headerlink" title="修改用户环境配置等参数文件"></a>修改用户环境配置等参数文件</h6><ul><li><p>通过<code>vi .bash_profile</code>命令进入编辑界面，点击<code>i</code>进入<code>insert模式</code>，就可以写入以下数据了，写完数据后，点击<code>ESC</code>退出<code>insert模式</code>敲入<code>:wq</code> 保存本次修改并回到终端。</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">ORACLE_BASE=/u01/app/oracle</span><br><span class="line">ORACLE_HOME=<span class="variable">$ORACLE_BASE</span>/product/11.2.0/db_1</span><br><span class="line">ORACLE_SID=prod <span class="comment">#这个位置填写的是Service_name</span></span><br></pre></td></tr></table></figure></li><li><p>修改 <code>/etc/hosts</code> ,增加 <code>ip地址</code> 和 <code>主机名</code> 的对应关系，按照和上面同样的方法，添加下面这条：</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.216.128  docker.oracleworld.com  #ip地址 hostname</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>注意：如果出现 <code>其他IP地址</code> 与 <code>hostname</code> 的对应关系，应当在前面加上<code>#</code>注释掉或者直接删掉。</p></blockquote><ul><li>同样的方法，通过终端<code>vi mk_dir.sh</code> 添入以下数据  <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /u01/app/oraInventory</span><br><span class="line">chmod -R <span class="number">775</span> /u01/app/oraInventory</span><br><span class="line"><span class="built_in">mkdir</span> -p /u01/app/oracle</span><br><span class="line"><span class="built_in">mkdir</span> /u01/app/oracle/cfgtoollogs</span><br><span class="line">chown -R oracle:oinstall  /u01</span><br><span class="line">chmod -R <span class="number">775</span> /u01/app/oracle</span><br><span class="line"><span class="built_in">mkdir</span> -p /u01/app/oracle/product/<span class="number">11</span>.<span class="number">2</span>.<span class="number">0</span>/db_1</span><br><span class="line">chown -Roracle:oinstall/u01/app/oracle/product/<span class="number">11</span>.<span class="number">2</span>.<span class="number">0</span>/db_1</span><br><span class="line">chmod -R <span class="number">775</span> /u01/app/oracle/product/<span class="number">11</span>.<span class="number">2</span>.<span class="number">0</span>/db_1</span><br></pre></td></tr></table></figure></li></ul><h6 id="切换到Oracle用户"><a href="#切换到Oracle用户" class="headerlink" title="切换到Oracle用户"></a>切换到Oracle用户</h6><p>去设置里面找到<code>users</code>，解锁并修改已经生成的<code>oracle</code>用户密码，再切换用户登录到<code>oracle</code>下。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-52b8825356126603?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h5 id="安装Oracle-11g"><a href="#安装Oracle-11g" class="headerlink" title="安装Oracle 11g"></a>安装Oracle 11g</h5><p>在终端输入命令：<code>unzip oracle11g 11.2.0.4</code> 两个安装文件（也可以手动合并到同一个文件夹下），进入安装文件中的目录<code>database</code>，运行命令: <code>./runInstaller</code><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-0bfa487e1e68f80d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br>同时，如果由于环境配置的原因，发现随后<code>安装界面出现乱码</code>，那么最好在执行安装之前添上这样一条语句：<code>export LANG=en_US_UTF-8</code>。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-413813bdd5b19593?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br>在随后出现的安装界面中，依次选择如下：</p><ul><li>注意:过程中可能省去了一些安装界面（默认<code>Next</code>即可） <figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-0e99996534117d4f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>这里不填email等直接<code>next</code>，出现弹窗点击<code>Yes</code>；<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-8eedb77173b43bf1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>在接下来的界面中，依次选 <code>install software only</code>。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-46394392a2474745?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>选择单实例类型的数据库<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-07bf8f7f631a4741?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>选择oracle的语言，选择英文<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-0603fef4e3569852?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>数据库类型选择企业版<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-ed49201f938c9643?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>这里注意查看<code>Oracle_Base</code>路径和<code>Oracle_home</code>路径，必须保证和用户的初始化参数文件一致<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-2ad8b0f3de4628b0?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>设置 <code>INVENTORY DIRECTORY</code><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-dee547f1b175a02f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>检查<code>oracle</code>用户所属的组<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-cbc27bf4b8494221?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li><code>preinstall</code>检查阶段，监测<code>oracle</code>所依赖的软件包，重新安装缺失的软件包，如果仍然有错误，那么全部忽略即可<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-7f9ad57bb86e1110?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>最后一步监测<code>oracle</code>的情况<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-de9aafeda5b4bb13?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>久违的安装界面<br>安装到这个步骤，基本上问题不多了, <code>copying files</code> 阶段时，<code>root</code>模式下开一个终端，进入安装目录下的<code>sysman/lib</code>，编辑<code>ins_emagent.mk</code>文件。把 <code>$(MK_EMAGENT_NMECTL)</code>替换成<code>$(MK_EMAGENT_NMECTL) -lnnz11</code> <figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-28d397aece469d02?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure>同时这个过程中有可能会有一个提示对话框，然后按照指定路径及说明方法运行两个脚本。<br>打开终端，通过<code>su – root</code>切换到<code>root</code>用户，再通过<code>bash</code>命令依次执行对应目录的两个脚本，然后再来这个弹窗界面点击<code>OK</code>即可。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-78b360ac2f6ac152?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-ff2980bb88e24cd1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>随后，就可以点击<code>next</code>，出现如下界面，表示在虚拟机这边安装服务端的<code>Oracle 11g</code>就已经成功了<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-e2f14184bd102626?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ul><h5 id="服务端NETCA创建配置监听程序"><a href="#服务端NETCA创建配置监听程序" class="headerlink" title="服务端NETCA创建配置监听程序"></a>服务端NETCA创建配置监听程序</h5><h6 id="执行netca指令"><a href="#执行netca指令" class="headerlink" title="执行netca指令"></a>执行netca指令</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-20dfc120af86a0f6?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-ec32de2ea25dc77c?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="接下来的界面弹窗中直接默认Next"><a href="#接下来的界面弹窗中直接默认Next" class="headerlink" title="接下来的界面弹窗中直接默认Next"></a>接下来的界面弹窗中直接默认Next</h6><p>在选择TCP/IP端口号时，可能会出现一个弹窗提示：默认的1521端口可能被占用。通过查找并没有发现被占用问题，因此选择Yes继续。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-35b6376c10ba97db?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-bbd5d043cd714ddd?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h5 id="建立一个数据库实例DBCA建库"><a href="#建立一个数据库实例DBCA建库" class="headerlink" title="建立一个数据库实例DBCA建库"></a>建立一个数据库实例DBCA建库</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-65d8235b39eabd98?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-451dd8eaeb25a446?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-62e9c091087ac224?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-46af35de1b2f0b0b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="设置数据库名和SID"><a href="#设置数据库名和SID" class="headerlink" title="设置数据库名和SID"></a>设置数据库名和SID</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-8ee997ffa3c0c518?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="不启用OEM"><a href="#不启用OEM" class="headerlink" title="不启用OEM"></a>不启用OEM</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-0f5989ece6c27129?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-9f56bcb83fdc0eba?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="不需修改、直接next"><a href="#不需修改、直接next" class="headerlink" title="不需修改、直接next"></a>不需修改、直接next</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-5256678d831edec4?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="不启用快速恢复区、不启用归档"><a href="#不启用快速恢复区、不启用归档" class="headerlink" title="不启用快速恢复区、不启用归档"></a>不启用快速恢复区、不启用归档</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-f1fcbd9f66f93d70?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h6 id="不需修改、直接next-1"><a href="#不需修改、直接next-1" class="headerlink" title="不需修改、直接next"></a>不需修改、直接next</h6><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-01ef04431cfb57ed?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-6421cad657428e32?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-98231589a401ccfa?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-4b6746a3369b4809?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><p>至此，Oracle服务端实例数据库创建完毕。</p><h5 id="服务端启用ssh服务"><a href="#服务端启用ssh服务" class="headerlink" title="服务端启用ssh服务"></a>服务端启用ssh服务</h5><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-97739298d1c072f1?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><h4 id="在主机上安装Oracle-11g-Client-客户端"><a href="#在主机上安装Oracle-11g-Client-客户端" class="headerlink" title="在主机上安装Oracle 11g Client(客户端)"></a>在主机上安装Oracle 11g Client(客户端)</h4><h5 id="检查ssh服务是否正常"><a href="#检查ssh服务是否正常" class="headerlink" title="检查ssh服务是否正常"></a>检查ssh服务是否正常</h5><p>下载<code>putty.exe</code>，打开以后，安装下图填入相对应信息（虚拟机IP地址可以在网络设置中找到，同时，建议虚拟机端网络连接方式选择仅主机模式）进行测试（确保虚拟机处于开启状态）。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-140897e6f9719600?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-5bbe51db491c1bde?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h4 id="安装Oracle客户端并配置本地网络服务监听"><a href="#安装Oracle客户端并配置本地网络服务监听" class="headerlink" title="安装Oracle客户端并配置本地网络服务监听"></a>安装Oracle客户端并配置本地网络服务监听</h4><h5 id="点击setup-exe启动安装"><a href="#点击setup-exe启动安装" class="headerlink" title="点击setup.exe启动安装"></a>点击setup.exe启动安装</h5><ul><li>安装过程中，除修改安装路径外，其余直接默认Next即可。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-24d4f4fc62da0ba4?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>选择管理员选项<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-96b3632e4be7814e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ul><h5 id="配置前的一些准备"><a href="#配置前的一些准备" class="headerlink" title="配置前的一些准备"></a>配置前的一些准备</h5><ul><li>将之前准备好的 <code>listener.ora</code>、<code>tnsnames.ora</code>文件（两个文件里面的内容如下所示）放到如下所示目录下。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-60a9d80d7e8b3e3e?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-25e33f069563f53d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-8b75d23f71bb816c?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>同时，在环境变量中添加以下系统变量。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-46beba552589c9a9?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li><li>在ssh服务控制终端执行如下（开启数据库、开启监听）<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-a019ff1e3459cf01?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-cc266ba67ec12f0d?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ul><h5 id="本地网络服务名配置"><a href="#本地网络服务名配置" class="headerlink" title="本地网络服务名配置"></a>本地网络服务名配置</h5><p>在所有程序中找到<code>Net Configuration Assistant</code>，进入配置界面操作如下。在测试连接过程中更改登录如果忘了数据库服务端密码（以<code>sys</code>用户为例），则需要重新给<code>sys</code>设置密码（详见后面的实验问题及解决办法）。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-f0cfdb00504ac935?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-c9ff6c61433c79cb?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-927087915ef45538?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-6e86aa7a4da4062b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-fd459eee5572500b?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h4 id="第三方软件Toad-for-Oracle连接数据库"><a href="#第三方软件Toad-for-Oracle连接数据库" class="headerlink" title="第三方软件Toad for Oracle连接数据库"></a>第三方软件Toad for Oracle连接数据库</h4><h5 id="TNS检测"><a href="#TNS检测" class="headerlink" title="TNS检测"></a>TNS检测</h5><p>进入<code>cmd</code>测试如下，说明数据库监听配置无误<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-b09217e5837d98d3?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h5 id="使用Toad连接"><a href="#使用Toad连接" class="headerlink" title="使用Toad连接"></a>使用Toad连接</h5><p>打开<code>Toad for Oracle</code>中的<code>toad.exe</code>启动，输入数据库服务端用户名以及密码后成功连接会出现如下的工作界面。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-24b1520095a04c3f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure><br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-d9044bea068e60db?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure> </p><h4 id="建立HR的模式（服务器端进行）"><a href="#建立HR的模式（服务器端进行）" class="headerlink" title="建立HR的模式（服务器端进行）"></a>建立HR的模式（服务器端进行）</h4><h5 id="准备脚本文件"><a href="#准备脚本文件" class="headerlink" title="准备脚本文件"></a>准备脚本文件</h5><p>在如下所示目录中，将已准备好的脚本文件粘贴过来<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-d483da5e7162ba69?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h5 id="执行脚本文件"><a href="#执行脚本文件" class="headerlink" title="执行脚本文件"></a>执行脚本文件</h5><p>进入数据库层面，按照下面流程执行<code>hr_main.sql</code>这个脚本文件设置参数，就可以解锁HR用户并构建<code>HR模式</code>，且数据表中都有初始样例数据。<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-ffffb128c20a817f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></p><h3 id="实验出现的问题及解决办法"><a href="#实验出现的问题及解决办法" class="headerlink" title="实验出现的问题及解决办法"></a>实验出现的问题及解决办法</h3><ol><li>第一次尝试安装时，总是在<code>Linking Text File</code>出失败，且界面卡死在那里。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-0826e3f4a60e55ee?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ol><ul><li>解决办法：<br>虚拟机重新启动并通过恢复快照这一特性重新进行安装，主要在对那些依赖包的安装过程要尤为注意，一个一个一次检查确保已安装，虽然方法很笨拙，但至少不会出错。<br>同时，在<code>Prerequisite Checks</code>阶段忽略所有错误继续下一步，随后完成安装。</li></ul><ol start="2"><li>整个过程中经常会出现各种类型的错误,下面列出一些我遇到的这类问题</li></ol><table><thead><tr><th style="text-align:center">错误类型</th><th style="text-align:center">错误原因</th><th style="text-align:center">解决方案</th></tr></thead><tbody><tr><td style="text-align:center"><code>ORA-12162</code></td><td style="text-align:center"><code>TNS:net service name is incorrectly specified</code></td><td style="text-align:center">给出ORACLE_SID（可赋临时值或是去host文件添加参数），重新尝试登录数据库服务端</td></tr><tr><td style="text-align:center"><code>TNS-12545</code></td><td style="text-align:center"><code>Connect failed because target host or object does not exist</code></td><td style="text-align:center">服务端root模式下修改host和listener.ora文件（即host文件里添上一条“IP地址 主机名”，listener文件里将host赋为修改后的主机名）</td></tr><tr><td style="text-align:center"><code>ORA-01078、LRM-00109</code></td><td style="text-align:center"><code>Failure in processing system parameters</code></td><td style="text-align:center">将<code>$ORACLE_BASE/admin/数据库名称/pfile</code>目录下的<code>init.ora.\********</code>形式的文件copy到<code>$ORACLE_HOME/dbs</code>目录下 <code>initoracle.ora</code>即可</td></tr><tr><td style="text-align:center"><code>ORA-12514</code></td><td style="text-align:center"><code>TNS 监听程序当前无法识别连接描述符中请求服务</code></td><td style="text-align:center">listener.ora中添加：(SID_DESC =   (GLOBAL_DBNAME=全局数据库名)    (ORACLE_HOME =依照相对应的路径来填)    (SID_NAME = 数据库服务名)    )</td></tr><tr><td style="text-align:center"><code>ORA-12154</code></td><td style="text-align:center"><code>TNS无法解析指定的连接标识符</code></td><td style="text-align:center">重新进行配置网络，在服务端查询此数据库服务下的服务名，并重新检查配置，填写相对应虚拟机的IP地址，对于账号、口令登陆的问题，需要去sysdba用户下去设置。</td></tr></tbody></table><ol start="3"><li>用户忘记了数据库服务端的口令，导致在本地客户端进行配置网络服务时总是出现口令错误的提示</li></ol><ul><li>解决办法：按照下面的操作步骤进行，这样使用修改后的用户名和口令就可以测试成功了。<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-bb8f17a7ed7beb34?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure>只能选择用户状态是<code>open</code>的用户进行重新设置口令的处理<figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-ce0d8da4aa41d616.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt title>                </div>                <div class="image-caption"></div>            </figure></li></ul><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><ul><li><a href="http://www.cnblogs.com/iyoume2008/p/6986374.html" target="_blank" rel="noopener">⭐Oracle linux安装Oracle 11G</a></li><li><a href="https://docs.oracle.com/cd/B19306_01/server.102/b14198/scripts.htm#Cihgfecd" target="_blank" rel="noopener">HR Schema</a></li><li><a href="https://blog.csdn.net/jave_f/article/details/78231905" target="_blank" rel="noopener">Oracle 11g中执行Execute的时候报异常ORA-01031的解决办法</a></li><li><a href="https://blog.csdn.net/jave_f/article/details/78539082" target="_blank" rel="noopener">Oracle PL/SQL DBA 编程实践基础</a></li><li><a href="https://blog.csdn.net/jave_f/article/details/77921442" target="_blank" rel="noopener">Oracle数据库任何用户密码都能以sysdba角色登入</a></li><li><a href="https://blog.csdn.net/jave_f/article/details/77921554" target="_blank" rel="noopener">浅析Oracle PL/SQL 学习（部分）</a></li><li><a href="https://jingyan.baidu.com/article/48a42057e29fb9a92425048d.html" target="_blank" rel="noopener">Oracle 11gR2安装乱码解决方案</a></li></ul><h3 id="最后一点说明"><a href="#最后一点说明" class="headerlink" title="最后一点说明"></a>最后一点说明</h3><p>这是我有史以来写过的最长最长的一篇安装配置教程了，大部分的内容步骤都还是大三选修所记录的实验报告内容。这段时间需要准备数据库知识的复习，这才重新拾起来，大体按照上面的步骤依次给重现了。让我意外的是，当时竟然没有po出一份安装配置教程放网上。所以，这次赶紧加了把劲，整理了这篇。</p><p>这里面有些地方可能比较混乱，一是因为图片量太大了，可能会有一些偏差，还有就是我得承认文中有用了几张别的地方的图片；二是因为这次的整个安装配置过程相当繁琐，很多地方可能会出现报错、失败等等，我还记得当年选修这门课第一个实验就是弄这个，当时Linux指令等一些知识还不够娴熟，好像前后花了三天时间才完事。</p><p>最后，我想说的就是，教程写的再完美，实际去操作的时候，每个人可能都难免会出现这样那样的问题，放在这篇来讲，出现最多的就是形如 “<code>ORA-××××××</code>” 的类似问题，出了问题并不可怕，去某度和谷歌搜一下“<code>ORA-××××××</code>”，只要不是特别棘手，基本上都能解决。</p><p>贴张图！！！<br><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="http://upload-images.jianshu.io/upload_images/9934558-c987f4c00df89814?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="提神醒脑" title>                </div>                <div class="image-caption">提神醒脑</div>            </figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="Oracle数据库" scheme="https://zhouie.cn/categories/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="Oracle数据库" scheme="https://zhouie.cn/tags/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="Oracle 11g" scheme="https://zhouie.cn/tags/Oracle-11g/"/>
    
      <category term="SSH" scheme="https://zhouie.cn/tags/SSH/"/>
    
  </entry>
  
  <entry>
    <title>【重装系统】 整理U盘启动快捷键查询列表</title>
    <link href="https://zhouie.cn/posts/201903201/"/>
    <id>https://zhouie.cn/posts/201903201/</id>
    <published>2019-03-20T22:11:09.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>因为业务需要的原因，再一次重装了电脑系统（<code>Windows 10 专业版</code>），每次给自己或者别人重装电脑系统的时候，总记不太牢不同品牌电脑的<code>U盘启动快捷键</code>是什么，所以，这次的话，特地cp了下面这份<code>U盘启动快捷键查询表</code>！</p><blockquote><p>所谓<code>快捷键</code>就是快速启动的按键（比如我的电脑是联想笔记本，那么对应快捷键就是<code>F12</code>）！快捷键的作用就是可以不用通过繁琐地设置bios，即可实现快速启动u盘！不同品牌的电脑、不同型号的主板它的快捷键都可能不同。</p></blockquote><h3 id="品牌台式"><a href="#品牌台式" class="headerlink" title="品牌台式"></a>品牌台式</h3><table><thead><tr><th style="text-align:center">台式机品牌</th><th style="text-align:center">启动按键</th><th style="text-align:center">台式机品牌</th><th style="text-align:center">启动按键</th></tr></thead><tbody><tr><td style="text-align:center">联想台式电脑</td><td style="text-align:center">F12</td><td style="text-align:center">惠普台式电脑</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">宏基台式电脑</td><td style="text-align:center">F12</td><td style="text-align:center">戴尔台式电脑</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">神舟台式电脑</td><td style="text-align:center">F12</td><td style="text-align:center">硕台式电脑</td><td style="text-align:center">F8</td></tr><tr><td style="text-align:center">方正台式电脑</td><td style="text-align:center">F12</td><td style="text-align:center">清华同方台式电脑</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">海尔台式电脑</td><td style="text-align:center">F12</td><td style="text-align:center">明基台式电脑</td><td style="text-align:center">F8</td></tr></tbody></table><h3 id="品牌笔记本"><a href="#品牌笔记本" class="headerlink" title="品牌笔记本"></a>品牌笔记本</h3><table><thead><tr><th style="text-align:center">笔记本品牌</th><th style="text-align:center">启动按键</th><th style="text-align:center">笔记本品牌</th><th style="text-align:center">启动按键</th></tr></thead><tbody><tr><td style="text-align:center">联想笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">宏基笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">华硕笔记本</td><td style="text-align:center">ESC</td><td style="text-align:center">惠普笔记本</td><td style="text-align:center">F9</td></tr><tr><td style="text-align:center">联想Thinkpad</td><td style="text-align:center">F12</td><td style="text-align:center">戴尔笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">神舟笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">东芝笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">三星笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">IBM笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">富士通笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">海尔笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">方正笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">清华同方笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">微星笔记本</td><td style="text-align:center">F11</td><td style="text-align:center">明基笔记本</td><td style="text-align:center">F9</td></tr><tr><td style="text-align:center">技嘉笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">Gateway笔记本</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">eMachines笔记本</td><td style="text-align:center">F12</td><td style="text-align:center">索尼笔记本</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">苹果笔记本</td><td style="text-align:center">开机长按option键</td><td style="text-align:center"></td></tr></tbody></table><h3 id="主板"><a href="#主板" class="headerlink" title="主板"></a>主板</h3><table><thead><tr><th style="text-align:center">主板品牌</th><th style="text-align:center">启动按键</th><th style="text-align:center">主板品牌</th><th style="text-align:center">启动按键</th></tr></thead><tbody><tr><td style="text-align:center">华硕主板</td><td style="text-align:center">F8</td><td style="text-align:center">技嘉主板</td><td style="text-align:center">F12</td></tr><tr><td style="text-align:center">微星主板</td><td style="text-align:center">F11</td><td style="text-align:center">映泰主板</td><td style="text-align:center">F9</td></tr><tr><td style="text-align:center">梅捷主板</td><td style="text-align:center">ESC或F12</td><td style="text-align:center">七彩虹主板</td><td style="text-align:center">ESC或F11</td></tr><tr><td style="text-align:center">华擎主板</td><td style="text-align:center">F11</td><td style="text-align:center">斯巴达卡主板</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">昂达主板</td><td style="text-align:center">F11</td><td style="text-align:center">双敏主板</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">翔升主板</td><td style="text-align:center">F10</td><td style="text-align:center">精英主板</td><td style="text-align:center">ESC或F11</td></tr><tr><td style="text-align:center">冠盟主板</td><td style="text-align:center">F11或F12</td><td style="text-align:center">富士康主板</td><td style="text-align:center">ESC或F12</td></tr><tr><td style="text-align:center">顶星主板</td><td style="text-align:center">F11或F12</td><td style="text-align:center">铭瑄主板</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">盈通主板</td><td style="text-align:center">F8</td><td style="text-align:center">捷波主板</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">Intel主板</td><td style="text-align:center">F12</td><td style="text-align:center">杰微主板</td><td style="text-align:center">ESC或F8</td></tr><tr><td style="text-align:center">致铭主板</td><td style="text-align:center">F12</td><td style="text-align:center">磐英主板</td><td style="text-align:center">ESC</td></tr><tr><td style="text-align:center">磐正主板</td><td style="text-align:center">ESC</td><td style="text-align:center">冠铭主板</td><td style="text-align:center">F9</td></tr></tbody></table><blockquote><p>PS：其它机型请尝试或参考以上品牌常用启动热键，也欢迎各位在下面留言添加更新！</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="重装系统" scheme="https://zhouie.cn/categories/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F/"/>
    
    
      <category term="重装系统" scheme="https://zhouie.cn/tags/%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F/"/>
    
      <category term="U盘启动盘" scheme="https://zhouie.cn/tags/U%E7%9B%98%E5%90%AF%E5%8A%A8%E7%9B%98/"/>
    
      <category term="快捷键查询" scheme="https://zhouie.cn/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%9F%A5%E8%AF%A2/"/>
    
  </entry>
  
  <entry>
    <title>【祝福】 用33种编程语言祝福全天下所有的情侣</title>
    <link href="https://zhouie.cn/posts/2019021401/"/>
    <id>https://zhouie.cn/posts/2019021401/</id>
    <published>2019-02-14T21:03:22.000Z</published>
    <updated>2019-11-25T01:25:36.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><table><thead><tr><th style="text-align:center">语言</th><th style="text-align:center">祝福</th></tr></thead><tbody><tr><td style="text-align:center">C</td><td style="text-align:center"><code>printf(&quot;爱情美满&quot;);</code></td></tr><tr><td style="text-align:center">C++</td><td style="text-align:center"><code>cout&lt;&lt;&quot;甜甜蜜蜜&quot;;</code></td></tr><tr><td style="text-align:center">C#</td><td style="text-align:center"><code>System.Console.WriteLine(&quot;温馨浪漫&quot;)</code></td></tr><tr><td style="text-align:center">VB</td><td style="text-align:center"><code>Msg(&quot;白头偕老&quot;)</code></td></tr><tr><td style="text-align:center">VC</td><td style="text-align:center"><code>MessageBox(&quot;恩爱百年&quot;);</code></td></tr><tr><td style="text-align:center">Java</td><td style="text-align:center"><code>System.out.println(&quot;佳偶天成&quot;);</code></td></tr><tr><td style="text-align:center">JavaScript</td><td style="text-align:center"><code>alert(&quot;相濡以沫&quot;)</code></td></tr><tr><td style="text-align:center">PHP</td><td style="text-align:center"><code>echo &quot;百年好合&quot;;</code></td></tr><tr><td style="text-align:center">Python</td><td style="text-align:center"><code>print(&quot;心心相印&quot;)</code></td></tr><tr><td style="text-align:center">Html</td><td style="text-align:center"><code>&lt;br/&gt;互敬互爱&lt;br/&gt;</code></td></tr><tr><td style="text-align:center">Objectivec</td><td style="text-align:center"><code>NSLog(@&quot;爱心永驻&quot;);</code></td></tr><tr><td style="text-align:center">QBasic</td><td style="text-align:center"><code>Print &quot;永浴爱河&quot;</code></td></tr><tr><td style="text-align:center">Asp</td><td style="text-align:center"><code>Response.Write &quot;一见钟情&quot;</code></td></tr><tr><td style="text-align:center">Ruby</td><td style="text-align:center"><code>puts &quot;情海浪涌&quot;</code></td></tr><tr><td style="text-align:center">VBScript</td><td style="text-align:center"><code>MsgBox &quot;鸾凤和鸣&quot;</code></td></tr><tr><td style="text-align:center">XML</td><td style="text-align:center"><code>&lt;TextView android:text=&quot;温情脉脉&quot; /&gt;</code></td></tr><tr><td style="text-align:center">LUA</td><td style="text-align:center"><code>print(&quot;地久天长&quot;)</code></td></tr><tr><td style="text-align:center">Delphi</td><td style="text-align:center"><code>ShowMessage(&#39;长此以往&#39;);</code></td></tr><tr><td style="text-align:center">shell</td><td style="text-align:center"><code>echo 相亲相爱</code></td></tr><tr><td style="text-align:center">perl</td><td style="text-align:center"><code>print &#39;白头到老&#39;</code></td></tr><tr><td style="text-align:center">LISP</td><td style="text-align:center"><code>(format t &quot;相敬如宾~%&quot;)</code></td></tr><tr><td style="text-align:center">powerBuilder</td><td style="text-align:center"><code>messagebox（&quot;夫唱妇随&quot;)</code></td></tr><tr><td style="text-align:center">COBOL</td><td style="text-align:center"><code>DISPLAY &#39;妇唱夫随&#39;</code></td></tr><tr><td style="text-align:center">aswing</td><td style="text-align:center"><code>JOptionPane.showMessageDialog(&quot;happy&quot;,&quot;福禄鸳鸯&quot;)</code></td></tr><tr><td style="text-align:center">Android</td><td style="text-align:center"><code>Toast.makeText(getApplicationContext(),&quot;美满良缘&quot;,Toast.LENGTH_SHORT).show()</code></td></tr><tr><td style="text-align:center">flex</td><td style="text-align:center"><code>Alert.show(&quot;百年琴瑟&quot;);</code></td></tr><tr><td style="text-align:center">Foxpro</td><td style="text-align:center"><code>?[宜室宜家！]</code></td></tr><tr><td style="text-align:center">iapp</td><td style="text-align:center"><code>tw(&quot;情投意合&quot;)</code></td></tr><tr><td style="text-align:center">DOS批处理</td><td style="text-align:center"><code>echo 如鼓琴瑟</code></td></tr><tr><td style="text-align:center">易语言</td><td style="text-align:center"><code>调试输出(“执子之手”)</code></td></tr><tr><td style="text-align:center">Clojure</td><td style="text-align:center"><code>(println &quot;与子偕老&quot;)</code></td></tr><tr><td style="text-align:center">verilog/systemverilog/e</td><td style="text-align:center"><code>$display(&quot;海枯石烂&quot;)</code></td></tr><tr><td style="text-align:center">as</td><td style="text-align:center"><code>trace(&quot;同心永结&quot;);</code></td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
      <category term="祝福" scheme="https://zhouie.cn/categories/%E7%A5%9D%E7%A6%8F/"/>
    
    
      <category term="节日祝福" scheme="https://zhouie.cn/tags/%E8%8A%82%E6%97%A5%E7%A5%9D%E7%A6%8F/"/>
    
      <category term="编程人生" scheme="https://zhouie.cn/tags/%E7%BC%96%E7%A8%8B%E4%BA%BA%E7%94%9F/"/>
    
  </entry>
  
</feed>
